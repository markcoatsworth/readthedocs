<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>HTCondor Annex Configuration</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- 3,sec-filename,next,info,NoFonts,fonts,html --> 
<meta name="src" content="ref.tex"> 
<link rel="stylesheet" type="text/css" href="ref.css"> 
</head><body 
>
   <span style="font-size: 200%;"><a 
href="HTCondorAnnexCustomizationGuide.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="HTCondorAnnexCustomizationGuide.html#tailHTCondorAnnexCustomizationGuide.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="#tailHTCondorAnnexConfiguration.html">&#x2193;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="CloudComputing.html#HTCondorAnnexConfiguration.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ApplicationProgrammingInterfacesAPIs.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><h3 class="sectionHead"><span class="titlemark">6.5   </span> <a 
 id="x67-5420006.5"></a>HTCondor Annex Configuration</h3>
   <div class="sectionTOCS">
   &#x00A0;&#x00A0;<span class="subsectionToc" >6.5.1 <a 
href="#x67-5430006.5.1">User Settings</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.5.2 <a 
href="#x67-5440006.5.2">Logging</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.5.3 <a 
href="#x67-5450006.5.3">Expert Settings</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.5.4 <a 
href="#x67-5460006.5.4">Developer Settings</a></span>
   </div>
<!--l. 3--><p class="indent" >   While the configuration macros in this section may be set by the HTCondor administrator, they are intended
for the user-specific HTCondor configuration file (usually ~/.condor/user_config). Although we
document every macro, we expect that users will generally only want to change a few of them, listed in
section <a 
href="#x67-5430006.5.1">6.5.1<!--tex4ht:ref: sec:clouds-config-users --></a>; the entries required in by <span class="textit">condor_annex</span> in other sections will be generated by its setup
procedure.
<!--l. 11--><p class="indent" >   Subsequent sections deal with logging (section <a 
href="#x67-5440006.5.2">6.5.2<!--tex4ht:ref: sec:clouds-logging --></a>), are for expert users (section <a 
href="#x67-5450006.5.3">6.5.3<!--tex4ht:ref: sec:clouds-config-experts --></a>), or for HTCondor
developers (section <a 
href="#x67-5460006.5.4">6.5.4<!--tex4ht:ref: sec:clouds-config-developers --></a>).
<!--l. 18--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.5.1   </span> <a 
 id="x67-5430006.5.1"></a>User Settings</h4>
     <dl class="description"><dt class="description">
<span class="texttt">ANNEX_DEFAULT_AWS_REGION</span> <a 
 id="dx67-543001"></a><a 
 id="dx67-543002"></a> </dt><dd 
class="description">The default region when using AWS. Defaults to &#8216;us-east-1&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_LEASE_DURATION</span> <a 
 id="dx67-543003"></a><a 
 id="dx67-543004"></a> </dt><dd 
class="description">The duration of an annex if not specified on the command-line; specified
     in seconds. Defaults to 50 minutes.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_UNCLAIMED_TIMEOUT</span> <a 
 id="dx67-543005"></a><a 
 id="dx67-543006"></a> </dt><dd 
class="description">How long an annex instances should stay idle before shutting down;
     specified in seconds. Defaults to 15 minutes.
                                                                                         

                                                                                         
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ODI_KEY_NAME</span> <a 
 id="dx67-543007"></a><a 
 id="dx67-543008"></a> </dt><dd 
class="description">The name of the SSH key pair <span class="textit">condor_annex</span> should use by default. No
     default.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ODI_INSTANCE_TYPE</span> <a 
 id="dx67-543009"></a><a 
 id="dx67-543010"></a> </dt><dd 
class="description">The  AWS  instance  type  to  use  for  on-demand  instances  if  not
     specified. No default, but the <span class="textit">condor_annex</span> setup procedure sets this to &#8216;m4.large&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ODI_IMAGE_ID</span> <a 
 id="dx67-543011"></a><a 
 id="dx67-543012"></a> </dt><dd 
class="description">The AWS AMI to use for on-demand instance if not specified. No default,
     but the <span class="textit">condor_annex</span> setup procedure sets this to &#8216;ami-35b13223&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_SFR_CONFIG_FILE</span> <a 
 id="dx67-543013"></a><a 
 id="dx67-543014"></a> </dt><dd 
class="description">The JSON configuration file use by <span class="textit">condor_annex</span> when creating a
     Spot-based annex. No default.
     </dd></dl>
<!--l. 60--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.5.2   </span> <a 
 id="x67-5440006.5.2"></a>Logging</h4>
<!--l. 62--><p class="noindent" >By default, running <span class="textit">condor_annex</span> creates three logs: the <span class="textit">condor_annex</span> log, the annex GAHP log, and the annex
audit log. The default location for these logs is the same directory as the user-specific HTCondor configuration file
(usually ~/.condor/user_config). <span class="textit">condor_annex</span> sets the <span class="texttt">LOG</span> <a 
 id="dx67-544001"></a><a 
 id="dx67-544002"></a> macro to this directory when reading its
configuration.
<!--l. 68--><p class="indent" >   The <span class="textit">condor_annex</span> log is a daemon-style log. It is configured as if <span class="textit">condor_annex</span> were a daemon with subsystem
type <span class="texttt">ANNEX</span>; see section <a 
href="ConfigurationMacros.html#x33-1890003.5.2">3.5.2<!--tex4ht:ref: sec:Daemon-Logging-Config-File-Entries --></a> for details.
<!--l. 72--><p class="indent" >   <span class="textit">condor_annex</span> uses special helper programs, called GAHPs, to interact with the different cloud
services. These programs do their own logging, writing to the annex GAHP log. The annex GAHP
log is configured as if it were a daemon, but with subsystem type <span class="texttt">ANNEX_GAHP</span>; see section <a 
href="ConfigurationMacros.html#x33-1890003.5.2">3.5.2<!--tex4ht:ref: sec:Daemon-Logging-Config-File-Entries --></a> for
details.
<!--l. 78--><p class="indent" >   The annex audit log records two lines for each invocation of <span class="textit">condor_annex</span>: the command as issued
and the results as returned. The location of the audit log is set by <span class="texttt">ANNEX_AUDIT_LOG</span> <a 
 id="dx67-544003"></a><a 
 id="dx67-544004"></a>, which is the
<span class="texttt">AUDIT</span>-level log for the <span class="texttt">ANNEX</span> subsystem; see <span class="texttt">&#x003C;SUBSYS&#x003E;_&#x003C;LEVEL&#x003E;_LOG</span> (<a 
href="ConfigurationMacros.html#x33-1890003.5.2">3.5.2<!--tex4ht:ref: param:SubsysLevelLog --></a>) for details. Because annex
creation commands typically make extensive use of values set in configuration, <span class="textit">condor_annex</span> will write
the configuration it used for annex creation commands into the audit log if <span class="texttt">ANNEX_DEBUG</span> includes
<span class="texttt">D_AUDIT:2</span>.
<!--l. 88--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.5.3   </span> <a 
 id="x67-5450006.5.3"></a>Expert Settings</h4>
                                                                                         

                                                                                         
     <dl class="description"><dt class="description">
<span class="texttt">ANNEX_DEFAULT_EC2_URL</span> <a 
 id="dx67-545001"></a><a 
 id="dx67-545002"></a> </dt><dd 
class="description">The   AWS   EC2   endpoint   that   <span class="textit">condor_annex</span>   should   use.   Defaults   to
     &#8216;https://ec2.us-east-1.amazonaws.com&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_CWE_URL</span> <a 
 id="dx67-545003"></a><a 
 id="dx67-545004"></a> </dt><dd 
class="description">The AWS CloudWatch Events endpoint that <span class="textit">condor_annex</span> should use. Defaults
     to &#8216;https://events.us-east-1.amazonaws.com&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_LAMBDA_URL</span> <a 
 id="dx67-545005"></a><a 
 id="dx67-545006"></a> </dt><dd 
class="description">The  AWS  Lambda  endpoint  that  <span class="textit">condor_annex</span>  should  use.  Defaults  to
     &#8216;https://lambda.us-east-1.amazonaws.com&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_S3_URL</span> <a 
 id="dx67-545007"></a><a 
 id="dx67-545008"></a> </dt><dd 
class="description">The   AWS   S3   endpoint   that   <span class="textit">condor_annex</span>   should   use.   Defaults   to
     &#8216;https://s3.amazonaws.com&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_CF_URL</span> <a 
 id="dx67-545009"></a><a 
 id="dx67-545010"></a> </dt><dd 
class="description">The AWS CloudFormation endpoint that <span class="textit">condor_annex</span> should use. Defaults to
     &#8216;https://cloudformation.us-east-1.amazonaws.com&#8217;.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ACCESS_KEY_FILE</span> <a 
 id="dx67-545011"></a><a 
 id="dx67-545012"></a> </dt><dd 
class="description">The full path to the AWS access key file <span class="textit">condor_annex</span> should use. No
     default. If &#8220;FROM INSTANCE&#8221;, <span class="textit">condor_annex</span> will assume it&#8217;s running on an EC2 instance and try
     to use that instance&#8217;s credentials.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_SECRET_KEY_FILE</span> <a 
 id="dx67-545013"></a><a 
 id="dx67-545014"></a> </dt><dd 
class="description">The full path to the AWS secret key file <span class="textit">condor_annex</span> should use. No
     default. If &#8220;FROM INSTANCE&#8221;, <span class="textit">condor_annex</span> will assume it&#8217;s running on an EC2 instance and try
     to use that instance&#8217;s credentials.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_S3_BUCKET</span> <a 
 id="dx67-545015"></a><a 
 id="dx67-545016"></a> </dt><dd 
class="description">A   private   S3   bucket   that   the   <span class="texttt">ANNEX_DEFAULT_ACCESS_KEY_FILE</span>  and
     <span class="texttt">ANNEX_DEFAULT_SECRET_KEY_FILE</span> may write to. No default.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ODI_SECURITY_GROUP_IDS</span> <a 
 id="dx67-545017"></a><a 
 id="dx67-545018"></a> </dt><dd 
class="description">The  default  security  group  for  on-demand  annexes.  Must
     permit inbound HTCondor (port 9618).
     </dd></dl>
<!--l. 141--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.5.4   </span> <a 
 id="x67-5460006.5.4"></a>Developer Settings</h4>
                                                                                         

                                                                                         
     <dl class="description"><dt class="description">
<span class="texttt">ANNEX_DEFAULT_CONNECTIVITY_FUNCTION_ARN</span> <a 
 id="dx67-546001"></a><a 
 id="dx67-546002"></a> </dt><dd 
class="description">The name (or ARN) of the Lambda function on AWS which
     <span class="textit">condor_annex</span> should use to check if the configured collector can be contacted from AWS.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ODI_INSTANCE_PROFILE_ARN</span> <a 
 id="dx67-546003"></a><a 
 id="dx67-546004"></a> </dt><dd 
class="description">The ARN of the instance profile <span class="textit">condor_annex</span> should use.
     No default.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_ODI_LEASE_FUNCTION_ARN</span> <a 
 id="dx67-546005"></a><a 
 id="dx67-546006"></a> </dt><dd 
class="description">The Lambda function which implements the lease (duration)
     for on-demand instances. No default.
     </dd><dt class="description">
<span class="texttt">ANNEX_DEFAULT_SFR_LEASE_FUNCTION_ARN</span> <a 
 id="dx67-546007"></a><a 
 id="dx67-546008"></a> </dt><dd 
class="description">The Lambda function which implements the lease (duration)
     for Spot instances. No default.
     </dd></dl>
                                                                                         

                                                                                         
<!--l. 139--><p class="indent" >   <span style="font-size: 200%;"><a 
href="HTCondorAnnexCustomizationGuide.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="HTCondorAnnexCustomizationGuide.html#tailHTCondorAnnexCustomizationGuide.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="HTCondorAnnexConfiguration.html" >&#x2191;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="CloudComputing.html#HTCondorAnnexConfiguration.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ApplicationProgrammingInterfacesAPIs.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><a 
 id="tailHTCondorAnnexConfiguration.html"></a>  
</body></html> 
