<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Configuration Templates</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- 3,sec-filename,next,info,NoFonts,fonts,html --> 
<meta name="src" content="ref.tex"> 
<link rel="stylesheet" type="text/css" href="ref.css"> 
</head><body 
>
   <span style="font-size: 200%;"><a 
href="IntroductiontoConfiguration.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="IntroductiontoConfiguration.html#tailIntroductiontoConfiguration.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="#tailConfigurationTemplates.html">&#x2193;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="AdministratorsManual.html#ConfigurationTemplates.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ConfigurationMacros.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><h3 class="sectionHead"><span class="titlemark">3.4   </span> <a 
 id="x32-1820003.4"></a>Configuration Templates</h3>
   <div class="sectionTOCS">
   &#x00A0;&#x00A0;<span class="subsectionToc" >3.4.1 <a 
href="#x32-1830003.4.1">Configuration Templates: Using Predefined Sets of Configuration</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.4.2 <a 
href="#x32-1840003.4.2">Available Configuration Templates</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.4.3 <a 
href="#x32-1850003.4.3">Configuration Template Transition Syntax</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.4.4 <a 
href="#x32-1860003.4.4">Configuration Template Examples</a></span>
   </div>
<a 
 id="dx32-182001"></a>
<a 
 id="dx32-182002"></a>
<!--l. 8--><p class="indent" >   Achieving certain behaviors in an HTCondor pool often requires setting the values of a number of
configuration macros in concert with each other. We have added configuration templates as a way to
do this more easily, at a higher level, without having to explicitly set each individual configuration
macro.
<!--l. 14--><p class="indent" >   Configuration templates are pre-defined; users cannot define their own templates.
<!--l. 17--><p class="indent" >   Note that the value of an individual configuration macro that is set by a configuration template can be
overridden by setting that configuration macro later in the configuration.
<!--l. 21--><p class="indent" >   Detailed information about configuration templates (such as the macros they set) can be obtained using the
<span class="textit">condor_config_val</span> <span class="texttt">use</span> option (see&#x00A0;<a 
href="Condorconfigval.html#x105-73100012">12<!--tex4ht:ref: man-condor-config-val --></a>). (This document does not contain such information because the
<span class="textit">condor_config_val</span> command is a better way to obtain it.)
<!--l. 29--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4.1   </span> <a 
 id="x32-1830003.4.1"></a>Configuration Templates: Using Predefined Sets of Configuration</h4>
<a 
 id="dx32-183001"></a>
<a 
 id="dx32-183002"></a>
<!--l. 33--><p class="noindent" >Predefined sets of configuration can be identified and incorporated into the configuration using the
syntax
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-377">
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;use</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;&#x003C;category</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;name&#x003E;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;:</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;&#x003C;template</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;name&#x003E;</tspan>
</div>
<!--l. 37--><p class="nopar" >
<!--l. 39--><p class="indent" >   The <span class="texttt">use</span> key word is case insensitive. There are <span class="emph">no</span> requirements for white space characters surrounding the colon
character. More than one <span class="texttt">&#x003C;template name&#x003E;</span> identifier may be placed within a single <span class="texttt">use</span> line. Separate the names by
a space character. There is no mechanism by which the administrator may define their own custom <span class="texttt">&#x003C;category
name&#x003E;</span> or <span class="texttt">&#x003C;template name&#x003E;</span>.
<!--l. 48--><p class="indent" >   Each predefined <span class="texttt">&#x003C;category name&#x003E;</span> has a fixed, case insensitive name for the sets of configuration that
are predefined. Placement of a <span class="texttt">use</span> line in the configuration brings in the predefined configuration it
identifies.
<!--l. 53--><p class="indent" >   As of version 8.5.6, some of the configuration templates take arguments (as described below).
<!--l. 58--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4.2   </span> <a 
 id="x32-1840003.4.2"></a>Available Configuration Templates</h4>
<!--l. 60--><p class="noindent" >There are four <span class="texttt">&#x003C;category name&#x003E;</span> values. Within a category, a predefined, case insensitive name identifies the set of
configuration it incorporates.
     <dl class="description"><dt class="description">
<span class="texttt">ROLE category</span> </dt><dd 
class="description">Describes configuration for the various roles that a machine might play within an HTCondor pool.
     The configuration will identify which daemons are running on a machine.
         <ul class="itemize1">
         <li class="itemize"><span class="texttt">Personal</span>
         <!--l. 73--><p class="noindent" >Settings needed for when a single machine is the entire pool.
         </li>
         <li class="itemize"><span class="texttt">Submit</span>
         <!--l. 77--><p class="noindent" >Settings needed to allow this machine to submit jobs to the pool. May be combined with <span class="texttt">Execute</span>
         and <span class="texttt">CentralManager</span> roles.
         </li>
         <li class="itemize"><span class="texttt">Execute</span>
         <!--l. 82--><p class="noindent" >Settings  needed  to  allow  this  machine  to  execute  jobs.  May  be  combined  with  <span class="texttt">Submit</span> and
         <span class="texttt">CentralManager</span> roles.
         </li>
         <li class="itemize"><span class="texttt">CentralManager</span>
                                                                                         

                                                                                         
         <!--l. 87--><p class="noindent" >Settings needed to allow this machine to act as the central manager for the pool. May be combined
         with <span class="texttt">Submit</span> and <span class="texttt">Execute</span> roles.</li></ul>
     </dd><dt class="description">
<span class="texttt">FEATURE category</span> </dt><dd 
class="description">Describes configuration for implemented features.
         <ul class="itemize1">
         <li class="itemize"><span class="texttt">Remote_Runtime_Config</span>
         <!--l. 98--><p class="noindent" >Enables the use of <span class="textit">condor_config_val</span> <span class="textbf">-rset</span> to the machine with this configuration. Note that
         there are security implications for use of this configuration, as it potentially permits the arbitrary
         modification of configuration. Variable <span class="texttt">SETTABLE_ATTRS_CONFIG</span> <a 
 id="dx32-184001"></a><a 
 id="dx32-184002"></a> must also be defined.
         </li>
         <li class="itemize"><span class="texttt">Remote_Config</span>
         <!--l. 106--><p class="noindent" >Enables the use of <span class="textit">condor_config_val</span> <span class="textbf">-set</span> to the machine with this configuration. Note that
         there are security implications for use of this configuration, as it potentially permits the arbitrary
         modification of configuration. Variable <span class="texttt">SETTABLE_ATTRS_CONFIG</span> <a 
 id="dx32-184003"></a><a 
 id="dx32-184004"></a> must also be defined.
         </li>
         <li class="itemize"><span class="texttt">VMware</span>
         <!--l. 114--><p class="noindent" >Enables use of the vm universe with VMware virtual machines. Note that this feature depends
         on Perl.
         </li>
         <li class="itemize"><span class="texttt">GPUs</span>
         <!--l. 119--><p class="noindent" >Sets configuration based on detection with the <span class="textit">condor_gpu_discovery</span> tool, and defines a custom
         resource using the name <span class="texttt">GPUs</span>. Supports both OpenCL and CUDA, if detected. Automatically
         includes the <span class="texttt">GPUsMonitor</span> feature.
         </li>
         <li class="itemize"><span class="texttt">GPUsMonitor</span>
         <!--l. 126--><p class="noindent" >Also adds configuration to report the usage of NVidia GPUs.
         </li>
         <li class="itemize"><span class="texttt">Monitor( resource_name, mode, period, executable, metric[, metric]+ )</span>
         <!--l. 130--><p class="noindent" >Configures a custom machine resource monitor with the given name, mode, period, executable,
         and metrics. See <a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for the definitions of these terms.
         </li>
         <li class="itemize"><span class="texttt">PartitionableSlot( slot_type_num [, allocation] )</span>
         <!--l. 136--><p class="noindent" >Sets  up  a  partitionable  slot  of  the  specified  slot  type  number  and  allocation  (defaults  for
         slot_type_num  and  allocation  are  1  and  100%  respectively).  See&#x00A0;<a 
href="PolicyConfigurationforExecuteHostsandforSubmitHosts.html#x35-2540003.7.1">3.7.1<!--tex4ht:ref: sec:SMP-Divide --></a>  for  information  on
         partitionalble slot policies.
         </li>
         <li class="itemize"><span class="texttt">AssignAccountingGroup( map_filename )</span> Sets up a <span class="textit">condor_schedd</span> job transform that assigns
         an accounting group to each job as it is submitted. The accounting is determined by mapping the
         Owner attribute of the job using the given map file.
         </li>
         <li class="itemize"><span class="texttt">ScheddUserMapFile( map_name, map_filename )</span> Defines  a  <span class="textit">condor_schedd</span>  usermap  named
         map_name using the given map file.
                                                                                         

                                                                                         
         </li>
         <li class="itemize"><span class="texttt">SetJobAttrFromUserMap( dst_attr, src_attr, map_name [, map_filename] )</span> Sets  up  a
         <span class="textit">condor_schedd</span> job transform that sets the dst_attr attribute of each job as it is submitted. The
         value of dst_attr is determined by mapping the src_attr of the job using the usermap named
         map_name. If the optional map_filename argument is specifed, then this metaknob also defines
         a <span class="textit">condor_schedd</span> usermap named map_Name using the given map file.
         </li>
         <li class="itemize"><span class="texttt">StartdCronOneShot( job_name, exe [, hook_args] )</span>
         <!--l. 158--><p class="noindent" >Create a one-shot <span class="textit">condor_startd</span> job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         </li>
         <li class="itemize"><span class="texttt">StartdCronPeriodic( job_name, period, exe [, hook_args] )</span>
         <!--l. 163--><p class="noindent" >Create a periodic-shot <span class="textit">condor_startd</span> job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         </li>
         <li class="itemize"><span class="texttt">StartdCronContinuous( job_name, exe [, hook_args] )</span>
         <!--l. 168--><p class="noindent" >Create a (nearly) continuous <span class="textit">condor_startd</span> job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job
         hooks.)
         </li>
         <li class="itemize"><span class="texttt">ScheddCronOneShot( job_name, exe [, hook_args] )</span>
         <!--l. 173--><p class="noindent" >Create a one-shot <span class="textit">condor_schedd</span> job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         </li>
         <li class="itemize"><span class="texttt">ScheddCronPeriodic( job_name, period, exe [, hook_args] )</span>
         <!--l. 178--><p class="noindent" >Create a periodic-shot <span class="textit">condor_schedd</span> job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         </li>
         <li class="itemize"><span class="texttt">ScheddCronContinuous( job_name, exe [, hook_args] )</span>
         <!--l. 183--><p class="noindent" >Create a (nearly) continuous <span class="textit">condor_schedd</span> job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job
         hooks.)
         </li>
         <li class="itemize"><span class="texttt">OneShotCronHook( STARTD_CRON | SCHEDD_CRON, job_name, hook_exe [,hook_args] )</span>
         <!--l. 189--><p class="noindent" >Create a one-shot job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         </li>
         <li class="itemize"><span class="texttt">PeriodicCronHook( STARTD_CRON | SCHEDD_CRON , job_name, period, hook_exe
         [,hook_args] )</span>
         <!--l. 195--><p class="noindent" >Create a periodic job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         </li>
         <li class="itemize"><span class="texttt">ContinuousCronHook( STARTD_CRON | SCHEDD_CRON , job_name, hook_exe [,hook_args]
         )</span>
         <!--l. 201--><p class="noindent" >Create a (nearly) continuous job hook. (See&#x00A0;<a 
href="Hooks.html#x51-4450004.4.3">4.4.3<!--tex4ht:ref: sec:daemon-classad-hooks --></a> for more information about job hooks.)
         <!--l. 207--><p class="noindent" >&#x00A0;
         </li>
         <li class="itemize"><span class="texttt">UWCS_Desktop_Policy_Values</span>
         <!--l. 210--><p class="noindent" >Configuration   values   used   in   the   <span class="texttt">UWCS_DESKTOP</span>  policy.   (Note   that   these   values   were
         previously  in  the  parameter  table;  configuration  that  uses  these  values  will  have  to  use
         the  <span class="texttt">UWCS_Desktop_Policy_Values</span> template.  For  example,  <span class="texttt">POLICY : UWCS_Desktop</span> uses  the
         <span class="texttt">FEATURE : UWCS_Desktop_Policy_Values</span> template.)</li></ul>
                                                                                         

                                                                                         
     </dd><dt class="description">
<span class="texttt">POLICY category</span> </dt><dd 
class="description">Describes configuration for the circumstances under which machines choose to run
     jobs.
         <ul class="itemize1">
         <li class="itemize"><span class="texttt">Always_Run_Jobs</span>
         <!--l. 226--><p class="noindent" >Always  start  jobs  and  run  them  to  completion,  without  consideration  of  <span class="textit">condor_negotiator</span>
         generated preemption or suspension. This is the default policy, and it is intended to be used with
         dedicated resources. If this policy is used together with the <span class="texttt">Limit_Job_Runtimes</span> policy, order
         the specification by placing this <span class="texttt">Always_Run_Jobs</span> policy first.
         </li>
         <li class="itemize"><span class="texttt">UWCS_Desktop</span>
         <!--l. 237--><p class="noindent" >This  was  the  default  policy  before  HTCondor  version  8.1.6.  It  is  intended  to  be  used  with
         desktop machines not exclusively running HTCondor jobs. It injects <span class="texttt">UWCS</span> into the name of some
         configuration variables.
         </li>
         <li class="itemize"><span class="texttt">Desktop</span>
         <!--l. 244--><p class="noindent" >An updated and reimplementation of the <span class="texttt">UWCS_Desktop</span> policy, but <span class="emph">without</span> the <span class="texttt">UWCS</span> naming of
         some configuration variables.
         </li>
         <li class="itemize"><span class="texttt">Limit_Job_Runtimes( limit_in_seconds )</span>
         <!--l. 249--><p class="noindent" >Limits running jobs to a maximum of the specified time using preemption. (The default limit is 24
         hours.) This policy does not work while the machine is draining; use the following policy instead.
         <!--l. 253--><p class="noindent" >If this policy is used together with the <span class="texttt">Always_Run_Jobs</span> policy, order the specification by placing
         this <span class="texttt">Limit_Job_Runtimes</span> policy second.
         </li>
         <li class="itemize"><span class="texttt">Preempt_if_Runtime_Exceeds( limit_in_seconds )</span>
         <!--l. 259--><p class="noindent" >Limits running jobs to a maximum of the specified time using preemption. (The default limit is
         24 hours).
         </li>
         <li class="itemize"><span class="texttt">Hold_if_Runtime_Exceeds( limit_in_seconds )</span>
         <!--l. 265--><p class="noindent" >Limits running jobs to a maximum of the specified time by placing them on hold immediately
         (ignoring any job retirement time). (The default limit is 24 hours).
         </li>
         <li class="itemize"><span class="texttt">Preempt_If_Cpus_Exceeded</span>
         <!--l. 271--><p class="noindent" >If the startd observes the number of CPU cores used by the job exceed the number of cores in
         the slot by more than 0.8 on average over the past minute, preempt the job immediately ignoring
         any job retirement time.
         </li>
         <li class="itemize"><span class="texttt">Hold_If_Cpus_Exceeded</span>
         <!--l. 278--><p class="noindent" >If the startd observes the number of CPU cores used by the job exceed the number of cores in the
         slot by more than 0.8 on average over the past minute, immediately place the job on hold ignoring
         any job retirement time. The job will go on hold with a reasonable hold reason in job attribute
                                                                                         

                                                                                         
         <span class="texttt">HoldReason</span> and a value of 101 in job attribute <span class="texttt">HoldReasonCode</span>. The hold reason and code
         can be customized by specifying <span class="texttt">HOLD_REASON_CPU_EXCEEDED</span> and <span class="texttt">HOLD_SUBCODE_CPU_EXCEEDED</span>
         respectively.
         <!--l. 287--><p class="noindent" >Standard universe jobs can&#8217;t be held by startd policy expressions, so this metaknob automatically
         ignores them.
         </li>
         <li class="itemize"><span class="texttt">Preempt_If_Memory_Exceeded</span>
         <!--l. 292--><p class="noindent" >If the startd observes the memory usage of the job exceed the memory provisioned in the slot,
         preempt the job immediately ignoring any job retirement time.
         </li>
         <li class="itemize"><span class="texttt">Hold_If_Memory_Exceeded</span>
         <!--l. 298--><p class="noindent" >If  the  startd  observes  the  memory  usage  of  the  job  exceed  the  memory  provisioned  in  the
         slot,  immediately  place  the  job  on  hold  ignoring  any  job  retirement  time.  The  job  will  go
         on  hold  with  a  reasonable  hold  reason  in  job  attribute  <span class="texttt">HoldReason</span> and  a  value  of  102  in
         job  attribute  <span class="texttt">HoldReasonCode</span>.  The  hold  reason  and  code  can  be  customized  by  specifying
         <span class="texttt">HOLD_REASON_MEMORY_EXCEEDED</span> and <span class="texttt">HOLD_SUBCODE_MEMORY_EXCEEDED</span> respectively.
         <!--l. 308--><p class="noindent" >Standard universe jobs can&#8217;t be held by startd policy expressions, so this metaknob automatically
         ignores them.
         </li>
         <li class="itemize"><span class="texttt">Preempt_If( policy_variable )</span>
         <!--l. 313--><p class="noindent" >Preempt  jobs  according  to  the  specified  policy.  <span class="texttt">policy_variable</span> must  be  the  name  of  a
         configuration  macro  containing  an  expression  that  evaluates  to  <span class="texttt">True</span> if  the  job  should  be
         preempted.
         <!--l. 318--><p class="noindent" >See an example here: &#x00A0;<a 
href="#x32-1860003.4.4">3.4.4<!--tex4ht:ref: sec:Config-Template-Examples --></a>.
         </li>
         <li class="itemize"><span class="texttt">Want_Hold_If( policy_variable, subcode, reason_text )</span>
         <!--l. 322--><p class="noindent" >Add  the  given  policy  to  the  <span class="texttt">WANT_HOLD</span> expression;  if  the  <span class="texttt">WANT_HOLD</span> expression  is  defined,
         <span class="texttt">policy_variable</span> is prepended to the existing expression; otherwise <span class="texttt">WANT_HOLD</span> is simply set to
         the value of the textttpolicy_variable macro.
         <!--l. 328--><p class="noindent" >Standard universe jobs can&#8217;t be held by startd policy expressions, so this metaknob automatically
         ignores them.
         <!--l. 331--><p class="noindent" >See an example here: &#x00A0;<a 
href="#x32-1860003.4.4">3.4.4<!--tex4ht:ref: sec:Config-Template-Examples --></a>.
         </li>
         <li class="itemize"><span class="texttt">Startd_Publish_CpusUsage</span>
         <!--l. 335--><p class="noindent" >Publish the number of CPU cores being used by the job into to slot ad as attribute <span class="texttt">CpusUsage</span>.
         This value will be the average number of cores used by the job over the past minute, sampling
         every 5 seconds.</li></ul>
     </dd><dt class="description">
<span class="texttt">SECURITY category</span> </dt><dd 
class="description">Describes configuration for an implemented security model.
         <ul class="itemize1">
         <li class="itemize"><span class="texttt">Host_Based</span>
                                                                                         

                                                                                         
         <!--l. 347--><p class="noindent" >The default security model (based on IPs and DNS names). Do <span class="emph">not</span> combine with <span class="texttt">User_Based</span>
         security.
         </li>
         <li class="itemize"><span class="texttt">User_Based</span>
         <!--l. 352--><p class="noindent" >Grants permissions to an administrator and uses <span class="texttt">With_Authentication</span>. Do <span class="emph">not</span> combine with
         <span class="texttt">Host_Based</span> security.
         </li>
         <li class="itemize"><span class="texttt">With_Authentication</span>
         <!--l. 358--><p class="noindent" >Requires both authentication and integrity checks.
         </li>
         <li class="itemize"><span class="texttt">Strong</span>
         <!--l. 362--><p class="noindent" >Requires authentication, encryption, and integrity checks.</li></ul>
     </dd></dl>
<!--l. 369--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4.3   </span> <a 
 id="x32-1850003.4.3"></a>Configuration Template Transition Syntax</h4>
<!--l. 372--><p class="noindent" >For pools that are transitioning to using this new syntax in configuration, while still having some tools and daemons
with HTCondor versions earlier than 8.1.6, special syntax in the configuration will cause those daemons to fail upon
start up, rather than use the new, but misinterpreted, syntax. Newer daemons will ignore the extra syntax. Placing
the <span class="obeylines-h"><span class="verb">@</span></span> character before the <span class="texttt">use</span> key word causes the older daemons to fail when they attempt to parse this
syntax.
<!--l. 383--><p class="indent" >   As an example, consider the <span class="textit">condor_startd</span> as it starts up. A <span class="textit">condor_startd</span> previous to HTCondor version 8.1.6
fails to start when it sees:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-378">
<tspan font-family="ectt" font-size="1000">@use</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;feature</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;:</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;GPUs</tspan>
</div>
<!--l. 388--><p class="nopar" > Running an older <span class="textit">condor_config_val</span> also identifies the <span class="texttt">@use</span> line as being bad. A <span class="textit">condor_startd</span> of HTCondor
version 8.1.6 or more recent sees
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-379">
<tspan font-family="ectt" font-size="1000">use</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;feature</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;:</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;GPUs</tspan>
</div>
<!--l. 394--><p class="nopar" >
<!--l. 398--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4.4   </span> <a 
 id="x32-1860003.4.4"></a>Configuration Template Examples</h4>
     <ul class="itemize1">
     <li class="itemize">Preempt a job if its memory usage exceeds the requested memory:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-380">
     <tspan font-family="ectt" font-size="1000">MEMORY_EXCEEDED</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(isDefined(MemoryUsage)</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;MemoryUsage</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;&#x003E;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;RequestMemory)</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">use</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;POLICY</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;:</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;PREEMPT_IF(MEMORY_EXCEEDED)</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan>
</div>
     <!--l. 406--><p class="nopar" >
     </li>
     <li class="itemize">Put a job on hold if its memory usage exceeds the requested memory:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-381">
     <tspan font-family="ectt" font-size="1000">MEMORY_EXCEEDED</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(isDefined(MemoryUsage)</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;MemoryUsage</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;&#x003E;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;RequestMemory)</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">use</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;POLICY</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;:</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;WANT_HOLD_IF(MEMORY_EXCEEDED,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;102,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;memory</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;usage</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;exceeded</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;request_memory)</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan>
</div>
     <!--l. 412--><p class="nopar" >
     </li>
     <li class="itemize">Update dynamic GPU information every 15 minutes:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-382">
     <tspan font-family="ectt" font-size="1000">use</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;FEATURE</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;:</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;StartdCronPeriodic(DYNGPU,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;15*60,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;$(LOCAL_DIR)\dynamic_gpu_info.pl,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;$(LIBEXEC)\condor_gpu_discovery</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-dynamic)</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan>
</div>
     <!--l. 418--><p class="nopar" >
     <!--l. 420--><p class="noindent" >where <span class="texttt">dynamic_gpu_info.pl</span> is a simple perl script that strips off the DetectedGPUs line from
     textttcondor_gpu_discovery:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-383">
     <tspan font-family="ectt" font-size="1000">#!/usr/bin/env</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;perl</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">my</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;@attrs</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="tctt" font-size="1000">`</tspan><tspan font-family="ectt" font-size="1000">@ARGV</tspan><tspan font-family="tctt" font-size="1000">`</tspan><tspan font-family="ectt" font-size="1000">;</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">for</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(@attrs)</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;{</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">next</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;if</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;($_</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=~</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/^Detected/i);</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">print</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;$_;</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">}</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan>
</div>
     <!--l. 430--><p class="nopar" ></li></ul>
                                                                                         

                                                                                         
<!--l. 2--><p class="indent" >   <span style="font-size: 200%;"><a 
href="IntroductiontoConfiguration.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="IntroductiontoConfiguration.html#tailIntroductiontoConfiguration.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ConfigurationTemplates.html" >&#x2191;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="AdministratorsManual.html#ConfigurationTemplates.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ConfigurationMacros.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><a 
 id="tailConfigurationTemplates.html"></a>  
</body></html> 
