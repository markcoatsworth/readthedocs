<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The HTCondor Job Router</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- 3,sec-filename,next,info,NoFonts,fonts,html --> 
<meta name="src" content="ref.tex"> 
<link rel="stylesheet" type="text/css" href="ref.css"> 
</head><body 
>
   <span style="font-size: 200%;"><a 
href="TheGridUniverse.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="TheGridUniverse.html#tailTheGridUniverse.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="#tailTheHTCondorJobRouter.html">&#x2193;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="GridComputing.html#TheHTCondorJobRouter.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="CloudComputing.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><h3 class="sectionHead"><span class="titlemark">5.4   </span> <a 
 id="x57-4910005.4"></a>The HTCondor Job Router</h3>
   <div class="sectionTOCS">
   &#x00A0;&#x00A0;<span class="subsectionToc" >5.4.1 <a 
href="#x57-4920005.4.1">Routing Mechanism</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.4.2 <a 
href="#x57-4930005.4.2">Job Submission with Job Routing Capability</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.4.3 <a 
href="#x57-4940005.4.3"> An Example Configuration</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.4.4 <a 
href="#x57-4950005.4.4"> Routing Table Entry ClassAd Attributes</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.4.5 <a 
href="#x57-4960005.4.5">Example: constructing the routing table from ReSS</a></span>
   </div>
<a 
 id="dx57-491001"></a>
<a 
 id="dx57-491002"></a>
<a 
 id="dx57-491003"></a>
<a 
 id="dx57-491004"></a>
<!--l. 9--><p class="indent" >   The HTCondor Job Router is an add-on to the <span class="textit">condor_schedd</span> that transforms jobs from one type
into another according to a configurable policy. This process of transforming the jobs is called <span class="emph">job
routing</span>.
<!--l. 13--><p class="indent" >   One example of how the Job Router can be used is for the task of sending excess jobs to one or more remote grid
sites. The Job Router can transform the jobs such as vanilla universe jobs into grid universe jobs that use
any of the grid types supported by HTCondor. The rate at which jobs are routed can be matched
roughly to the rate at which the site is able to start running them. This makes it possible to balance a
large work flow across multiple grid sites, a local HTCondor pool, and any flocked HTCondor pools,
without having to guess in advance how quickly jobs will run and complete in each of the different
sites.
<!--l. 23--><p class="indent" >   Job Routing is most appropriate for high throughput work flows, where there are many more jobs than
computers, and the goal is to keep as many of the computers busy as possible. Job Routing is less suitable
when there are a small number of jobs, and the scheduler needs to choose the best place for each
job, in order to finish them as quickly as possible. The Job Router does not know which site will run
the jobs faster, but it can decide whether to send more jobs to a site, based on whether jobs already
submitted to that site are sitting idle or not, as well as whether the site has experienced recent job
failures.
                                                                                         

                                                                                         
<!--l. 36--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.4.1   </span> <a 
 id="x57-4920005.4.1"></a>Routing Mechanism</h4>
<!--l. 39--><p class="noindent" >The <span class="textit">condor_job_router</span> daemon and configuration determine a policy for which jobs may be transformed and sent
to grid sites. By default, a job is transformed into a grid universe job by making a copy of the original job ClassAd,
and modifying some attributes in this copy of the job. The copy is called the routed copy, and it shows up in the job
queue under a new job id.
<!--l. 48--><p class="indent" >   Until the routed copy finishes or is removed, the original copy of the job passively mirrors the state of the routed
job. During this time, the original job is not available for matchmaking, because it is tied to the routed copy. The
original job also does not evaluate periodic expressions, such as <span class="texttt">PeriodicHold</span>. Periodic expressions are evaluated
for the routed copy. When the routed copy completes, the original job ClassAd is updated such that it reflects the
final status of the job. If the routed copy is removed, the original job returns to the normal idle state, and is
available for matchmaking or rerouting. If, instead, the original job is removed or goes on hold, the routed copy is
removed.
<!--l. 65--><p class="indent" >   Although the default mode routes vanilla universe jobs to grid universe jobs, the routing rules may be configured
to do some other transformation of the job. It is also possible to edit the job in place rather than creating a new
transformed version of the job.
<!--l. 71--><p class="indent" >   The <span class="textit">condor_job_router</span> daemon utilizes a <span class="emph">routing table</span>, in which a ClassAd describes each site to where jobs
may be sent. The routing table is given in the New ClassAd language, as currently used by HTCondor
internally.
<!--l. 76--><p class="indent" >   A good place to learn about the syntax of New ClassAds is the Informal Language Description in the C++
ClassAds tutorial: <a 
href="http://htcondor.org/classad/c++tut.html" >http://htcondor.org/classad/c++tut.html</a>. Two essential differences distinguish the New ClassAd
language from the current one. In the New ClassAd language, each ClassAd is surrounded by square
brackets. And, in the New ClassAd language, each assignment statement ends with a semicolon. When
the New ClassAd is embedded in an HTCondor configuration file, it may appear all on a single line,
but the readability is often improved by inserting line continuation characters after each assignment
statement. This is done in the examples. Unfortunately, this makes the insertion of comments into the
configuration file awkward, because of the interaction between comments and line continuation characters in
configuration files. An alternative is to use C-style comments (<span class="texttt">/* &#x2026;*/</span>). Another alternative is to read in the
routing table entries from a separate file, rather than embedding them in the HTCondor configuration
file.
<!--l. 102--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.4.2   </span> <a 
 id="x57-4930005.4.2"></a>Job Submission with Job Routing Capability</h4>
<!--l. 105--><p class="noindent" >If Job Routing is set up, then the following items ought to be considered for jobs to have the necessary prerequisites
to be considered for routing.
     <ul class="itemize1">
                                                                                         

                                                                                         
     <li class="itemize">Jobs appropriate for routing to the grid must not rely on access to a shared file system, or other
     services that are only available on the local pool. The job will use HTCondor&#8217;s file transfer mechanism,
     rather than relying on a shared file system to access input files and write output files. In the submit
     description file, to enable file transfer, there will be a set of commands similar to
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-935">
     <tspan font-family="ectt" font-size="1000">should_transfer_files</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;YES</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">when_to_transfer_output</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ON_EXIT</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">transfer_input_files</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;input1,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;input2</tspan>
     <tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">transfer_output_files</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;output1,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;output2</tspan>
</div>
     <!--l. 125--><p class="nopar" >
     <!--l. 127--><p class="noindent" >Vanilla universe jobs and most types of grid universe jobs differ in the set of files transferred back when the
     job completes. Vanilla universe jobs transfer back all files created or modified, while all grid universe
     jobs, except for HTCondor-C, only transfer back the <span class="textbf">output</span><a 
 id="dx57-493001"></a> file, as well as those explicitly
     listed with <span class="textbf">transfer_output_files</span><a 
 id="dx57-493002"></a>. Therefore, when routing jobs to grid universes other than
     HTCondor-C, it is important to explicitly specify all output files that must be transferred upon job
     completion.
     <!--l. 139--><p class="noindent" >An additional difference between the vanilla universe jobs and <span class="textbf">gt2</span> grid universe jobs is that <span class="textbf">gt2</span> jobs do not
     return any information about the job&#8217;s exit status. The exit status as reported in the job ClassAd and job
     event log are always 0. Therefore, jobs that may be routed to a <span class="textbf">gt2</span> grid site must not rely upon a non-zero job
     exit status.
     </li>
     <li class="itemize">One configuration for routed jobs requires the jobs to identify themselves as candidates for Job Routing. This
     may be accomplished by inventing a ClassAd attribute that the configuration utilizes in setting the policy for
     job identification, and the job defines this attribute to identify itself. If the invented attribute is called
     <span class="texttt">WantJobRouter</span>, then the job identifies itself as a job that may be routed by placing in the submit description
     file:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-936">
     <tspan font-family="ectt" font-size="1000">+WantJobRouter</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;True</tspan>
</div>
     <!--l. 160--><p class="nopar" >
     <!--l. 162--><p class="noindent" >This implementation can be taken further, allowing the job to first be rejected within the local pool, before
     being a candidate for Job Routing:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-937">
     <tspan font-family="ectt" font-size="1000">+WantJobRouter</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;LastRejMatchTime</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=!=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;UNDEFINED</tspan>
</div>
     <!--l. 168--><p class="nopar" >
     </li>
     <li class="itemize">As appropriate to the potential grid site, create a grid proxy, and specify it in the submit description
     file:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-938">
     <tspan font-family="ectt" font-size="1000">x509userproxy</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/tmp/x509up_u275</tspan>
</div>
     <!--l. 175--><p class="nopar" >
     <!--l. 177--><p class="noindent" >This is not necessary if the <span class="textit">condor_job_router</span> daemon is configured to add a grid proxy on behalf of
     jobs.
     </li></ul>
<!--l. 182--><p class="indent" >   Job submission does not change for jobs that may be routed.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-939">
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;$</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;condor_submit</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;job1.sub</tspan>
</div>
<!--l. 186--><p class="nopar" >
<!--l. 188--><p class="indent" >   where <span class="texttt">job1.sub</span> might contain:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-940">
<tspan font-family="ectt" font-size="1000">universe</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;vanilla</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">executable</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;my_executable</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">output</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;job1.stdout</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">error</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;job1.stderr</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">log</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;job1.ulog</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">should_transfer_files</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;YES</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">when_to_transfer_output</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ON_EXIT</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">+WantJobRouter</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;LastRejMatchTime</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=!=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;UNDEFINED</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">x509userproxy</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/tmp/x509up_u275</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">queue</tspan>
</div>
<!--l. 201--><p class="nopar" >
<!--l. 203--><p class="indent" >   The status of the job may be observed as with any other HTCondor job, for example by looking in the job&#8217;s log
file. Before the job completes, <span class="textit">condor_q</span> shows the job&#8217;s status. Should the job become routed, a second job will
enter the job queue. This is the routed copy of the original job. The command <span class="textit">condor_router_q</span> shows a more
specialized view of routed jobs, as this example shows:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-941">
<tspan font-family="ectt" font-size="1000">$</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;condor_router_q</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-S</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;JOBS</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ST</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Route</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;GridResource</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;40</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;I</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Site1</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;site1.edu/jobmanager-condor</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;10</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;I</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Site2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;site2.edu/jobmanager-pbs</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;R</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Site3</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;condor</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;submit.site3.edu</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;condor.site3.edu</tspan>
</div>
<!--l. 219--><p class="nopar" >
<!--l. 221--><p class="indent" >   <span class="textit">condor_router_history</span> summarizes the history of routed jobs, as this example shows:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-942">
<tspan font-family="ectt" font-size="1000">$</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;condor_router_history</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">Routed</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;job</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;history</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;from</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;2007-06-27</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;23:38</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;to</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;2007-06-28</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;23:38</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">Site</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Hours</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Jobs</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Runs</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Completed</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;Aborted</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">-------------------------------------------------------</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">Site1</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;10</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;0</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">Site2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;8</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;1</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">Site3</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;40</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;6</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;0</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">-------------------------------------------------------</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">TOTAL</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;58</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;10</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;1</tspan>
</div>
<!--l. 236--><p class="nopar" >
<!--l. 240--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.4.3   </span> <a 
 id="x57-4940005.4.3"></a> An Example Configuration</h4>
<!--l. 243--><p class="noindent" >The following sample configuration sets up potential job routing to three routes (grid sites). Definitions of the
configuration variables specific to the Job Router are in section&#x00A0; <a 
href="ConfigurationMacros.html#x33-2060003.5.19">3.5.19<!--tex4ht:ref: sec:JobRouter-Config-File-Entries --></a>. One route is an HTCondor site accessed via
the Globus gt2 protocol. A second route is a PBS site, also accessed via Globus gt2. The third site is an HTCondor
site accessed by HTCondor-C. The <span class="textit">condor_job_router</span> daemon does not know which site will be best for a given
job. The policy implemented in this sample configuration stops sending more jobs to a site, if ten jobs that have
already been sent to that site are idle.
<!--l. 256--><p class="indent" >   These configuration settings belong in the local configuration file of the machine where jobs are submitted.
Check that the machine can successfully submit grid jobs before setting up and using the Job Router. Typically, the
single required element that needs to be added for GSI authentication is an X.509 trusted certification authority
directory, in a place recognized by HTCondor (for example, <span class="texttt">/etc/grid-security/certificates</span>). The
VDT (<a 
href="http://vdt.cs.wisc.edu" >http://vdt.cs.wisc.edu</a>) project provides a convenient way to set up and install a trusted CA, if
needed.
<!--l. 269--><p class="indent" >   Note that, as of version 8.5.6, the configuration language supports multi-line values, as shown in the example
below (see section &#x00A0;<a 
href="IntroductiontoConfiguration.html#x31-1740003.3.5">3.3.5<!--tex4ht:ref: sec:Multi-Line-Values --></a> for more details).
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-943">
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;These</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;settings</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;become</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;default</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;settings</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;all</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;routes</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">JOB_ROUTER_DEFAULTS</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;@=jrd</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;[</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;requirements=target.WantJobRouter</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;is</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;True;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;MaxIdleJobs</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;10;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;MaxJobs</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;200;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/*</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;now</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;modify</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;routed</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;job</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;attributes</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;*/</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/*</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;remove</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;routed</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;job</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;if</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;it</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;goes</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;on</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;hold</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;or</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;stays</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;idle</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;over</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;6</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;hours</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;*/</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;set_PeriodicRemove</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;JobStatus</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;5</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;||</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(JobStatus</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(time()</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;QDate)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;3600*6);</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;delete_WantJobRouter</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;true;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;set_requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;true;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;]</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;@jrd</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;This</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;could</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;be</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;made</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;an</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;attribute</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;of</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;job,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;rather</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;than</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;being</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;hard-coded</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">ROUTED_JOB_MAX_TIME</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1440</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Now</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;we</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;define</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;each</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;of</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;routes</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;send</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;jobs</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;on</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">JOB_ROUTER_ENTRIES</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;@=jre</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;[</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;GridResource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;site1.edu/jobmanager-condor";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Site</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;]</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;[</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;GridResource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;site2.edu/jobmanager-pbs";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Site</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;2";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;set_GlobusRSL</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"(maxwalltime=$(ROUTED_JOB_MAX_TIME))(jobType=single)";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;]</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;[</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;GridResource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"condor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;submit.site3.edu</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor.site3.edu";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Site</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;3";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;set_remote_jobuniverse</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;5;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;]</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;@jre</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Reminder:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;you</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;must</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;restart</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;HTCondor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;changes</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;DAEMON_LIST</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;take</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;effect.</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">DAEMON_LIST</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$(DAEMON_LIST)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;JOB_ROUTER</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;For</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;testing,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;set</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;this</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;a</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;small</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;value</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;speed</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;things</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;up.</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Once</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;you</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;are</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;running</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;at</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;large</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;scale,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;set</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;it</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;a</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;higher</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;value</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;prevent</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;JobRouter</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;from</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;using</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;too</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;much</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cpu.</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">JOB_ROUTER_POLLING_PERIOD</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;10</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#It</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;is</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;good</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;save</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;lots</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;of</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;schedd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;queue</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;history</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;use</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;with</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;router_history</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;command.</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MAX_HISTORY_ROTATIONS</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;20</tspan>
</div>
<!--l. 322--><p class="nopar" >
                                                                                         

                                                                                         
<!--l. 335--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.4.4   </span> <a 
 id="x57-4950005.4.4"></a> Routing Table Entry ClassAd Attributes</h4>
<!--l. 338--><p class="noindent" >The conversion of a job to a routed copy may require the job ClassAd to be modified. The Routing
Table specifies attributes of the different possible routes and it may specify specific modifications that
should be made to the job when it is sent along a specific route. In addition to this mechanism for
transforming the job, external programs may be invoked to transform the job. For more information, see
section&#x00A0;<a 
href="Hooks.html#x51-4440004.4.2">4.4.2<!--tex4ht:ref: sec:job-hooks-JR --></a>.
<!--l. 347--><p class="indent" >   The following attributes and instructions for modifying job attributes may appear in a Routing Table
entry.
<a 
 id="dx57-495001"></a>
     <dl class="description"><dt class="description">
GridResource </dt><dd 
class="description">Specifies the value for the <span class="texttt">GridResource</span> attribute that will be inserted into the routed
     copy of the job&#8217;s ClassAd.
<a 
 id="dx57-495002"></a>
     </dd><dt class="description">
Name </dt><dd 
class="description">An optional identifier that will be used in log messages concerning this route. If no name is specified,
     the default used will be the value of <span class="texttt">GridResource</span>. The <span class="textit">condor_job_router</span> distinguishes routes and
     advertises statistics based on this attribute&#8217;s value.
<a 
 id="dx57-495003"></a>
     </dd><dt class="description">
Requirements </dt><dd 
class="description">A <span class="texttt">Requirements</span> expression that identifies jobs that may be matched to the route. Note
     that, as with all settings, requirements specified in the configuration variable <span class="texttt">JOB_ROUTER_ENTRIES</span>
     override the setting of <span class="texttt">JOB_ROUTER_DEFAULTS</span>. To specify global requirements that are not overridden
     by <span class="texttt">JOB_ROUTER_ENTRIES</span>, use <span class="texttt">JOB_ROUTER_SOURCE_JOB_CONSTRAINT</span>.
<a 
 id="dx57-495004"></a>
     </dd><dt class="description">
MaxJobs </dt><dd 
class="description">An integer maximum number of jobs permitted on the route at one time. The default is 100.
<a 
 id="dx57-495005"></a>
     </dd><dt class="description">
MaxIdleJobs </dt><dd 
class="description">An integer maximum number of routed jobs in the idle state. At or above this value, no more
     jobs will be sent to this site. This is intended to prevent too many jobs from being sent to sites which
     are too busy to run them. If the value set for this attribute is too small, the rate of job submission to
     the site will slow, because the <span class="textit">condor_job_router</span> daemon will submit jobs up to this limit, wait to
     see some of the jobs enter the running state, and then submit more. The disadvantage of setting this
     attribute&#8217;s value too high is that a lot of jobs may be sent to a site, only to site idle for hours or days.
     The default value is 50.
<a 
 id="dx57-495006"></a>
     </dd><dt class="description">
                                                                                         

                                                                                         
FailureRateThreshold </dt><dd 
class="description">A maximum tolerated rate of job failures. Failure is determined by the expression
     sets for the attribute <span class="texttt">JobFailureTest</span> expression. The default threshold is 0.03 jobs/second. If the
     threshold is exceeded, submission of new jobs is throttled until jobs begin succeeding, such that the
     failure rate is less than the threshold. This attribute implements <span class="emph">black hole throttling</span>, such that a site
     at which jobs are sent only to fail (a black hole) receives fewer jobs.
<a 
 id="dx57-495007"></a>
     </dd><dt class="description">
JobFailureTest </dt><dd 
class="description">An expression evaluated for each job that finishes, to determine whether it was a failure.
     The default value if no expression is defined assumes all jobs are successful. Routed jobs that are
     removed are considered to be failures. An example expression to treat all jobs running for less than
     30 minutes as failures is <span class="texttt">target.RemoteWallClockTime &#x003C; 1800</span>. A more flexible expression might
     reference a property or expression of the job that specifies a failure condition specific to the type of
     job.
<a 
 id="dx57-495008"></a>
     </dd><dt class="description">
TargetUniverse </dt><dd 
class="description">An integer value specifying the desired universe for the routed copy of the job. The default
     value is 9, which is the <span class="textbf">grid</span> universe.
<a 
 id="dx57-495009"></a>
     </dd><dt class="description">
UseSharedX509UserProxy </dt><dd 
class="description">A                                                                                       boolean
     expression that when <span class="texttt">True</span> causes the value of <span class="texttt">SharedX509UserProxy</span> to be the X.509 user proxy for
     the routed job. Note that if the <span class="textit">condor_job_router</span> daemon is running as root, the copy of this file
     that is given to the job will have its ownership set to that of the user running the job. This requires the
     trust of the user. It is therefore recommended to avoid this mechanism when possible. Instead, require
     users to submit jobs with <span class="texttt">X509UserProxy</span> set in the submit description file. If this feature is needed,
     use the boolean expression to only allow specific values of <span class="texttt">target.Owner</span> to use this shared proxy file.
     The shared proxy file should be owned by the condor user. Currently, to use a shared proxy, the job
     must also turn on sandboxing by having the attribute <span class="texttt">JobShouldBeSandboxed</span>.
<a 
 id="dx57-495010"></a>
     </dd><dt class="description">
SharedX509UserProxy </dt><dd 
class="description">A string representing file containing the X.509 user proxy for the routed job.
<a 
 id="dx57-495011"></a>
     </dd><dt class="description">
JobShouldBeSandboxed </dt><dd 
class="description">A boolean expression that when <span class="texttt">True</span> causes the created copy of the job to be
     sandboxed. A copy of the input files will be placed in the <span class="textit">condor_schedd</span> daemon&#8217;s spool area for the
     target job, and when the job runs, the output will be staged back into the spool area. Once all of the
     output has been successfully staged back, it will be copied again, this time from the spool area of the
     sandboxed job back to the original job&#8217;s output locations. By default, sandboxing is turned off. Only
     to turn it on if using a shared X.509 user proxy or if direct staging of remote output files back to the
     final output locations is not desired.
<a 
 id="dx57-495012"></a>
     </dd><dt class="description">
                                                                                         

                                                                                         
OverrideRoutingEntry </dt><dd 
class="description">A boolean value that when <span class="texttt">True</span>, indicates that this entry in the routing table
     replaces any previous entry in the table with the same name. When <span class="texttt">False</span>, it indicates that if there
     is a previous entry by the same name, the previous entry should be retained and this entry should be
     ignored. The default value is <span class="texttt">True</span>.
<a 
 id="dx57-495013"></a>
     </dd><dt class="description">
Set_&#x003C;ATTR&#x003E; </dt><dd 
class="description">Sets the value of <span class="texttt">&#x003C;ATTR&#x003E;</span> in the routed copy&#8217;s job ClassAd to the specified value. An
     example of an attribute that might be set is <span class="texttt">PeriodicRemove</span>. For example, if the routed job goes on
     hold or stays idle for too long, remove it and return the original copy of the job to a normal state.
<a 
 id="dx57-495014"></a>
     </dd><dt class="description">
Eval_Set_&#x003C;ATTR&#x003E; </dt><dd 
class="description">Defines an expression. The expression is evaluated, and the resulting value sets the
     value of the routed copy&#8217;s job ClassAd attribute <span class="texttt">&#x003C;ATTR&#x003E;</span>. Use this attribute to set a custom or local
     value, especially for modifying an attribute which may have been already specified in a default routing
     table.
<a 
 id="dx57-495015"></a>
     </dd><dt class="description">
Copy_&#x003C;ATTR&#x003E; </dt><dd 
class="description">Defined with the name of a routed copy ClassAd attribute. Copies the value of <span class="texttt">&#x003C;ATTR&#x003E;</span>
     from the original job ClassAd into the specified attribute named of the routed copy. Useful to save the
     value of an expression, before replacing it with something else that references the original expression.
<a 
 id="dx57-495016"></a>
     </dd><dt class="description">
Delete_&#x003C;ATTR&#x003E; </dt><dd 
class="description">Deletes <span class="texttt">&#x003C;ATTR&#x003E;</span> from the routed copy ClassAd. A value assigned to this attribute in
     the routing table entry is ignored.
<a 
 id="dx57-495017"></a>
     </dd><dt class="description">
EditJobInPlace </dt><dd 
class="description">A boolean expression that, when <span class="texttt">True</span>, causes the original job to be transformed in place
     rather than creating a new transformed version (a routed copy) of the job. In this mode, the Job Router
     Hook <span class="texttt">&#x003C;Keyword&#x003E;_HOOK_TRANSLATE_JOB</span> <a 
 id="dx57-495018"></a><a 
 id="dx57-495019"></a> and transformation rules in the routing table are applied
     during the job transformation. The routing table attribute <span class="texttt">GridResource</span> is ignored, and there is no
     default transformation of the job from a vanilla job to a grid universe job as there is otherwise. Once
     transformed, the job is still a candidate for matching routing rules, so it is up to the routing logic to
     control whether the job may be transformed multiple times or not. For example, to transform the job
     only once, an attribute could be set in the job ClassAd to prevent it from matching the same routing
     rule in the future. To transform the job multiple times with limited frequency, a timestamp could be
     inserted into the job ClassAd marking the time of the last transformation, and the routing entry could
     require that this timestamp either be undefined or older than some limit.
     </dd></dl>
                                                                                         

                                                                                         
<!--l. 522--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.4.5   </span> <a 
 id="x57-4960005.4.5"></a>Example: constructing the routing table from ReSS</h4>
<!--l. 525--><p class="noindent" >The Open Science Grid has a service called ReSS (Resource Selection Service). It presents grid sites as ClassAds
in an HTCondor collector. This example builds a routing table from the site ClassAds in the ReSS
collector.
<!--l. 530--><p class="indent" >   Using <span class="texttt">JOB_ROUTER_ENTRIES_CMD</span> <a 
 id="dx57-496001"></a><a 
 id="dx57-496002"></a>, we tell the <span class="textit">condor_job_router</span> daemon to call a simple script which queries
the collector and outputs a routing table. The script, called <span class="obeylines-h"><span class="verb">osg_ress_routing_table.sh</span></span>, is just
this:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-944">
<tspan font-family="ectt" font-size="0800">#!/bin/sh</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;you</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;_MUST_</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;change</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;this:</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">export</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor_status=/path/to/condor_status</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;if</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;no</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;command</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;line</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;arguments</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;specify</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-pool,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;use</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;this:</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">export</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;_CONDOR_COLLECTOR_HOST=osg-ress-1.fnal.gov</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">$condor_status</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-format</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">[</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;BeginAd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;\</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-format</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">GridResource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;%s";</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;GlueCEInfoContactString</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;\</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-format</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">]\n</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;EndAd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"$@"</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;|</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;uniq</tspan>
</div>
<!--l. 546--><p class="nopar" >
<!--l. 549--><p class="indent" >   Save this script to a file and make sure the permissions on the file mark it as executable. Test this script by
calling it by hand before trying to use it with the <span class="textit">condor_job_router</span> daemon. You may supply additional
arguments such as <span class="textbf">-constraint</span> to limit the sites which are returned.
<!--l. 554--><p class="indent" >   Once you are satisfied that the routing table constructed by the script is what you want, configure the
<span class="textit">condor_job_router</span> daemon to use it:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-945">
<tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;command</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;build</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;routing</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;table</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">JOB_ROUTER_ENTRIES_CMD</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/path/to/osg_ress_routing_table.sh</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;extra</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;arguments&#x003E;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;how</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;often</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;to</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;rebuild</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;the</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;routing</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;table:</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">JOB_ROUTER_ENTRIES_REFRESH</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;3600</tspan>
</div>
<!--l. 564--><p class="nopar" >
<!--l. 567--><p class="indent" >   Using the example configuration, use the above settings to replace <span class="texttt">JOB_ROUTER_ENTRIES</span> <a 
 id="dx57-496003"></a><a 
 id="dx57-496004"></a>. Or, leave
<span class="texttt">JOB_ROUTER_ENTRIES</span> <a 
 id="dx57-496005"></a><a 
 id="dx57-496006"></a> there and have a routing table containing entries from both sources. When you restart or
reconfigure the <span class="textit">condor_job_router</span> daemon, you should see messages in the Job Router&#8217;s log indicating that it is
adding more routes to the table.
                                                                                         

                                                                                         
<!--l. 134--><p class="indent" >   <span style="font-size: 200%;"><a 
href="TheGridUniverse.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="TheGridUniverse.html#tailTheGridUniverse.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="TheHTCondorJobRouter.html" >&#x2191;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="GridComputing.html#TheHTCondorJobRouter.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="CloudComputing.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><a 
 id="tailTheHTCondorJobRouter.html"></a>  
</body></html> 
