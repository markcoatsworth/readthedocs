<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The Grid Universe</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- 3,sec-filename,next,info,NoFonts,fonts,html --> 
<meta name="src" content="ref.tex"> 
<link rel="stylesheet" type="text/css" href="ref.css"> 
</head><body 
>
   <span style="font-size: 200%;"><a 
href="ConnectingHTCondorPoolswithFlocking.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ConnectingHTCondorPoolswithFlocking.html#tailConnectingHTCondorPoolswithFlocking.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="#tailTheGridUniverse.html">&#x2193;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="GridComputing.html#TheGridUniverse.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="TheHTCondorJobRouter.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><h3 class="sectionHead"><span class="titlemark">5.3   </span> <a 
 id="x56-4540005.3"></a>The Grid Universe</h3>
   <div class="sectionTOCS">
   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.1 <a 
href="#x56-4550005.3.1">HTCondor-C, The condor Grid Type </a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4560005.3.1" id="QQ2-56-479">HTCondor-C Configuration</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4570005.3.1" id="QQ2-56-480">HTCondor-C Job Submission</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4580005.3.1" id="QQ2-56-481"> HTCondor-C Jobs Between Differing Platforms</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.2 <a 
href="#x56-4590005.3.2">HTCondor-G, the gt2, and gt5 Grid Types</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4600005.3.2" id="QQ2-56-483">Globus Protocols and Terminology</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4610005.3.2" id="QQ2-56-484">The gt2 Grid Type</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4620005.3.2" id="QQ2-56-485">The gt5 Grid Type</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4630005.3.2" id="QQ2-56-486">Credential Management with <span class="textit">MyProxy</span></a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4640005.3.2" id="QQ2-56-487">The Grid Monitor</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4650005.3.2" id="QQ2-56-488">Limitations of HTCondor-G</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.3 <a 
href="#x56-4660005.3.3">The nordugrid Grid Type </a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.4 <a 
href="#x56-4670005.3.4">The unicore Grid Type </a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.5 <a 
href="#x56-4680005.3.5">The batch Grid Type (for PBS, LSF, SGE, and SLURM) </a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.6 <a 
href="#x56-4690005.3.6">The EC2 Grid Type </a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4700005.3.6" id="QQ2-56-493">EC2 Job Submission</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4710005.3.6" id="QQ2-56-494">Termination of EC2 Jobs</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4720005.3.6" id="QQ2-56-495">Using Spot Instances</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4730005.3.6" id="QQ2-56-496">Advanced Usage</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4740005.3.6" id="QQ2-56-497">EC2 Configuration Variables</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4750005.3.6" id="QQ2-56-498">Communicating with an EC2 Service</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4760005.3.6" id="QQ2-56-499">Secure Communication with and EC2 Service</a></span>
                                                                                         

                                                                                         
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4770005.3.6" id="QQ2-56-500">EC2 GAHP Statistics</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.7 <a 
href="#x56-4780005.3.7">The GCE Grid Type </a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4790005.3.7" id="QQ2-56-502">GCE Job Submission</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4800005.3.7" id="QQ2-56-503">GCE Configuration Variables</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.8 <a 
href="#x56-4810005.3.8">The Azure Grid Type </a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4820005.3.8" id="QQ2-56-505">Azure Job Submission</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.9 <a 
href="#x56-4830005.3.9">The cream Grid Type </a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.10 <a 
href="#x56-4840005.3.10">The BOINC Grid Type </a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4850005.3.10" id="QQ2-56-508">BOINC Job Submission</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4860005.3.10" id="QQ2-56-509">BOINC Configuration Variables</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >5.3.11 <a 
href="#x56-4870005.3.11">Matchmaking in the Grid Universe</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4880005.3.11" id="QQ2-56-511">Job Submission</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4890005.3.11" id="QQ2-56-512">Advertising Grid Resources to HTCondor</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x56-4900005.3.11" id="QQ2-56-513">Advanced usage</a></span>
   </div>
<a 
 id="dx56-454001"></a>
<!--l. 4--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.1   </span> <a 
 id="x56-4550005.3.1"></a>HTCondor-C, The condor Grid Type </h4>
<a 
 id="dx56-455001"></a>
<!--l. 8--><p class="noindent" >HTCondor-C allows jobs in one machine&#8217;s job queue to be moved to another machine&#8217;s job queue. These machines
may be far removed from each other, providing powerful grid computation mechanisms, while requiring only
HTCondor software and its configuration.
<!--l. 14--><p class="indent" >   HTCondor-C is highly resistant to network disconnections and machine failures on both the submission and
remote sides. An expected usage sets up Personal HTCondor on a laptop, submits some jobs that are sent to an
HTCondor pool, waits until the jobs are staged on the pool, then turns off the laptop. When the laptop reconnects
at a later time, any results can be pulled back.
<!--l. 23--><p class="indent" >   HTCondor-C scales gracefully when compared with HTCondor&#8217;s flocking mechanism. The machine upon which
jobs are submitted maintains a single process and network connection to a remote machine, without regard to the
number of jobs queued or running.
                                                                                         

                                                                                         
<!--l. 31--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4560005.3.1"></a>HTCondor-C Configuration</h5>
<a 
 id="dx56-456001"></a>
<!--l. 34--><p class="noindent" >There are two aspects to configuration to enable the submission and execution of HTCondor-C jobs.
These two aspects correspond to the endpoints of the communication: there is the machine from which
jobs are submitted, and there is the remote machine upon which the jobs are placed in the queue
(executed).
<!--l. 41--><p class="indent" >   Configuration of a machine from which jobs are submitted requires a few extra configuration variables:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-857">
<tspan font-family="ectt" font-size="0800">CONDOR_GAHP</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$(SBIN)/condor_c-gahp</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">C_GAHP_LOG</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/tmp/CGAHPLog.$(USERNAME)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">C_GAHP_WORKER_THREAD_LOG</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/tmp/CGAHPWorkerLog.$(USERNAME)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">C_GAHP_WORKER_THREAD_LOCK</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/tmp/CGAHPWorkerLock.$(USERNAME)</tspan>
</div>
<!--l. 50--><p class="nopar" >
<a 
 id="dx56-456002"></a>
<a 
 id="dx56-456003"></a>
<!--l. 55--><p class="indent" >   The acronym GAHP stands for Grid ASCII Helper Protocol. A GAHP server provides grid-related services for a
variety of underlying middle-ware systems. The configuration variable <span class="texttt">CONDOR_GAHP</span> <a 
 id="dx56-456004"></a><a 
 id="dx56-456005"></a> gives a full path to the GAHP
server utilized by HTCondor-C. The configuration variable <span class="texttt">C_GAHP_LOG</span> <a 
 id="dx56-456006"></a><a 
 id="dx56-456007"></a> defines the location of the log that the
HTCondor GAHP server writes. The log for the HTCondor GAHP is written as the user on whose behalf it is
running; thus the <span class="texttt">C_GAHP_LOG</span> <a 
 id="dx56-456008"></a><a 
 id="dx56-456009"></a> configuration variable must point to a location the end user can write
to.
<!--l. 67--><p class="indent" >   A submit machine must also have a <span class="textit">condor_collector</span> daemon to which the <span class="textit">condor_schedd</span> daemon can submit a
query. The query is for the location (IP address and port) of the intended remote machine&#8217;s <span class="textit">condor_schedd</span> daemon.
This facilitates communication between the two machines. This <span class="textit">condor_collector</span> does not need to be the same
collector that the local <span class="textit">condor_schedd</span> daemon reports to.
<!--l. 75--><p class="indent" >   The machine upon which jobs are executed must also be configured correctly. This machine must be running a
<span class="textit">condor_schedd</span> daemon. Unless specified explicitly in a submit file, <span class="texttt">CONDOR_HOST</span> must point to a <span class="textit">condor_collector</span>
daemon that it can write to, and the machine upon which jobs are submitted can read from. This facilitates
communication between the two machines.
<!--l. 84--><p class="indent" >   An important aspect of configuration is the security configuration relating to authentication. HTCondor-C on
the remote machine relies on an authentication protocol to know the identity of the user under which to run a job.
The following is a working example of the security configuration for authentication. This authentication method,
CLAIMTOBE, trusts the identity claimed by a host or IP address.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-858">
<tspan font-family="ectt" font-size="0800">SEC_DEFAULT_NEGOTIATION</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;OPTIONAL</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">SEC_DEFAULT_AUTHENTICATION_METHODS</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;CLAIMTOBE</tspan>
</div>
<!--l. 98--><p class="nopar" >
<!--l. 101--><p class="indent" >   Other working authentication methods are GSI, SSL, KERBEROS, and FS.
<!--l. 106--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4570005.3.1"></a>HTCondor-C Job Submission</h5>
<a 
 id="dx56-457001"></a>
<a 
 id="dx56-457002"></a>
<!--l. 110--><p class="noindent" >Job submission of HTCondor-C jobs is the same as for any HTCondor job. The <span class="textbf">universe</span> is <span class="textbf">grid</span>.
The submit command <span class="textbf">grid_resource</span><a 
 id="dx56-457003"></a> specifies the remote <span class="textit">condor_schedd</span> daemon to which the job
should be submitted, and its value consists of three fields. The first field is the grid type, which is
<span class="textbf">condor</span>. The second field is the name of the remote <span class="textit">condor_schedd</span> daemon. Its value is the same as the
<span class="textit">condor_schedd</span> ClassAd attribute <span class="texttt">Name</span> on the remote machine. The third field is the name of the remote pool&#8217;s
<span class="textit">condor_collector</span>.
<!--l. 130--><p class="indent" >   The following represents a minimal submit description file for a job.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-859">
<tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;minimal</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;submit</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;description</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;file</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;an</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;HTCondor-C</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;job</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;myjob</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">output</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;myoutput</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">error</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;myerror</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">log</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;mylog</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;joe@remotemachine.example.com</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;remotecentralmanager.example.com</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">+remote_jobuniverse</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;5</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">+remote_requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;True</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">+remote_ShouldTransferFiles</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"YES"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">+remote_WhenToTransferOutput</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"ON_EXIT"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">queue</tspan>
</div>
<!--l. 148--><p class="nopar" >
<!--l. 151--><p class="indent" >   The remote machine needs to understand the attributes of the job. These are specified in the submit description
file using the &#8217;+&#8217; syntax, followed by the string <span class="textbf">remote_</span>. At a minimum, this will be the job&#8217;s <span class="textbf">universe</span> and the
job&#8217;s <span class="textbf">requirements</span>. It is likely that other attributes specific to the job&#8217;s <span class="textbf">universe</span> (on the remote pool) will also
be necessary. Note that attributes set with &#8217;+&#8217; are inserted directly into the job&#8217;s ClassAd. Specify
attributes as they must appear in the job&#8217;s ClassAd, not the submit description file. For example,
the <span class="textbf">universe</span><a 
 id="dx56-457004"></a> is specified using an integer assigned for a job ClassAd <span class="texttt">JobUniverse</span>. Similarly, place
quotation marks around string expressions. As an example, a submit description file would ordinarily
contain
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-860">
<tspan font-family="ectt" font-size="0800">when_to_transfer_output</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ON_EXIT</tspan>
</div>
<!--l. 171--><p class="nopar" > This must appear in the HTCondor-C job submit description file as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-861">
<tspan font-family="ectt" font-size="0800">+remote_WhenToTransferOutput</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"ON_EXIT"</tspan>
</div>
<!--l. 177--><p class="nopar" >
<!--l. 180--><p class="indent" >   For convenience, the specific entries of <span class="textbf">universe</span>, <span class="textbf">remote_grid_resource</span>, <span class="textbf">globus_rsl</span><a 
 id="dx56-457005"></a>, and <span class="textbf">globus_xml</span><a 
 id="dx56-457006"></a>
may be specified as <span class="textbf">remote_</span> commands without the leading &#8217;+&#8217;. Instead of
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-862">
<tspan font-family="ectt" font-size="0800">+remote_universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;5</tspan>
</div>
<!--l. 191--><p class="nopar" >
<!--l. 194--><p class="indent" >   the submit description file command may appear as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-863">
<tspan font-family="ectt" font-size="0800">remote_universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;vanilla</tspan>
</div>
<!--l. 199--><p class="nopar" >
<!--l. 202--><p class="indent" >   Similarly, the command
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-864">
<tspan font-family="ectt" font-size="0800">+remote_gridresource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"condor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;schedd.example.com</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cm.example.com"</tspan>
</div>
<!--l. 206--><p class="nopar" >
<!--l. 209--><p class="indent" >   may be given as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-865">
<tspan font-family="ectt" font-size="0800">remote_grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;schedd.example.com</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cm.example.com</tspan>
</div>
<!--l. 214--><p class="nopar" >
<!--l. 218--><p class="indent" >   For the given example, the job is to be run as a <span class="textbf">vanilla</span> <span class="textbf">universe</span> job at the remote pool. The (remote pool&#8217;s)
<span class="textit">condor_schedd</span> daemon is likely to place its job queue data on a local disk and execute the job on another machine
within the pool of machines. This implies that the file systems for the resulting submit machine (the machine
specified by <span class="textbf">remote_schedd</span>) and the execute machine (the machine that runs the job) will <span class="emph">not</span> be shared. Thus,
the two inserted ClassAd attributes
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-866">
<tspan font-family="ectt" font-size="0800">+remote_ShouldTransferFiles</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"YES"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">+remote_WhenToTransferOutput</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"ON_EXIT"</tspan>
</div>
<!--l. 234--><p class="nopar" > are used to invoke HTCondor&#8217;s file transfer mechanism.
<!--l. 238--><p class="indent" >   For communication between <span class="textit">condor_schedd</span> daemons on the submit and remote machines, the location of the
remote <span class="textit">condor_schedd</span> daemon is needed. This information resides in the <span class="textit">condor_collector</span> of the remote machine&#8217;s
pool. The third field of the <span class="textbf">grid_resource</span><a 
 id="dx56-457007"></a> command in the submit description file says which <span class="textit">condor_collector</span>
should be queried for the remote <span class="textit">condor_schedd</span> daemon&#8217;s location. An example of this submit command
is
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-867">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;schedd.example.com</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;machine1.example.com</tspan>
</div>
<!--l. 250--><p class="nopar" > If the remote <span class="textit">condor_collector</span> is not listening on the standard port (9618), then the port it <span class="emph">is</span> listening on needs to
be specified:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-868">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;schedd.example.comd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;machine1.example.com:12345</tspan>
</div>
<!--l. 257--><p class="nopar" >
<!--l. 260--><p class="indent" >   File transfer of a job&#8217;s executable, <span class="texttt">stdin</span>, <span class="texttt">stdout</span>, and <span class="texttt">stderr</span> are automatic. When other files need to be
transferred using HTCondor&#8217;s file transfer mechanism (see section&#x00A0;<a 
href="SubmittingaJob.html#x17-380002.5.9">2.5.9<!--tex4ht:ref: sec:file-transfer --></a> on page&#x00A0;<a 
href="SubmittingaJob.html#x17-380002.5.9">91<!--tex4ht:ref: sec:file-transfer --></a>), the mechanism is applied
based on the resulting job universe on the remote machine.
<!--l. 271--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4580005.3.1"></a> HTCondor-C Jobs Between Differing Platforms</h5>
<!--l. 274--><p class="noindent" >HTCondor-C jobs given to a remote machine running Windows must specify the Windows domain of the remote
machine. This is accomplished by defining a ClassAd attribute for the job. Where the Windows domain is different
at the submit machine from the remote machine, the submit description file defines the Windows domain of the
remote machine with
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-869">
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;+remote_NTDomain</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"DomainAtRemoteMachine"</tspan>
</div>
<!--l. 282--><p class="nopar" >
<!--l. 284--><p class="indent" >   A Windows machine not part of a domain defines the Windows domain as the machine name.
<a 
 id="dx56-458001"></a>
<a 
 id="dx56-458002"></a>
<!--l. 4--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.2   </span> <a 
 id="x56-4590005.3.2"></a>HTCondor-G, the gt2, and gt5 Grid Types</h4>
<!--l. 7--><p class="noindent" >HTCondor-G is the name given to HTCondor when <span class="textbf">grid</span> <span class="textbf">universe</span> jobs are sent to grid resources utilizing Globus
software for job execution. The Globus Toolkit provides a framework for building grid systems and applications. See
the Globus Alliance web page at <a 
href="http://www.globus.org" >http://www.globus.org</a> for descriptions and details of the Globus
software.
<!--l. 16--><p class="indent" >   HTCondor provides the same job management capabilities for HTCondor-G jobs as for other jobs. From
HTCondor, a user may effectively submit jobs, manage jobs, and have jobs execute on widely distributed
machines.
<!--l. 21--><p class="indent" >   It may appear that HTCondor-G is a simple replacement for the Globus Toolkit&#8217;s <span class="textit">globusrun</span> command.
However, HTCondor-G does much more. It allows the submission of many jobs at once, along with the
monitoring of those jobs with a convenient interface. There is notification when jobs complete or fail and
maintenance of Globus credentials that may expire while a job is running. On top of this, HTCondor-G is a
fault-tolerant system; if a machine crashes, all of these functions are again available as the machine
returns.
<!--l. 2--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4600005.3.2"></a>Globus Protocols and Terminology</h5>
<!--l. 4--><p class="noindent" >The Globus software provides a well-defined set of protocols that allow authentication, data transfer, and remote job
execution. Authentication is a mechanism by which an identity is verified. Given proper authentication,
authorization to use a resource is required. Authorization is a policy that determines who is allowed to do
what.
<!--l. 11--><p class="indent" >   HTCondor (and Globus) utilize the following protocols and terminology. The protocols allow HTCondor to
interact with grid machines toward the end result of executing jobs.
                                                                                         

                                                                                         
     <dl class="description"><dt class="description">
GSI </dt><dd 
class="description"><a 
 id="dx56-460001"></a> The Globus Toolkit&#8217;s Grid Security Infrastructure (GSI) provides essential <a 
 id="dx56-460002"></a>building blocks for other
     grid protocols and HTCondor-G. This authentication and authorization system makes it possible to
     authenticate a user just once, using public key infrastructure (PKI) mechanisms to verify a user-supplied
     grid credential. GSI then handles the mapping of the grid credential to the diverse local credentials
     and authentication/authorization mechanisms that apply at each site.
     </dd><dt class="description">
GRAM </dt><dd 
class="description">The Grid Resource Allocation and Management (GRAM) protocol supports remote <a 
 id="dx56-460003"></a><a 
 id="dx56-460004"></a> submission of
     a computational request (for example, to run a program) to a remote computational resource, and it
     supports subsequent monitoring and control of the computation. GRAM is the Globus protocol that
     HTCondor-G uses to talk to remote Globus jobmanagers.
     </dd><dt class="description">
GASS </dt><dd 
class="description">The Globus Toolkit&#8217;s Global Access to Secondary Storage (GASS) service provides <a 
 id="dx56-460005"></a><a 
 id="dx56-460006"></a> mechanisms for
     transferring data to and from a remote HTTP, FTP, or GASS server. GASS is used by HTCondor for
     the <span class="textbf">gt2</span> grid type to transfer a job&#8217;s files to and from the machine where the job is submitted and the
     remote resource.
     </dd><dt class="description">
GridFTP </dt><dd 
class="description">GridFTP is an extension of FTP that provides strong security and high-performance options for
     large data transfers.
     </dd><dt class="description">
RSL </dt><dd 
class="description">RSL (Resource Specification Language) is the language GRAM accepts to specify job information.
     </dd><dt class="description">
gatekeeper </dt><dd 
class="description">A gatekeeper is a software daemon executing on a remote machine on the grid. It is relevant
     only to the <span class="textbf">gt2</span> grid type, and this daemon handles the initial communication between HTCondor and
     a remote resource.
     </dd><dt class="description">
jobmanager </dt><dd 
class="description">A jobmanager is the Globus service that is initiated at a remote resource to submit, keep
     track of, and manage grid I/O for jobs running on an underlying batch system. There is a specific
     jobmanager for each type of batch system supported by Globus (examples are HTCondor, LSF, and
     PBS).
     </dd></dl>
<!--l. 67--><p class="indent" >   In its interaction with Globus software, HTCondor contains a GASS server, used to transfer the executable,
<span class="texttt">stdin</span>, <span class="texttt">stdout</span>, and <span class="texttt">stderr</span> to and from the remote job execution site. HTCondor uses the GRAM protocol to
contact the remote gatekeeper and request that a new jobmanager be started. The GRAM protocol is also used to
when monitoring the job&#8217;s progress. HTCondor detects and intelligently handles cases such as if the remote resource
crashes.
<!--l. 77--><p class="indent" >   There are now two different versions of the GRAM protocol in common usage: <span class="textbf">gt2</span> and <span class="textbf">gt5</span>. HTCondor supports
both of them.
     <dl class="description"><dt class="description">
                                                                                         

                                                                                         
gt2 </dt><dd 
class="description">This initial GRAM protocol is used in Globus Toolkit versions 1 and 2. It is still used by many production
     systems. Where available in the other, more recent versions of the protocol, <span class="textbf">gt2</span> is referred to as the
     pre-web services GRAM (or pre-WS GRAM) or GRAM2.
     </dd><dt class="description">
gt5 </dt><dd 
class="description">This latest GRAM protocol is an extension of GRAM2 that is intended to be more scalable and robust.
     It is usually referred to as GRAM5.</dd></dl>
<!--l. 94--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4610005.3.2"></a>The gt2 Grid Type</h5>
<a 
 id="dx56-461001"></a>
<a 
 id="dx56-461002"></a>
<!--l. 99--><p class="noindent" >HTCondor-G supports submitting jobs to remote resources running the Globus Toolkit&#8217;s GRAM2 (or pre-WS
GRAM) service. This flavor of GRAM is the most common. These HTCondor-G jobs are submitted the same as any
other HTCondor job. The <span class="textbf">universe</span> is <span class="textbf">grid</span>, and the pre-web services GRAM protocol is specified by setting the
type of grid as <span class="textbf">gt2</span> in the <span class="textbf">grid_resource</span><a 
 id="dx56-461003"></a> command.
<a 
 id="dx56-461004"></a>
<a 
 id="dx56-461005"></a>
<a 
 id="dx56-461006"></a>
<!--l. 111--><p class="indent" >   Under HTCondor, successful job submission to the <span class="textbf">grid</span> <span class="textbf">universe</span> with <span class="textbf">gt2</span> requires credentials. <a 
 id="dx56-461007"></a>An
X.509 certificate is used to create a proxy, and an account, authorization, or allocation to use a grid
resource is required. For general information on proxies and certificates, please consult the Globus page
at
<!--l. 121--><p class="indent" >   <a 
href="http://www-unix.globus.org/toolkit/docs/4.0/security/key-index.html" >http://www-unix.globus.org/toolkit/docs/4.0/security/key-index.html</a>
<!--l. 123--><p class="indent" >   Before submitting a job to HTCondor under the <span class="textbf">grid</span> universe, use <span class="textit">grid-proxy-init</span> to create a
proxy.
<!--l. 126--><p class="indent" >   Here is a simple submit description file. <a 
 id="dx56-461008"></a>The example specifies a <span class="textbf">gt2</span> job to be run on an NCSA
machine.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-870">
<tspan font-family="ectt" font-size="1000">executable</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;test</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">universe</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;grid</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;modi4.ncsa.uiuc.edu/jobmanager</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">output</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;test.out</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">log</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;test.log</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">queue</tspan>
</div>
<!--l. 138--><p class="nopar" >
<!--l. 140--><p class="indent" >   The <span class="textbf">executable</span><a 
 id="dx56-461009"></a> for this example is transferred from the local machine to the remote machine. By default,
HTCondor transfers the executable, as well as any files specified by an <span class="textbf">input</span><a 
 id="dx56-461010"></a> command. Note that the executable
must be compiled for its intended platform.
<a 
 id="dx56-461011"></a>
<!--l. 149--><p class="indent" >   The command <span class="textbf">grid_resource</span><a 
 id="dx56-461012"></a> is a required command for grid universe jobs. The second field
specifies the scheduling software to be used on the remote resource. There is a specific jobmanager
for each type of batch system supported by Globus. The full syntax for this command line appears
as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-871">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;machinename[:port]/jobmanagername[:X.509</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;distinguished</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;name]</tspan>
</div>
<!--l. 159--><p class="nopar" > The portions of this syntax specification enclosed within square brackets ([&#x00A0;and ]) are optional. On a machine where
the jobmanager is listening on a nonstandard port, include the port number. The <span class="obeylines-h"><span class="verb">jobmanagername</span></span> is a site-specific
string. The most common one is <span class="obeylines-h"><span class="verb">jobmanager-fork</span></span>, but others are
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-872">
<tspan font-family="ectt" font-size="1000">jobmanager</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">jobmanager-condor</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">jobmanager-pbs</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">jobmanager-lsf</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">jobmanager-sge</tspan>
</div>
<!--l. 173--><p class="nopar" > The Globus software running on the remote resource uses this string to identify and select the correct
service to perform. Other <span class="obeylines-h"><span class="verb">jobmanagername</span></span> strings are used, where additional services are defined and
implemented.
<!--l. 181--><p class="indent" >   The job log file is maintained on the submit machine.
<!--l. 183--><p class="indent" >   Example output from <span class="textit">condor_q</span> for this submission looks like:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-873">
<tspan font-family="ectt" font-size="0800">%</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor_q</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">--</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Submitter:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;wireless48.cs.wisc.edu</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;128.105.48.148:33012&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;wireless48.cs.wi</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;ID</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;OWNER</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;SUBMITTED</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;RUN_TIME</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ST</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;PRI</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;SIZE</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;CMD</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;7.0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;smith</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;3/26</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;14:08</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0+00:00:00</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;I</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;test</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">1</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;jobs;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;idle,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;running,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;held</tspan>
</div>
<!--l. 196--><p class="nopar" >
<!--l. 199--><p class="indent" >   After a short time, the Globus resource accepts the job. Again running <span class="textit">condor_q</span> will now result
in
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-874">
<tspan font-family="ectt" font-size="0800">%</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor_q</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">--</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Submitter:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;wireless48.cs.wisc.edu</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;128.105.48.148:33012&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;wireless48.cs.wi</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;ID</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;OWNER</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;SUBMITTED</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;RUN_TIME</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ST</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;PRI</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;SIZE</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;CMD</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;7.0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;smith</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;3/26</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;14:08</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0+00:01:15</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;R</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;test</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">1</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;jobs;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;idle,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;running,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;held</tspan>
</div>
<!--l. 213--><p class="nopar" >
<!--l. 216--><p class="indent" >   Then, very shortly after that, the queue will be empty again, because the job has finished:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-875">
<tspan font-family="ectt" font-size="0800">%</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor_q</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">--</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Submitter:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;wireless48.cs.wisc.edu</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;128.105.48.148:33012&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;wireless48.cs.wi</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;ID</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;OWNER</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;SUBMITTED</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;RUN_TIME</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ST</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;PRI</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;SIZE</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;CMD</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;jobs;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;idle,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;running,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;held</tspan>
</div>
<!--l. 229--><p class="nopar" >
<!--l. 233--><p class="indent" >   A second example of a submit description file runs the Unix <span class="textit">ls</span> program on a different Globus resource.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-876">
<tspan font-family="ectt" font-size="0800">executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/bin/ls</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">transfer_executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;false</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;vulture.cs.wisc.edu/jobmanager</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">output</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ls-test.out</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">log</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ls-test.log</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">queue</tspan>
</div>
<!--l. 245--><p class="nopar" >
<!--l. 248--><p class="indent" >   In this example, the executable (the binary) has been pre-staged. The executable is on the remote machine, and
it is not to be transferred before execution. Note that the required <span class="textbf">grid_resource</span> and <span class="textbf">universe</span> commands are
present. The command
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-877">
<tspan font-family="ectt" font-size="1000">transfer_executable</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;false</tspan>
</div>
<!--l. 257--><p class="nopar" > within the submit description file identifies the executable as being pre-staged. In this case, the <span class="textbf">executable</span>
command gives the path to the executable on the remote machine.
<!--l. 264--><p class="indent" >   A third example submits a Perl script to be run as a submitted HTCondor job. The Perl script both lists and
sets environment variables for a job. Save the following Perl script with the name <span class="texttt">env-test.pl</span>, to be used as an
HTCondor job executable.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-878">
<tspan font-family="ectt" font-size="1000">#!/usr/bin/env</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;perl</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">foreach</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;$key</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(sort</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;keys(%ENV))</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">{</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;print</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"$key</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;$ENV{$key}\n"</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">}</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">exit</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;0;</tspan>
</div>
<!--l. 280--><p class="nopar" >
<!--l. 282--><p class="indent" >   Run the Unix command
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-879">
<tspan font-family="ectt" font-size="1000">chmod</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;755</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;env-test.pl</tspan>
</div>
<!--l. 285--><p class="nopar" > to make the Perl script executable.
<!--l. 288--><p class="indent" >   Now create the following submit description file. Replace <span class="texttt">example.cs.wisc.edu/jobmanager</span> with a resource
you are authorized to use.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-880">
<tspan font-family="ectt" font-size="0800">executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;env-test.pl</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;example.cs.wisc.edu/jobmanager</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">environment</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;foo=bar;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;zot=qux</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">output</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;env-test.out</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">log</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;env-test.log</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">queue</tspan>
</div>
<!--l. 301--><p class="nopar" >
<!--l. 304--><p class="indent" >   When the job has completed, the output file, <span class="texttt">env-test.out</span>, should contain something like this:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-881">
<tspan font-family="ectt" font-size="0800">GLOBUS_GRAM_JOB_CONTACT</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;https://example.cs.wisc.edu:36213/30905/1020633947/</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">GLOBUS_GRAM_MYJOB_CONTACT</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;URLx-nexus://example.cs.wisc.edu:36214</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">GLOBUS_LOCATION</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/usr/local/globus</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">GLOBUS_REMOTE_IO_URL</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/home/smith/.globus/.gass_cache/globus_gass_cache_1020633948</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">HOME</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/home/smith</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">LANG</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;en_US</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">LOGNAME</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;smith</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">X509_USER_PROXY</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/home/smith/.globus/.gass_cache/globus_gass_cache_1020633951</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">foo</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;bar</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">zot</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;qux</tspan>
</div>
<!--l. 319--><p class="nopar" >
<!--l. 323--><p class="indent" >   Of particular interest is the <span class="texttt">GLOBUS_REMOTE_IO_URL</span> environment variable. HTCondor-G automatically starts up
a GASS remote I/O server on the submit machine. Because of the potential for either side of the connection to fail,
the URL for the server cannot be passed directly to the job. Instead, it is placed into a file, and the
<span class="texttt">GLOBUS_REMOTE_IO_URL</span> environment variable points to this file. Remote jobs can read this file and use the URL it
contains to access the remote GASS server running inside HTCondor-G. If the location of the GASS server changes
(for example, if HTCondor-G restarts), HTCondor-G will contact the Globus gatekeeper and update this file on the
machine where the job is running. It is therefore important that all accesses to the remote GASS server check this
file for the latest location.
<!--l. 340--><p class="indent" >   The following example is a Perl script that uses the GASS server in HTCondor-G to copy input files to the
execute machine. In this example, the remote job counts the number of lines in a file.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-882">
<tspan font-family="ectt" font-size="0800">#!/usr/bin/env</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;perl</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">use</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;FileHandle;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">use</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Cwd;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">STDOUT-&#x003E;autoflush();</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">$gassUrl</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="tctt" font-size="0800">`</tspan><tspan font-family="ectt" font-size="0800">cat</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$ENV{GLOBUS_REMOTE_IO_URL}</tspan><tspan font-family="tctt" font-size="0800">`</tspan><tspan font-family="ectt" font-size="0800">;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">chomp</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$gassUrl;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">$ENV{LD_LIBRARY_PATH}</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$ENV{GLOBUS_LOCATION}.</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"/lib";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">$urlCopy</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$ENV{GLOBUS_LOCATION}."/bin/globus-url-copy";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;globus-url-copy</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;needs</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;a</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;full</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;path</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;name</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">$pwd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;getcwd();</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">print</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"$urlCopy</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$gassUrl/etc/hosts</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;file://$pwd/temporary.hosts\n\n";</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="tctt" font-size="0800">`</tspan><tspan font-family="ectt" font-size="0800">$urlCopy</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$gassUrl/etc/hosts</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;file://$pwd/temporary.hosts</tspan><tspan font-family="tctt" font-size="0800">`</tspan><tspan font-family="ectt" font-size="0800">;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">open(file,</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"temporary.hosts");</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">while(&#x003C;file&#x003E;)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;{</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">print</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$_;</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">}</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br />
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">exit</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0;</tspan>
</div>
<!--l. 369--><p class="nopar" >
<!--l. 372--><p class="indent" >   The submit description file used to submit the Perl script as an HTCondor job appears as:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-883">
<tspan font-family="ectt" font-size="0800">executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gass-example.pl</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;example.cs.wisc.edu/jobmanager</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">output</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gass.out</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">log</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gass.log</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">queue</tspan>
</div>
<!--l. 383--><p class="nopar" >
<!--l. 386--><p class="indent" >   There are two optional submit description file commands of note: <span class="textbf">x509userproxy</span><a 
 id="dx56-461013"></a> and <span class="textbf">globus_rsl</span><a 
 id="dx56-461014"></a>. The
<span class="textbf">x509userproxy</span> command specifies the path to an X.509 proxy. The command is of the form:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-884">
<tspan font-family="ectt" font-size="1000">x509userproxy</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/proxy</tspan>
</div>
<!--l. 395--><p class="nopar" > If this optional command is not present in the submit description file, then HTCondor-G checks the value of the
environment variable <span class="texttt">X509_USER_PROXY</span> for the location of the proxy. If this environment variable is not present,
then HTCondor-G looks for the proxy in the file <span class="texttt">/tmp/x509up_uXXXX</span>, where the characters <span class="obeylines-h"><span class="verb">XXXX</span></span> in this file name
are replaced with the Unix user id.
<!--l. 405--><p class="indent" >   The <span class="textbf">globus_rsl</span> command is used to add additional attribute settings to a job&#8217;s RSL string. The format of the
<span class="textbf">globus_rsl</span> command is
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-885">
<tspan font-family="ectt" font-size="1000">globus_rsl</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(name=value)(name=value)</tspan>
</div>
<!--l. 410--><p class="nopar" > Here is an example of this command from a submit description file:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-886">
<tspan font-family="ectt" font-size="1000">globus_rsl</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(project=Test_Project)</tspan>
</div>
<!--l. 414--><p class="nopar" > This example&#8217;s attribute name for the additional RSL is <span class="texttt">project</span>, and the value assigned is <span class="texttt">Test_Project</span>.
<!--l. 420--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4620005.3.2"></a>The gt5 Grid Type</h5>
<a 
 id="dx56-462001"></a>
<a 
 id="dx56-462002"></a>
<!--l. 426--><p class="noindent" >The Globus GRAM5 protocol works the same as the gt2 grid type. Its implementation differs from gt2 in the
following 3 items:
     <ul class="itemize1">
     <li class="itemize">The Grid Monitor is disabled.
     </li>
     <li class="itemize">Globus job managers are not stopped and restarted.
     </li>
     <li class="itemize">The configuration variable <span class="texttt">GRIDMANAGER_MAX_JOBMANAGERS_PER_RESOURCE</span> <a 
 id="dx56-462003"></a><a 
 id="dx56-462004"></a> is not applied (for gt5
     jobs).</li></ul>
<!--l. 438--><p class="indent" >   Normally, HTCondor will automatically detect whether a service is GRAM2 or GRAM5 and interact with it
accordingly. It does not matter whether gt2 or gt5 is specified. Disable this detection by setting the configuration
variable <span class="texttt">GRAM_VERSION_DETECTION</span> <a 
 id="dx56-462005"></a><a 
 id="dx56-462006"></a> to <span class="texttt">False</span>. If disabled, each resource must be accurately identified as either gt2
or gt5 in the <span class="textbf">grid_resource</span> submit command.
<!--l. 447--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4630005.3.2"></a>Credential Management with <span class="textit">MyProxy</span></h5>
<a 
 id="dx56-463001"></a>
<!--l. 450--><p class="noindent" >HTCondor-G can use <span class="textit">MyProxy</span> software to automatically renew GSI proxies for <span class="textbf">grid</span> <span class="textbf">universe</span> jobs with grid type
<span class="textbf">gt2</span>. <span class="textit">MyProxy</span> is a software component developed at NCSA and used widely throughout the grid community. For
more information see: <a 
href="http://grid.ncsa.illinois.edu/myproxy/" >http://grid.ncsa.illinois.edu/myproxy/</a>
<!--l. 460--><p class="indent" >   Difficulties with proxy expiration occur in two cases. The first case are long running jobs, which do not complete
                                                                                         

                                                                                         
before the proxy expires. The second case occurs when great numbers of jobs are submitted. Some of the jobs may
not yet be started or not yet completed before the proxy expires. One proposed solution to these difficulties is to
generate longer-lived proxies. This, however, presents a greater security problem. Remember that a GSI proxy is
sent to the remote Globus resource. If a proxy falls into the hands of a malicious user at the remote site, the
malicious user can impersonate the proxy owner for the duration of the proxy&#8217;s lifetime. The longer the proxy&#8217;s
lifetime, the more time a malicious user has to misuse the owner&#8217;s credentials. To minimize the window of
opportunity of a malicious user, it is recommended that proxies have a short lifetime (on the order of several
hours).
<!--l. 481--><p class="indent" >   The <span class="textit">MyProxy</span> software generates proxies using credentials (a user certificate or a long-lived proxy) located on a
secure <span class="textit">MyProxy</span> server. HTCondor-G talks to the MyProxy server, renewing a proxy as it is about to expire.
Another advantage that this presents is it relieves the user from having to store a GSI user certificate and private
key on the machine where jobs are submitted. This may be particularly important if a shared HTCondor-G submit
machine is used by several users.
<!--l. 492--><p class="indent" >   In the a typical case, the following steps occur:
<!--l. 494--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x56-463003x1">The user creates a long-lived credential on a secure <span class="textit">MyProxy</span> server, using the <span class="textit">myproxy-init</span> command.
     Each organization generally has their own <span class="textit">MyProxy</span> server.
     </li>
     <li 
  class="enumerate" id="x56-463005x2">The  user  creates  a  short-lived  proxy  on  a  local  submit  machine,  using  <span class="textit">grid-proxy-init</span>  or
     <span class="textit">myproxy-get-delegation</span>.
     </li>
     <li 
  class="enumerate" id="x56-463007x3">The user submits an HTCondor-G job, specifying:
         <dl class="description"><dt class="description">
      </dt><dd 
class="description"><span class="textit">MyProxy</span> server name (host:port)
         </dd><dt class="description">
      </dt><dd 
class="description"><span class="textit">MyProxy</span> credential name (optional)
         </dd><dt class="description">
      </dt><dd 
class="description"><span class="textit">MyProxy</span> password</dd></dl>
     </li>
     <li 
  class="enumerate" id="x56-463009x4">At the short-lived proxy expiration HTCondor-G talks to the <span class="textit">MyProxy</span> server to refresh the
     proxy.
     </li></ol>
<!--l. 521--><p class="indent" >   HTCondor-G keeps track of the password to the <span class="textit">MyProxy</span> server for credential renewal. Although
HTCondor-G tries to keep the password encrypted and secure, it is still possible (although highly
unlikely) for the password to be intercepted from the HTCondor-G machine (more precisely, from the
machine that the <span class="textit">condor_schedd</span> daemon that manages the grid universe jobs runs on, which may
be distinct from the machine from where jobs are submitted). The following safeguard practices are
recommended.
                                                                                         

                                                                                         
<!--l. 531--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x56-463011x1">Provide time limits for credentials on the <span class="textit">MyProxy</span> server. The default is one week, but you may want
     to make it shorter.
     </li>
     <li 
  class="enumerate" id="x56-463013x2">Create several different <span class="textit">MyProxy</span> credentials, maybe as many as one for each submitted job. Each
     credential has a unique name, which is identified with the <span class="texttt">MyProxyCredentialName</span> command in the
     submit description file.
     </li>
     <li 
  class="enumerate" id="x56-463015x3">Use the following options when initializing the credential on the <span class="textit">MyProxy</span> server:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-887">
     <tspan font-family="ectt" font-size="0800">myproxy-init</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-s</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;host&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-x</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-r</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;cert</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;subject&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-k</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;cred</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;name&#x003E;</tspan>
</div>
     <!--l. 550--><p class="nopar" >
     <!--l. 553--><p class="noindent" >The option <span class="textbf">-x -r&#x00A0;</span><span class="textit">&#x003C;cert subject&#x003E;</span> essentially tells the <span class="textit">MyProxy</span> server to require two forms of
     authentication:
         <ol  class="enumerate2" >
         <li 
  class="enumerate" id="x56-463017x1">a password (initially set with <span class="textit">myproxy-init</span>)
         </li>
         <li 
  class="enumerate" id="x56-463019x2">an existing proxy (the proxy to be renewed)</li></ol>
     </li>
     <li 
  class="enumerate" id="x56-463021x4">A submit description file may include the password. An example contains commands of the form:
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-888">
     <tspan font-family="ectt" font-size="0800">executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/usr/bin/my-executable</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor-unsup-7</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MyProxyHost</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;example.cs.wisc.edu:7512</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MyProxyServerDN</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/O=doesciencegrid.org/OU=People/CN=Jane</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;Doe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;25900</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MyProxyPassword</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;password</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MyProxyCredentialName</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;my_executable_run</tspan>
     <tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">queue</tspan>
</div>
     <!--l. 573--><p class="nopar" > Note that placing the password within the submit description file is not really secure, as it relies upon security
     provided by the file system. This may still be better than option 5.
     </li>
     <li 
  class="enumerate" id="x56-463023x5">Use the <span class="textbf">-p</span> option to <span class="textit">condor_submit</span>. The submit command appears as
                                                                                         

                                                                                         
     <div class="verbatim" id="verbatim-889">
     <tspan font-family="ectt" font-size="0800">condor_submit</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-p</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;mypassword</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/home/user/myjob.submit</tspan>
</div>
     <!--l. 585--><p class="nopar" > The argument list for <span class="textit">condor_submit</span> defaults to being publicly available. An attacker with a login on that
     local machine could generate a simple shell script to watch for the password.
     </li></ol>
<!--l. 597--><p class="indent" >   Currently, HTCondor-G calls the <span class="textit">myproxy-get-delegation</span> command-line tool, passing it the necessary arguments.
The location of the <span class="textit">myproxy-get-delegation</span> executable is determined by the configuration variable
<span class="texttt">MYPROXY_GET_DELEGATION</span> <a 
 id="dx56-463024"></a><a 
 id="dx56-463025"></a> in the configuration file on the HTCondor-G machine. This variable is read by the
<span class="textit">condor_gridmanager</span>. If <span class="textit">myproxy-get-delegation</span> is a dynamically-linked executable (verify this with <span class="texttt">ldd
myproxy-get-delegation</span>), point <span class="texttt">MYPROXY_GET_DELEGATION</span> to a wrapper shell script that sets <span class="texttt">LD_LIBRARY_PATH</span>
to the correct <span class="textit">MyProxy</span> library or Globus library directory and then calls <span class="textit">myproxy-get-delegation</span>. Here is an
example of such a wrapper script:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-890">
<tspan font-family="ectt" font-size="0800">#!/bin/sh</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">export</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;LD_LIBRARY_PATH=/opt/myglobus/lib</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">exec</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/opt/myglobus/bin/myproxy-get-delegation</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$@</tspan>
</div>
<!--l. 623--><p class="nopar" >
<!--l. 2--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4640005.3.2"></a>The Grid Monitor</h5>
<a 
 id="dx56-464001"></a>
<a 
 id="dx56-464002"></a>
<a 
 id="dx56-464003"></a>
<!--l. 8--><p class="noindent" >HTCondor&#8217;s Grid Monitor is designed to improve the scalability of machines running the Globus Toolkit&#8217;s GRAM2
gatekeeper. Normally, this service runs a jobmanager process for every job submitted to the gatekeeper. This
includes both currently running jobs and jobs waiting in the queue. Each jobmanager runs a Perl script at frequent
intervals (every 10 seconds) to poll the state of its job in the local batch system. For example, with 400 jobs
submitted to a gatekeeper, there will be 400 jobmanagers running, each regularly starting a Perl script. When a
large number of jobs have been submitted to a single gatekeeper, this frequent polling can heavily load the
gatekeeper. When the gatekeeper is under heavy load, the system can become non-responsive, and a variety of
problems can occur.
<!--l. 25--><p class="indent" >   HTCondor&#8217;s Grid Monitor temporarily replaces these jobmanagers. It is named the Grid Monitor, because it
replaces the monitoring (polling) duties previously done by jobmanagers. When the Grid Monitor runs, HTCondor
attempts to start a single process to poll all of a user&#8217;s jobs at a given gatekeeper. While a job is
waiting in the queue, but not yet running, HTCondor shuts down the associated jobmanager, and
instead relies on the Grid Monitor to report changes in status. The jobmanager started to add the
job to the remote batch system queue is shut down. The jobmanager restarts when the job begins
running.
<!--l. 38--><p class="indent" >   The Grid Monitor requires that the gatekeeper support the fork jobmanager with the name <span class="textit">jobmanager-fork</span>. If
the gatekeeper does not support the fork jobmanager, the Grid Monitor will not be used for that site. The
<span class="textit">condor_gridmanager</span> log file reports any problems using the Grid Monitor.
<!--l. 45--><p class="indent" >   The Grid Monitor is enabled by default, and the configuration macro <span class="texttt">GRID_MONITOR</span> <a 
 id="dx56-464004"></a><a 
 id="dx56-464005"></a> identifies the location of
the executable.
<!--l. 44--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4650005.3.2"></a>Limitations of HTCondor-G</h5>
                                                                                         

                                                                                         
<a 
 id="dx56-465001"></a>
<!--l. 48--><p class="noindent" >Submitting jobs to run under the grid universe has not yet been perfected. The following is a list of known
limitations:
<!--l. 52--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x56-465003x1">No checkpoints.
     </li>
     <li 
  class="enumerate" id="x56-465005x2">No job exit codes are available when using <span class="textbf">gt2</span>.
     </li>
     <li 
  class="enumerate" id="x56-465007x3">Limited platform availability. Windows support is not available. </li></ol>
<a 
 id="dx56-465008"></a>
<!--l. 3--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.3   </span> <a 
 id="x56-4660005.3.3"></a>The nordugrid Grid Type </h4>
<a 
 id="dx56-466001"></a>
<a 
 id="dx56-466002"></a>
<!--l. 8--><p class="noindent" >NorduGrid is a project to develop free grid middleware named the Advanced Resource Connector (ARC).
See the NorduGrid web page (<a 
href="http://www.nordugrid.org" >http://www.nordugrid.org</a>) for more information about NorduGrid
software.
<!--l. 13--><p class="indent" >   HTCondor jobs may be submitted to NorduGrid resources using the <span class="textbf">grid</span> universe. The <span class="textbf">grid_resource</span><a 
 id="dx56-466003"></a>
command specifies the name of the NorduGrid resource as follows:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-891">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;nordugrid</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ng.example.com</tspan>
</div>
<!--l. 19--><p class="nopar" >
<!--l. 21--><p class="indent" >   NorduGrid uses X.509 credentials for authentication, usually in the form a proxy certificate. <span class="textit">condor_submit</span>
looks in default locations for the proxy. The submit description file command <span class="textbf">x509userproxy</span><a 
 id="dx56-466004"></a> may be used to give
the full path name to the directory containing the proxy, when the proxy is not in a default location. If this optional
command is not present in the submit description file, then the value of the environment variable <span class="texttt">X509_USER_PROXY</span>
is checked for the location of the proxy. If this environment variable is not present, then the proxy in the file
<span class="texttt">/tmp/x509up_uXXXX</span> is used, where the characters <span class="obeylines-h"><span class="verb">XXXX</span></span> in this file name are replaced with the Unix user
id.
<!--l. 36--><p class="indent" >   NorduGrid uses RSL syntax to describe jobs. The submit description file command <span class="textbf">nordugrid_rsl</span><a 
 id="dx56-466005"></a> adds
additional attributes to the job RSL that HTCondor constructs. The format this submit description file command
is
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-892">
<tspan font-family="ectt" font-size="1000">nordugrid_rsl</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;(name=value)(name=value)</tspan>
</div>
<!--l. 44--><p class="nopar" >
<!--l. 3--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.4   </span> <a 
 id="x56-4670005.3.4"></a>The unicore Grid Type </h4>
<a 
 id="dx56-467001"></a>
<a 
 id="dx56-467002"></a>
<!--l. 8--><p class="noindent" >Unicore is a Java-based grid scheduling system. See <a 
href="http://www.unicore.eu/" >http://www.unicore.eu/</a> for more information about
Unicore.
<!--l. 11--><p class="indent" >   HTCondor jobs may be submitted to Unicore resources using the <span class="textbf">grid</span> universe. The <span class="textbf">grid_resource</span><a 
 id="dx56-467003"></a> command
specifies the name of the Unicore resource as follows:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-893">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;unicore</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;usite.example.com</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;vsite</tspan>
</div>
<!--l. 17--><p class="nopar" > <span class="textbf">usite.example.com</span> is the host name of the Unicore gateway machine to which the HTCondor job is to be
submitted. <span class="textbf">vsite</span> is the name of the Unicore virtual resource to which the HTCondor job is to be
submitted.
<!--l. 23--><p class="indent" >   Unicore uses certificates stored in a Java keystore file for authentication. The following submit description file
commands are required to properly use the keystore file.
     <dl class="description"><dt class="description">
<span class="textbf">keystore_file</span><a 
 id="dx56-467004"></a> </dt><dd 
class="description">Specifies the complete path and file name of the Java keystore file to use.
     </dd><dt class="description">
<span class="textbf">keystore_alias</span><a 
 id="dx56-467005"></a> </dt><dd 
class="description">A string that specifies which certificate in the Java keystore file to use.
     </dd><dt class="description">
<span class="textbf">keystore_passphrase_file</span><a 
 id="dx56-467006"></a> </dt><dd 
class="description">Specifies the complete path and file name of the file containing the passphrase
     protecting the certificate in the Java keystore file.</dd></dl>
<!--l. 2--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.5   </span> <a 
 id="x56-4680005.3.5"></a>The batch Grid Type (for PBS, LSF, SGE, and SLURM) </h4>
<a 
 id="dx56-468001"></a>
<!--l. 10--><p class="noindent" >The <span class="textbf">batch</span> grid type is used to submit to a local PBS, LSF, SGE, or SLURM system using the <span class="textbf">grid</span> universe
and the <span class="textbf">grid_resource</span><a 
 id="dx56-468002"></a> command by placing a variant of the following into the submit description
file.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-894">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;batch</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;pbs</tspan>
</div>
<!--l. 16--><p class="nopar" >
<!--l. 18--><p class="indent" >   The second argument on the right hand side will be one of <span class="texttt">pbs</span>, <span class="texttt">lsf</span>, <span class="texttt">sge</span>, or <span class="texttt">slurm</span>.
<!--l. 21--><p class="indent" >   Any of these batch grid types requires two variables to be set in the HTCondor configuration file. <span class="texttt">BATCH_GAHP</span> <a 
 id="dx56-468003"></a><a 
 id="dx56-468004"></a> is
the path to the GAHP server binary that is to be used to submit one of these batch jobs. <span class="texttt">GLITE_LOCATION</span> <a 
 id="dx56-468005"></a><a 
 id="dx56-468006"></a> is the
path to the directory containing the GAHP&#8217;s configuration file and auxiliary binaries. In the HTCondor
distribution, these files are located in <span class="texttt"><span class="texttt">$(LIBEXEC)</span>/glite</span>. The batch GAHP&#8217;s configuration file is in
<span class="texttt"><span class="texttt">$(GLITE_LOCATION)</span>/etc/batch_gahp.config</span>. The batch GAHP&#8217;s auxiliary binaries are to be in the directory
<span class="texttt"><span class="texttt">$(GLITE_LOCATION)</span>/bin</span>. The HTCondor configuration file appears
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-895">
<tspan font-family="ectt" font-size="0800">GLITE_LOCATION</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$(LIBEXEC)/glite</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">BATCH_GAHP</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$(GLITE_LOCATION)/bin/batch_gahp</tspan>
</div>
<!--l. 39--><p class="nopar" >
<!--l. 42--><p class="indent" >   The batch GAHP&#8217;s configuration file has variables that must be modified to tell it where to find
     <dl class="description"><dt class="description">
PBS </dt><dd 
class="description">on the local system. <span class="texttt">pbs_binpath</span> is the directory that contains the PBS binaries. <span class="texttt">pbs_spoolpath</span> is
     the PBS spool directory.
     </dd><dt class="description">
LSF </dt><dd 
class="description">on the local system. <span class="texttt">lsf_binpath</span> is the directory that contains the LSF binaries. <span class="texttt">lsf_confpath</span> is
     the location of the LSF configuration file.</dd></dl>
<a 
 id="dx56-468007"></a>
<a 
 id="dx56-468008"></a>
<!--l. 57--><p class="indent" >   The popular PBS (Portable Batch System) can be found at <a 
href="http://www.pbsworks.com/" >http://www.pbsworks.com/</a>, and Torque is at
(<a 
href="http://www.adaptivecomputing.com/products/open-source/torque/" >http://www.adaptivecomputing.com/products/open-source/torque/</a>).
<!--l. 62--><p class="indent" >   As an alternative to the submission details given above, HTCondor jobs may be submitted to a local PBS system
using the <span class="textbf">grid</span> universe and the <span class="textbf">grid_resource</span> command by placing the following into the submit description
file.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-896">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;pbs</tspan>
</div>
<!--l. 69--><p class="nopar" >
<a 
 id="dx56-468009"></a>
<a 
 id="dx56-468010"></a>
<!--l. 77--><p class="indent" >   HTCondor jobs may be submitted to the Platform LSF batch system. Find the Platform product from the page
<a 
href="http://www.platform.com/Products/" >http://www.platform.com/Products/</a> for more information about Platform LSF.
<!--l. 82--><p class="indent" >   As an alternative to the submission details given above, HTCondor jobs may be submitted to a local Platform
LSF system using the <span class="textbf">grid</span> universe and the <span class="textbf">grid_resource</span> command by placing the following into the submit
description file.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-897">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;lsf</tspan>
</div>
<!--l. 89--><p class="nopar" >
<a 
 id="dx56-468011"></a>
<a 
 id="dx56-468012"></a>
<!--l. 97--><p class="indent" >   The popular Grid Engine batch system (formerly known as Sun Grid Engine and abbreviated SGE) is available
in two varieties: Oracle Grid Engine (<a 
href="http://www.oracle.com/us/products/tools/oracle-grid-engine-075549.html" >http://www.oracle.com/us/products/tools/oracle-grid-engine-075549.html</a>)
and Univa Grid Engine (<a 
href="http://www.univa.com/?gclid=CLXg6-OEy6wCFWICQAodl0lm9Q" >http://www.univa.com/?gclid=CLXg6-OEy6wCFWICQAodl0lm9Q</a>).
<!--l. 104--><p class="indent" >   As an alternative to the submission details given above, HTCondor jobs may be submitted to a local SGE
system using the <span class="textbf">grid</span> universe and adding the <span class="textbf">grid_resource</span> command by placing into the submit description
file:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-898">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;sge</tspan>
</div>
<!--l. 111--><p class="nopar" >
<!--l. 115--><p class="indent" >   The <span class="textit">condor_qsub</span> command line tool will take PBS/SGE style batch files or command line arguments and
submit the job to HTCondor instead. See the <span class="textit">condor_qsub</span> manual page at <a 
href="Condorqsub.html#x132-94400012">12<!--tex4ht:ref: man-condor-qsub --></a> for details.
   <h4 class="subsectionHead"><span class="titlemark">5.3.6   </span> <a 
 id="x56-4690005.3.6"></a>The EC2 Grid Type </h4>
<a 
 id="dx56-469001"></a>
<a 
 id="dx56-469002"></a>
<a 
 id="dx56-469003"></a>
<a 
 id="dx56-469004"></a>
<!--l. 9--><p class="noindent" >HTCondor jobs may be submitted to clouds supporting Amazon&#8217;s Elastic Compute Cloud (EC2) interface. The EC2
interface permits on-line commercial services that provide the rental of computers by the hour to run
computational applications. They run virtual machine images that have been uploaded to Amazon&#8217;s
online storage service (S3 or EBS). More information about Amazon&#8217;s EC2 service is available at
<a 
href="http://aws.amazon.com/ec2" >http://aws.amazon.com/ec2</a>.
<!--l. 18--><p class="indent" >   The <span class="textbf">ec2</span> grid type uses the EC2 Query API, also called the EC2 REST API.
<!--l. 22--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4700005.3.6"></a>EC2 Job Submission</h5>
<!--l. 25--><p class="noindent" >HTCondor jobs are submitted to an EC2 service with the <span class="textbf">grid</span> universe, setting the <span class="textbf">grid_resource</span><a 
 id="dx56-470001"></a> command to
<span class="textbf">ec2</span>, followed by the service&#8217;s URL. For example, partial contents of the submit description file may
be
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-899">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ec2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;https://ec2.us-east-1.amazonaws.com/</tspan>
</div>
<!--l. 32--><p class="nopar" > (Replace &#8217;us-east-1&#8217; with the AWS region you&#8217;d like to use.)
<!--l. 35--><p class="indent" >   Since the job is a virtual machine image, most of the submit description file commands specifying input or
output files are not applicable. The <span class="textbf">executable</span><a 
 id="dx56-470002"></a> command is still required, but its value is ignored. It can be used to
identify different jobs in the output of <span class="textit">condor_q</span>.
<!--l. 42--><p class="indent" >   The VM image for the job must already reside in one of Amazon&#8217;s storage service (S3 or EBS)
and be registered with EC2. In the submit description file, provide the identifier for the image using
<span class="textbf">ec2_ami_id</span><a 
 id="dx56-470003"></a>.
<a 
 id="dx56-470004"></a>
<!--l. 48--><p class="indent" >   This grid type requires access to user authentication information, in the form of path names to files containing
the appropriate keys, with one exception, described below.
<!--l. 52--><p class="indent" >   The <span class="textbf">ec2</span> grid type has two different authentication methods. The first authentication method uses the EC2 API&#8217;s
built-in authentication. Specify the service with expected <span class="texttt">http://</span> or <span class="texttt">https://</span> URL, and set the EC2 access key
and secret access key as follows:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-900">
<tspan font-family="ectt" font-size="1000">ec2_access_key_id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/access.key</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">ec2_secret_access_key</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/secret.key</tspan>
</div>
<!--l. 60--><p class="nopar" >
<!--l. 62--><p class="indent" >   The <span class="texttt">euca3://</span> and <span class="texttt">euca3s://</span> protocols must use this authentication method. These protocols
exist to work correctly when the resources do not support the <span class="texttt">InstanceInitiatedShutdownBehavior</span>
parameter.
<!--l. 67--><p class="indent" >   The second authentication method for the EC2 grid type is X.509. Specify the service with an <span class="texttt">x509://</span>
URL, even if the URL was given in another form. Use <span class="textbf">ec2_access_key_id</span><a 
 id="dx56-470005"></a> to specify the path
to the X.509 public key (certificate), which is not the same as the built-in authentication&#8217;s access
key. <span class="textbf">ec2_secret_access_key</span><a 
 id="dx56-470006"></a> specifies the path to the X.509 private key, which is not the same as
the built-in authentication&#8217;s secret key. The following example illustrates the specification for X.509
authentication:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-901">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ec2</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;x509://service.example</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">ec2_access_key_id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/x.509/public.key</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">ec2_secret_access_key</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/x.509/private.key</tspan>
</div>
<!--l. 82--><p class="nopar" >
<!--l. 84--><p class="indent" >   If using an X.509 proxy, specify the proxy in both places.
<!--l. 86--><p class="indent" >   The exception to both of these cases applies when submitting EC2 jobs to an HTCondor running in an EC2
instance. If that instance has been configured with sufficient privileges, you may specify &#8220;FROM INSTANCE&#8221;
(without the quotes) for either <span class="textbf">ec2_access_key_id</span> or <span class="textbf">ec2_secret_access_key</span>, and HTCondor
will use the instance&#8217;s credentials. (AWS grants an EC2 instance access to temporary credentials,
renewed over the instance&#8217;s lifetime, based on the instance&#8217;s assigned IAM (instance) profile and the
corresponding IAM role. You may specify the this information when launching an instance or later, during its
lifetime.)
<!--l. 97--><p class="indent" >   HTCondor can use the EC2 API to create an SSH key pair that allows secure log in to the virtual
machine once it is running. If the command <span class="textbf">ec2_keypair_file</span><a 
 id="dx56-470007"></a> is set in the submit description file,
HTCondor will write an SSH private key into the indicated file. The key can be used to log into the virtual
machine. Note that modification will also be needed of the firewall rules for the job to incoming SSH
connections.
<!--l. 107--><p class="indent" >   An EC2 service uses a firewall to restrict network access to the virtual machine instances it runs. Typically, no
incoming connections are allowed. One can define sets of firewall rules and give them names. The
EC2 API calls these security groups. If utilized, tell HTCondor what set of security groups should be
applied to each VM using the <span class="textbf">ec2_security_groups</span><a 
 id="dx56-470008"></a> submit description file command. If not provided,
HTCondor uses the security group <span class="textbf">default</span>. This command specifies security group names; to specify
IDs, use <span class="textbf">ec2_security_ids</span><a 
 id="dx56-470009"></a>. This may be necessary when specifying a Virtual Private Cloud (VPC)
instance.
<!--l. 120--><p class="indent" >   To run an instance in a VPC, set <span class="textbf">ec2_vpc_subnet</span><a 
 id="dx56-470010"></a> to the the desired VPC&#8217;s specification string. The
instance&#8217;s IP address may also be specified by setting <span class="textbf">ec2_vpc_id</span><a 
 id="dx56-470011"></a>.
<!--l. 125--><p class="indent" >   The EC2 API allows the choice of different hardware configurations for instances to run on. Select which
configuration to use for the <span class="textbf">ec2</span> grid type with the <span class="textbf">ec2_instance_type</span><a 
 id="dx56-470012"></a> submit description file command.
HTCondor provides no default.
<!--l. 131--><p class="indent" >   Certain instance types provide additional block devices whose names must be mapped to kernel device names in
order to be used. The <span class="textbf">ec2_block_device_mapping</span><a 
 id="dx56-470013"></a> submit description file command allows specification of these
maps. A map is a device name followed by a colon, followed by kernel name; maps are separated by a commas,
and/or spaces. For example, to specify that the first ephemeral device should be <span class="texttt">/dev/sdb</span> and the second
<span class="texttt">/dev/sdc</span>:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-902">
<tspan font-family="ectt" font-size="1000">ec2_block_device_mapping</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ephemeral0:/dev/sdb,</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ephemeral1:/dev/sdc</tspan>
</div>
<!--l. 144--><p class="nopar" >
<!--l. 146--><p class="indent" >   Each virtual machine instance can be given up to 16 KiB of unique data, accessible by the instance by
connecting to a well-known address. This makes it easy for many instances to share the same VM image, but
perform different work. This data can be specified to HTCondor in one of two ways. First, the data can be provided
directly in the submit description file using the <span class="textbf">ec2_user_data</span><a 
 id="dx56-470014"></a> command. Second, the data can be stored in a file,
and the file name is specified with the <span class="textbf">ec2_user_data_file</span><a 
 id="dx56-470015"></a> submit description file command. This second option
allows the use of binary data. If both options are used, the two blocks of data are concatenated, with the data from
<span class="textbf">ec2_user_data</span> occurring first. HTCondor performs the base64 encoding that EC2 expects on the
data.
<!--l. 162--><p class="indent" >   Amazon also offers an Identity and Access Management (IAM) service. To specify an IAM (instance) profile for
an EC2 job, use submit commands <span class="textbf">ec2_iam_profile_name</span><a 
 id="dx56-470016"></a> or <span class="textbf">ec2_iam_profile_arn</span><a 
 id="dx56-470017"></a>.
<!--l. 168--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4710005.3.6"></a>Termination of EC2 Jobs</h5>
<!--l. 171--><p class="noindent" >A protocol defines the shutdown procedure for jobs running as EC2 instances. The service is told to shut down the
instance, and the service acknowledges. The service then advances the instance to a state in which the termination is
imminent, but the job is given time to shut down gracefully.
<!--l. 179--><p class="indent" >   Once this state is reached, some services other than Amazon cannot be relied upon to actually terminate the job.
Thus, HTCondor must check that the instance has terminated before removing the job from the queue. This
avoids the possibility of HTCondor losing track of a job while it is still accumulating charges on the
service.
<!--l. 186--><p class="indent" >   HTCondor checks after a fixed time interval that the job actually has terminated. If the job has not terminated
after a total of four checks, the job is placed on hold.
<!--l. 192--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4720005.3.6"></a>Using Spot Instances</h5>
<!--l. 195--><p class="noindent" >EC2 jobs may also be submitted to clouds that support spot instances. A spot instance differs from a conventional,
or dedicated, instance in two primary ways. First, the instance price varies according to demand. Second, the cloud
provider may terminate the instance prematurely. To start a spot instance, the submitter specifies a bid, which
                                                                                         

                                                                                         
represents the most the submitter is willing to pay per hour to run the VM. <a 
 id="dx56-472001"></a>Within HTCondor, the submit
command <span class="textbf">ec2_spot_price</span><a 
 id="dx56-472002"></a> specifies this floating point value. For example, to bid 1.1 cents per hour on
Amazon:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-903">
<tspan font-family="ectt" font-size="1000">ec2_spot_price</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;0.011</tspan>
</div>
<!--l. 213--><p class="nopar" >
<!--l. 215--><p class="indent" >   Note that the EC2 API does not specify how the cloud provider should interpret the bid. Empirically, Amazon
uses fractional US dollars.
<!--l. 219--><p class="indent" >   Other submission details for a spot instance are identical to those for a dedicated instance.
<!--l. 222--><p class="indent" >   A spot instance will not necessarily begin immediately. Instead, it will begin as soon as the price drops below the
bid. Thus, spot instance jobs may remain in the idle state for much longer than dedicated instance jobs, as they wait
for the price to drop. Furthermore, if the price rises above the bid, the cloud service will terminate the
instance.
<!--l. 231--><p class="indent" >   More information about Amazon&#8217;s spot instances is available at <a 
href="http://aws.amazon.com/ec2/spot-instances/" >http://aws.amazon.com/ec2/spot-instances/</a>.
<!--l. 235--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4730005.3.6"></a>Advanced Usage</h5>
<!--l. 238--><p class="noindent" >Additional control of EC2 instances is available in the form of permitting the direct specification of instance
creation parameters. To set an instance creation parameter, first list its name in the submit command
<span class="textbf">ec2_parameter_names</span><a 
 id="dx56-473001"></a>, a space or comma separated list. The parameter may need to be properly capitalized.
Also tell HTCondor the parameter&#8217;s value, by specifying it as a submit command whose name begins with
<span class="textbf">ec2_parameter_</span>; dots within the parameter name must be written as underscores in the submit command
name.
<!--l. 250--><p class="indent" >   For example, the submit description file commands to set parameter <span class="texttt">IamInstanceProfile.Name</span> to value
<span class="texttt">ExampleProfile</span> are
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-904">
<tspan font-family="ectt" font-size="1000">ec2_parameter_names</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;IamInstanceProfile.Name</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">ec2_parameter_IamInstanceProfile_Name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;ExampleProfile</tspan>
</div>
<!--l. 257--><p class="nopar" >
<!--l. 260--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4740005.3.6"></a>EC2 Configuration Variables</h5>
<!--l. 263--><p class="noindent" >The configuration variables <span class="texttt">EC2_GAHP</span> and <span class="texttt">EC2_GAHP_LOG</span> must be set, and by default are equal to
<span class="obeylines-h"><span class="verb">$(SBIN)/ec2_gahp</span></span> and <span class="obeylines-h"><span class="verb">/tmp/EC2GahpLog.$(USERNAME)</span></span>, respectively.
<!--l. 267--><p class="indent" >   The configuration variable <span class="texttt">EC2_GAHP_DEBUG</span> is optional and defaults to <span class="obeylines-h"><span class="verb">D_PID</span></span>; we recommend you keep <span class="obeylines-h"><span class="verb">D_PID</span></span> if
you change the default, to disambiguate between the logs of different resources specified by the same
user.
<!--l. 273--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4750005.3.6"></a>Communicating with an EC2 Service</h5>
<!--l. 276--><p class="noindent" >The <span class="textbf">ec2</span> grid type does not presently permit the explicit use of an HTTP proxy.
<!--l. 279--><p class="indent" >   By default, HTCondor assumes that EC2 services are reliably available. If an attempt to contact a service during
the normal course of operation fails, HTCondor makes a special attempt to contact the service. If this
attempt fails, the service is marked as down, and normal operation for that service is suspended until a
subsequent special attempt succeeds. The jobs using that service do not go on hold. To place jobs
on hold when their service becomes unavailable, set configuration variable <span class="texttt">EC2_RESOURCE_TIMEOUT</span>
<a 
 id="dx56-475001"></a><a 
 id="dx56-475002"></a> to the number of seconds to delay before placing the job on hold. The default value of -1 for this
variable implements an infinite delay, such that the job is never placed on hold. When setting this
value, consider the value of configuration variable <span class="texttt">GRIDMANAGER_RESOURCE_PROBE_INTERVAL</span> <a 
 id="dx56-475003"></a><a 
 id="dx56-475004"></a>, which
sets the number of seconds that HTCondor will wait after each special contact attempt before trying
again.
<!--l. 296--><p class="indent" >   By default, the EC2 GAHP enforces a 100 millisecond interval between requests to the same service. This helps
ensure reliable service. You may configure this interval with the configuration variable <span class="texttt">EC2_GAHP_RATE_LIMIT</span>, which
must be an integer number of milliseconds. Adjusting the interval may result in higher or lower throughput,
depending on the service. Too short of an interval may trigger rate-limiting by the service; while HTCondor will
react appropriately (by retrying with an exponential back-off), it may be more efficient to configure a longer
interval.
                                                                                         

                                                                                         
<!--l. 306--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4760005.3.6"></a>Secure Communication with and EC2 Service</h5>
<!--l. 309--><p class="noindent" >The specification of a service with an <span class="texttt">https://</span>, an <span class="texttt">x509://</span>, or an <span class="texttt">euca3s://</span> URL validates that service&#8217;s
certificate, checking that a trusted certificate authority (CA) signed it. Commercial EC2 service providers generally
use certificates signed by widely-recognized CAs. These CAs will usually work without any additional configuration.
For other providers, a specification of trusted CAs may be needed. Without, errors such as the following will be in
the EC2 GAHP log:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-905">
<tspan font-family="ectt" font-size="0800">06/13/13</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;15:16:16</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;curl_easy_perform()</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;failed</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(60):</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">Peer</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;certificate</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cannot</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;be</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;authenticated</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;with</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;given</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;CA</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;certificates</tspan><tspan font-family="tctt" font-size="0800">'</tspan><tspan font-family="ectt" font-size="0800">.</tspan>
</div>
<!--l. 322--><p class="nopar" >
<!--l. 325--><p class="indent" >   Specify trusted CAs by including their certificates in a group of trusted CAs either in an on disk directory or in a
single file. Either of these alternatives may contain multiple certificates. Which is used will vary from system to
system, depending on the system&#8217;s SSL implementation. HTCondor uses <span class="textit">libcurl</span>; information about the <span class="textit">libcurl</span>
specification of trusted CAs is available at
<!--l. 334--><p class="indent" >   <a 
href="http://curl.haxx.se/libcurl/c/curl_easy_setopt.html" >http://curl.haxx.se/libcurl/c/curl_easy_setopt.html</a>
<!--l. 336--><p class="indent" >   Versions of HTCondor with standard universe support ship with their own <span class="textit">libcurl</span>, which will be linked against
<span class="textit">OpenSSL</span>.
<!--l. 339--><p class="indent" >   The behavior when specifying both a directory and a file is undefined, although the EC2 GAHP allows
it.
<!--l. 342--><p class="indent" >   The EC2 GAHP will set the CA file to whichever variable it finds first, checking these in the following
order:
<!--l. 345--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x56-476002x1">The environment variable <span class="texttt">X509_CERT_FILE</span>, set when the <span class="textit">condor_master</span> starts up.
     </li>
     <li 
  class="enumerate" id="x56-476004x2">The HTCondor configuration variable <span class="texttt">GAHP_SSL_CAFILE</span> <a 
 id="dx56-476005"></a><a 
 id="dx56-476006"></a>.</li></ol>
<!--l. 351--><p class="indent" >   The EC2 GAHP supplies no default value, if it does not find a CA file.
<!--l. 353--><p class="indent" >   The EC2 GAHP will set the CA directory given whichever of these variables it finds first, checking in the
following order:
<!--l. 356--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x56-476008x1">The HTCondor configuration variable <span class="texttt">GSI_DAEMON_TRUSTED_CA_DIR</span> <a 
 id="dx56-476009"></a><a 
 id="dx56-476010"></a>.
     </li>
     <li 
  class="enumerate" id="x56-476012x2">The environment variable <span class="texttt">X509_CERT_DIR</span>, set when the <span class="textit">condor_master</span> starts up.
     </li>
     <li 
  class="enumerate" id="x56-476014x3">The HTCondor configuration variable <span class="texttt">GAHP_SSL_CADIR</span> <a 
 id="dx56-476015"></a><a 
 id="dx56-476016"></a>.</li></ol>
                                                                                         

                                                                                         
<!--l. 363--><p class="indent" >   The EC2 GAHP supplies no default value, if it does not find a CA directory.
<!--l. 366--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4770005.3.6"></a>EC2 GAHP Statistics</h5>
<!--l. 369--><p class="noindent" >The EC2 GAHP tracks, and reports in the corresponding grid resource ad, statistics related to resource&#8217;s rate
limit.
<a 
 id="dx56-477001"></a>
<a 
 id="dx56-477002"></a>
     <dl class="description"><dt class="description">
<span class="texttt">NumRequests</span>: </dt><dd 
class="description">The total number of requests made by HTCondor to this resource.
<a 
 id="dx56-477003"></a>
<a 
 id="dx56-477004"></a>
     </dd><dt class="description">
<span class="texttt">NumDistinctRequests</span>: </dt><dd 
class="description">The number of distinct requests made by HTCondor to this resource. The difference
     between this and NumRequests is the total number of retries. Retries are not unusual.
<a 
 id="dx56-477005"></a>
<a 
 id="dx56-477006"></a>
     </dd><dt class="description">
<span class="texttt">NumRequestsExceedingLimit</span>: </dt><dd 
class="description">The number of requests which exceeded the service&#8217;s rate limit. Each such
     request will cause a retry, unless the maximum number of retries is exceeded, or if the retries have
     already taken so long that the signature on the original request has expired.
<a 
 id="dx56-477007"></a>
<a 
 id="dx56-477008"></a>
     </dd><dt class="description">
<span class="texttt">NumExpiredSignatures</span>: </dt><dd 
class="description">The number of requests which the EC2 GAHP did not even attempt to send to
     the service because signature expired. Signatures should not, generally, expire; a request&#8217;s retries will
     usually &#8211; eventually &#8211; succeed.
     </dd></dl>
<!--l. 2--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.7   </span> <a 
 id="x56-4780005.3.7"></a>The GCE Grid Type </h4>
<a 
 id="dx56-478001"></a>
<a 
 id="dx56-478002"></a>
<a 
 id="dx56-478003"></a>
<a 
 id="dx56-478004"></a>
                                                                                         

                                                                                         
<!--l. 9--><p class="noindent" >HTCondor jobs may be submitted to the Google Compute Engine (GCE) cloud service. GCE is an on-line
commercial service that provides the rental of computers by the hour to run computational applications. Its runs
virtual machine images that have been uploaded to Google&#8217;s servers. More information about Google Compute
Engine is available at <a 
href="http://cloud.google.com/Compute" >http://cloud.google.com/Compute</a>.
<!--l. 19--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4790005.3.7"></a>GCE Job Submission</h5>
<!--l. 22--><p class="noindent" >HTCondor jobs are submitted to the GCE service with the <span class="textbf">grid</span> universe, setting the <span class="textbf">grid_resource</span><a 
 id="dx56-479001"></a> command to
<span class="textbf">gce</span>, followed by the service&#8217;s URL, your GCE project, and the desired GCE zone to be used. The submit
description file command will be similar to:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-906">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;gce</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;https://www.googleapis.com/compute/v1</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;my_proj</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;us-central1-a</tspan>
</div>
<!--l. 30--><p class="nopar" >
<!--l. 32--><p class="indent" >   Since the HTCondor job is a virtual machine image, most of the submit description file commands specifying
input or output files are not applicable. The <span class="textbf">executable</span><a 
 id="dx56-479002"></a> command is still required, but its value is ignored. It
identifies different jobs in the output of <span class="textit">condor_q</span>.
<!--l. 39--><p class="indent" >   The VM image for the job must already reside in Google&#8217;s Cloud Storage service and be registered
with GCE. In the submit description file, provide the identifier for the image using the <span class="textbf">gce_image</span><a 
 id="dx56-479003"></a>
command.
<!--l. 45--><p class="indent" >   This grid type requires granting HTCondor permission to use your Google account. The easiest way to do this is
to use the <span class="textit">gcloud</span> command-line tool distributed by Google. Find <span class="textit">gcloud</span> and documentation for it at
<a 
href="https://cloud.google.com/compute/docs/gcloud-compute/" >https://cloud.google.com/compute/docs/gcloud-compute/</a>. After installation of <span class="textit">gcloud</span>, run <span class="textit">gcloud auth login</span> and
follow its directions. Once done with that step, the tool will write authorization credentials to the file
<span class="texttt">.config/gcloud/credentials</span> under your HOME directory.
<!--l. 57--><p class="indent" >   Given an authorization file, specify its location in the submit description file using the <span class="textbf">gce_auth_file</span><a 
 id="dx56-479004"></a>
command, as in the example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-907">
<tspan font-family="ectt" font-size="1000">gce_auth_file</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/auth-file</tspan>
</div>
<!--l. 62--><p class="nopar" >
<!--l. 64--><p class="indent" >   GCE allows the choice of different hardware configurations for instances to run on. Select which configuration to
use for the <span class="textbf">gce</span> grid type with the <span class="textbf">gce_machine_type</span><a 
 id="dx56-479005"></a> submit description file command. HTCondor provides no
default.
<!--l. 70--><p class="indent" >   Each virtual machine instance can be given a unique set of metadata, which consists of name/value pairs, similar
to the environment variables of regular jobs. The instance can query its metadata via a well-known address. This
makes it easy for many instances to share the same VM image, but perform different work. This data can be
specified to HTCondor in one of two ways. First, the data can be provided directly in the submit description file
using the <span class="textbf">gce_metadata</span><a 
 id="dx56-479006"></a> command. The value should be a comma-separated list of name=value settings, as the
example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-908">
<tspan font-family="ectt" font-size="1000">gce_metadata</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;setting1=foo,setting2=bar</tspan>
</div>
<!--l. 83--><p class="nopar" >
<!--l. 85--><p class="indent" >   Second, the data can be stored in a file, and the file name is specified with the <span class="textbf">gce_metadata_file</span><a 
 id="dx56-479007"></a> submit
description file command. This second option allows a wider range of characters to be used in the metadata values.
Each name=value pair should be on its own line. No white space is removed from the lines, except for the newline
that separates entries.
<!--l. 94--><p class="indent" >   Both options can be used at the same time, but do not use the same metadata name in both places.
<!--l. 97--><p class="indent" >   HTCondor sets the following elements when describing the instance to the GCE server: <span class="textbf">machineType</span>, <span class="textbf">name</span>,
<span class="textbf">scheduling</span>, <span class="textbf">disks</span>, <span class="textbf">metadata</span>, and <span class="textbf">networkInterfaces</span>. You can provide additional elements to be
included in the instance description as a block of JSON. Write the additional elements to a file, and
specify the filename in your submit file with the <span class="textbf">gce_json_file</span><a 
 id="dx56-479008"></a> command. The contents of the file
are inserted into HTCondor&#8217;s JSON description of the instance, between a comma and the closing
brace.
<!--l. 108--><p class="indent" >   Here&#8217;s a sample JSON file that sets two additional elements:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-909">
<tspan font-family="ectt" font-size="1000">"canIpForward":</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;True,</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">"description":</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"My</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;first</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;instance"</tspan>
</div>
<!--l. 113--><p class="nopar" >
<!--l. 116--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4800005.3.7"></a>GCE Configuration Variables</h5>
<!--l. 119--><p class="noindent" >The following configuration parameters are specific to the <span class="textbf">gce</span> grid type. The values listed here are the defaults.
Different values may be specified in the HTCondor configuration files.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-910">
<tspan font-family="ectt" font-size="0800">GCE_GAHP</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$(SBIN)/gce_gahp</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">GCE_GAHP_LOG</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;/tmp/GceGahpLog.$(USERNAME)</tspan>
</div>
<!--l. 128--><p class="nopar" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.8   </span> <a 
 id="x56-4810005.3.8"></a>The Azure Grid Type </h4>
<a 
 id="dx56-481001"></a>
<a 
 id="dx56-481002"></a>
<a 
 id="dx56-481003"></a>
<a 
 id="dx56-481004"></a>
<!--l. 9--><p class="noindent" >HTCondor jobs may be submitted to the Microsoft Azure cloud service. Azure is an on-line commercial service that
provides the rental of computers by the hour to run computational applications. It runs virtual machine
images that have been uploaded to Azure&#8217;s servers. More information about Azure is available at
<a 
href="https://azure.microsoft.com" >https://azure.microsoft.com</a>.
<!--l. 19--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4820005.3.8"></a>Azure Job Submission</h5>
<!--l. 22--><p class="noindent" >HTCondor jobs are submitted to the Azyre service with the <span class="textbf">grid</span> universe, setting the <span class="textbf">grid_resource</span><a 
 id="dx56-482001"></a> command to
<span class="textbf">azure</span>, followed by your Azure subscription id. The submit description file command will be similar
to:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-911">
<tspan font-family="ectt" font-size="1000">grid_resource</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;azure</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;4843bfe3-1ebe-423e-a6ea-c777e57700a9</tspan>
</div>
<!--l. 29--><p class="nopar" >
<!--l. 31--><p class="indent" >   Since the HTCondor job is a virtual machine image, most of the submit description file commands specifying
input or output files are not applicable. The <span class="textbf">executable</span><a 
 id="dx56-482002"></a> command is still required, but its value is ignored. It
identifies different jobs in the output of <span class="textit">condor_q</span>.
<!--l. 38--><p class="indent" >   The VM image for the job must already be registered a virtual machine image in Azure. In the submit
description file, provide the identifier for the image using the <span class="textbf">azure_image</span><a 
 id="dx56-482003"></a> command.
<!--l. 44--><p class="indent" >   This grid type requires granting HTCondor permission to use your Azure account. The easiest way to do this
is to use the <span class="textit">az</span> command-line tool distributed by Microsoft. Find <span class="textit">az</span> and documentation for it at
<a 
href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest" >https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest</a>. After installation of <span class="textit">az</span>, run <span class="textit">az login</span> and follow
its directions. Once done with that step, the tool will write authorization credentials in a file under your HOME
directory. HTCondor will use these credentials to communicate with Azure.
<!--l. 58--><p class="indent" >   You can also set up a service account in Azure for HTCondor to use. This lets you limit the level of acccess
HTCondor has to your Azure account. Instructions for creating a service account can be found here:
<a 
href="http://research.cs.wisc.edu/htcondor/gahp/AzureGAHPSetup.docx" >http://research.cs.wisc.edu/htcondor/gahp/AzureGAHPSetup.docx</a>.
<!--l. 65--><p class="indent" >   Once you have created a file containing the service account credentials, you can specify its location in the submit
description file using the <span class="textbf">azure_auth_file</span><a 
 id="dx56-482004"></a> command, as in the example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-912">
<tspan font-family="ectt" font-size="1000">azure_auth_file</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/auth-file</tspan>
</div>
<!--l. 71--><p class="nopar" >
<!--l. 73--><p class="indent" >   Azure allows the choice of different hardware configurations for instances to run on. Select which configuration to
use for the <span class="textbf">azure</span> grid type with the <span class="textbf">azure_size</span><a 
 id="dx56-482005"></a> submit description file command. HTCondor provides no
default.
<!--l. 79--><p class="indent" >   Azure has many locations where instances can be run (i.e. multiple data centers distributed throughout
the world). You can select which location to use with the <span class="textbf">azure_location</span><a 
 id="dx56-482006"></a> submit description file
command.
<!--l. 84--><p class="indent" >   Azure creates an administrator account within each instance, which you can log into remote via SSH. You can
select the name of the account with the <span class="textbf">azure_admin_username</span><a 
 id="dx56-482007"></a> command. You can supply the name of a file
containing an SSH public key that will allow access to the administrator account with the <span class="textbf">azure_admin_key</span><a 
 id="dx56-482008"></a>
command.
<!--l. 3--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.9   </span> <a 
 id="x56-4830005.3.9"></a>The cream Grid Type </h4>
<a 
 id="dx56-483001"></a>
<a 
 id="dx56-483002"></a>
<!--l. 8--><p class="noindent" >CREAM is a job submission interface being developed at INFN for the gLite software stack. The CREAM homepage
is <a 
href="http://grid.pd.infn.it/cream/" >http://grid.pd.infn.it/cream/</a>. The protocol is based on web services.
<!--l. 13--><p class="indent" >   The protocol requires an X.509 proxy for the job, so the submit description file command <span class="textbf">x509userproxy</span><a 
 id="dx56-483003"></a> will
be used.
<!--l. 17--><p class="indent" >   A CREAM resource specification is of the form:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-913">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cream</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;web-services-address&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;batch-system&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;queue-name&#x003E;</tspan>
</div>
<!--l. 21--><p class="nopar" > The <span class="obeylines-h"><span class="verb">&#x003C;web-services-address&#x003E;</span></span> appears the same for most servers, differing only in the host name,
as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-914">
<tspan font-family="ectt" font-size="1000">&#x003C;machinename[:port]&#x003E;/ce-cream/services/CREAM2</tspan>
</div>
<!--l. 27--><p class="nopar" > Future versions of HTCondor may require only the host name, filling in other aspects of the web service for the
user.
<!--l. 31--><p class="indent" >   The <span class="obeylines-h"><span class="verb">&#x003C;batch-system&#x003E;</span></span> is the name of the batch system that sits behind the CREAM server, into which it submits
the jobs. Normal values are <span class="obeylines-h"><span class="verb">pbs</span></span>, <span class="obeylines-h"><span class="verb">lsf</span></span>, and <span class="obeylines-h"><span class="verb">condor</span></span>.
<!--l. 36--><p class="indent" >   The <span class="obeylines-h"><span class="verb">&#x003C;queue-name&#x003E;</span></span> identifies which queue within the batch system should be used. Values for this will vary by
site, with no typical values.
<!--l. 40--><p class="indent" >   A full example for the specification of a CREAM <span class="textbf">grid_resource</span><a 
 id="dx56-483004"></a> is
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-915">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cream</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;https://cream-12.pd.infn.it:8443/ce-cream/services/CREAM2</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;pbs</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;cream_1</tspan>
</div>
<!--l. 45--><p class="nopar" > This is a single line within the submit description file, although it is shown here on two lines for formatting
reasons.
<!--l. 50--><p class="indent" >   CREAM uses ClassAd syntax to describe jobs, although the attributes used are different than those for
HTCondor. The submit description file command <span class="textbf">cream_attributes</span><a 
 id="dx56-483005"></a> adds additional attributes to the
CREAM-style job ClassAd that HTCondor constructs. The format for this submit description file command
is
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-916">
<tspan font-family="ectt" font-size="1000">cream_attributes</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;name=value;name=value</tspan>
</div>
<!--l. 59--><p class="nopar" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.10   </span> <a 
 id="x56-4840005.3.10"></a>The BOINC Grid Type </h4>
<a 
 id="dx56-484001"></a>
<a 
 id="dx56-484002"></a>
<a 
 id="dx56-484003"></a>
<a 
 id="dx56-484004"></a>
<!--l. 9--><p class="noindent" >HTCondor jobs may be submitted to BOINC (Berkeley Open Infrastructure for Network Computing) servers.
BOINC is a software system for volunteer computing. More information about BOINC is available at
<a 
href="http://boinc.berkeley.edu/" >http://boinc.berkeley.edu/</a>.
<!--l. 16--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4850005.3.10"></a>BOINC Job Submission</h5>
<!--l. 19--><p class="noindent" >HTCondor jobs are submitted to a BOINC service with the <span class="textbf">grid</span> universe, setting the <span class="textbf">grid_resource</span><a 
 id="dx56-485001"></a> command to
<span class="textbf">boinc</span>, followed by the service&#8217;s URL.
<!--l. 24--><p class="indent" >   To use this grid type, you must have an account on the BOINC server that is authorized to submit jobs. Provide
the authenticator string for that account for HTCondor to use. Write the authenticator string in a file and specify
its location in the submit description file using the <span class="textbf">boinc_authenticator_file</span><a 
 id="dx56-485002"></a> command, as in the
example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-917">
<tspan font-family="ectt" font-size="1000">boinc_authenticator_file</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;/path/to/auth-file</tspan>
</div>
<!--l. 33--><p class="nopar" >
<!--l. 35--><p class="indent" >   Before submitting BOINC jobs, register the application with the BOINC server. This includes describing the
application&#8217;s resource requirements and input and output files, and placing application files on the
server. This is a manual process that is done on the BOINC server. See the BOINC documentation for
details.
<!--l. 42--><p class="indent" >   In the submit description file, the <span class="textbf">executable</span><a 
 id="dx56-485003"></a> command gives the registered name of the application on the
BOINC server. Input and output files can be described as in the vanilla universe, but the file names must match the
application description on the BOINC server. If <span class="textbf">transfer_output_files</span><a 
 id="dx56-485004"></a> is omitted, then all output files are
transferred.
<!--l. 51--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4860005.3.10"></a>BOINC Configuration Variables</h5>
<!--l. 54--><p class="noindent" >The following configuration variable is specific to the <span class="textbf">boinc</span> grid type. The value listed here is the default. A
different value may be specified in the HTCondor configuration files.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-918">
<tspan font-family="ectt" font-size="0800">BOINC_GAHP</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$(SBIN)/boinc_gahp</tspan>
</div>
<!--l. 62--><p class="nopar" >
   <h4 class="subsectionHead"><span class="titlemark">5.3.11   </span> <a 
 id="x56-4870005.3.11"></a>Matchmaking in the Grid Universe</h4>
<a 
 id="dx56-487001"></a>
<a 
 id="dx56-487002"></a>
<!--l. 7--><p class="noindent" >In a simple usage, the grid universe allows users to specify a single grid site as a destination for jobs. This is
sufficient when a user knows exactly which grid site they wish to use, or a higher-level resource broker (such as the
European Data Grid&#8217;s resource broker) has decided which grid site should be used.
<!--l. 15--><p class="indent" >   When a user has a variety of grid sites to choose from, HTCondor allows matchmaking of grid universe jobs to
decide which grid resource a job should run on. Please note that this form of matchmaking is relatively new. There
are some rough edges as continual improvement occurs.
<!--l. 21--><p class="indent" >   To facilitate HTCondor&#8217;s matching of jobs with grid resources, both the jobs and the grid resources are involved.
The job&#8217;s submit description file provides all commands needed to make the job work on a matched grid resource.
The grid resource identifies itself to HTCondor by advertising a ClassAd. This ClassAd specifies all necessary
attributes, such that HTCondor can properly make matches. The grid resource identification is accomplished by
using <span class="textit">condor_advertise</span> to send a ClassAd representing the grid resource, which is then used by HTCondor to make
matches.
<!--l. 35--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4880005.3.11"></a>Job Submission</h5>
<!--l. 38--><p class="noindent" >To submit a grid universe job intended for a single, specific <span class="textbf">gt2</span> resource, the submit description file for the job
explicitly specifies the resource:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-919">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid.example.com/jobmanager-pbs</tspan>
</div>
<!--l. 46--><p class="nopar" >
<!--l. 49--><p class="indent" >   If there were multiple <span class="textbf">gt2</span> resources that might be matched to the job, the submit description file
changes:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-920">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$$(resource_name)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;TARGET.resource_name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=!=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;UNDEFINED</tspan>
</div>
<!--l. 57--><p class="nopar" >
<!--l. 60--><p class="indent" >   The <span class="textbf">grid_resource</span><a 
 id="dx56-488001"></a> command uses a substitution macro. The substitution macro defines the value of
<span class="texttt">resource_name</span> using attributes as specified by the matched grid resource. The <span class="textbf">requirements</span><a 
 id="dx56-488002"></a> command further
restricts that the job may only run on a machine (grid resource) that defines <span class="texttt">grid_resource</span>. Note that this
attribute name is invented for this example. To make matchmaking work in this way, both the job (as used here
within the submit description file) and the grid resource (in its created and advertised ClassAd) must agree upon
the name of the attribute.
<!--l. 74--><p class="indent" >   As a more complex example, consider a job that wants to run not only on a <span class="textbf">gt2</span> resource, but on one that has
the Bamboozle software installed. The complete submit description file might appear:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-921">
<tspan font-family="ectt" font-size="0800">universe</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">executable</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;analyze_bamboozle_data</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">output</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;aaa.$(Cluster).out</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">error</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;aaa.$(Cluster).err</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">log</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;aaa.log</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$$(resource_name)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(TARGET.HaveBamboozle</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;True)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(TARGET.resource_name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=!=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;UNDEFINED)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">queue</tspan>
</div>
<!--l. 91--><p class="nopar" >
<!--l. 94--><p class="indent" >   Any grid resource which has the <span class="texttt">HaveBamboozle</span> attribute defined as well as set to <span class="texttt">True</span> is further checked to
have the <span class="texttt">resource_name</span> attribute defined. Where this occurs, a match may be made (from the job&#8217;s point of view).
A grid resource that has one of these attributes defined, but not the other results in no match being
made.
<!--l. 103--><p class="indent" >   Note that the entire value of <span class="textbf">grid_resource</span> comes from the grid resource&#8217;s ad. This means that the job can be
matched with a resource of any type, not just <span class="textbf">gt2</span>.
<!--l. 108--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4890005.3.11"></a>Advertising Grid Resources to HTCondor</h5>
<!--l. 111--><p class="noindent" >Any grid resource that wishes to be matched by HTCondor with a job must advertise itself to HTCondor using a
ClassAd. To properly advertise, a ClassAd is sent periodically to the <span class="textit">condor_collector</span> daemon. A ClassAd is a list
of pairs, where each pair consists of an attribute name and value that describes an entity. There are two entities
relevant to HTCondor: a job, and a machine. A grid resource is a machine. The ClassAd describes the grid resource,
as well as identifying the capabilities of the grid resource. It may also state both requirements and
preferences (called <span class="textbf">rank</span><a 
 id="dx56-489001"></a>) for the jobs it will run. See Section&#x00A0;<a 
href="MatchmakingwithClassAds.html#x15-150002.3">2.3<!--tex4ht:ref: sec:matchmaking-with-classads --></a> for an overview of the interaction between
matchmaking and ClassAds. A list of common machine ClassAd attributes is given in the Appendix on
page&#x00A0;<a 
href="MachineClassAdAttributes.html#x171-1235000A.3">2397<!--tex4ht:ref: sec:Machine-ClassAd-Attributes --></a>.
<!--l. 130--><p class="indent" >   To advertise a grid site, place the attributes in a file. Here is a sample ClassAd that describes a grid resource
that is capable of running a <span class="textbf">gt2</span> job.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-922">
<tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;example</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ClassAd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;a</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;job</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MyType</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Machine"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">TargetType</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Job"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Example1_Gatekeeper"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Machine</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Example1_Gatekeeper"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">resource_name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid.example.com/jobmanager-pbs"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">UpdateSequenceNumber</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(TARGET.JobUniverse</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;9)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Rank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.000000</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">CurrentRank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.000000</tspan>
</div>
<!--l. 148--><p class="nopar" >
<!--l. 153--><p class="indent" >   Some attributes are defined as expressions, while others are integers, floating point values, or strings. The type is
important, and must be correct for the ClassAd to be effective. The attributes
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-923">
<tspan font-family="ectt" font-size="1000">MyType</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"Machine"</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">TargetType</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"Job"</tspan>
</div>
<!--l. 161--><p class="nopar" > identify the grid resource as a machine, and that the machine is to be matched with a job. In HTCondor, machines
are matched with jobs, and jobs are matched with machines. These attributes are strings. Strings are surrounded by
double quote marks.
<!--l. 169--><p class="indent" >   The attributes <span class="texttt">Name</span> and <span class="texttt">Machine</span> are likely to be defined to be the same string value as in the
example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-924">
<tspan font-family="ectt" font-size="0800">Name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Example1_Gatekeeper"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Machine</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Example1_Gatekeeper"</tspan>
</div>
<!--l. 176--><p class="nopar" >
<!--l. 179--><p class="indent" >   Both give the fully qualified host name for the resource. The <span class="texttt">Name</span> may be different on an SMP machine, where
the individual CPUs are given names that can be distinguished from each other. Each separate grid resource must
have a unique name.
<!--l. 185--><p class="indent" >   Where the job depends on the resource to specify the value of the <span class="textbf">grid_resource</span><a 
 id="dx56-489002"></a> command by the use of the
substitution macro, the ClassAd for the grid resource (machine) defines this value. The example given
as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-925">
<tspan font-family="ectt" font-size="0800">grid_resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid.example.com/jobmanager-pbs"</tspan>
</div>
<!--l. 194--><p class="nopar" > defines this value. Note that the invented name of this variable must match the one utilized within the submit
description file. To make the matchmaking work, both the job (as used within the submit description
file) and the grid resource (in this created and advertised ClassAd) must agree upon the name of the
attribute.
<!--l. 204--><p class="indent" >   A machine&#8217;s ClassAd information can be time sensitive, and may change over time. Therefore, ClassAds expire
and are thrown away. In addition, the communication method by which ClassAds are sent implies that entire ads
may be lost without notice or may arrive out of order. Out of order arrival leads to the definition of
an attribute which provides an ordering. This positive integer value is given in the example ClassAd
as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-926">
<tspan font-family="ectt" font-size="0800">UpdateSequenceNumber</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4</tspan>
</div>
<!--l. 217--><p class="nopar" > This value must increase for each subsequent ClassAd. If state information for the ClassAd is kept in a file, a script
executed each time the ClassAd is to be sent may use a counter for this value. An alternative for a stateless
implementation sends the current time in seconds (since the epoch, as given by the C time() function
call).
<!--l. 227--><p class="indent" >   The requirements that the grid resource sets for any job that it will accept are given as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-927">
<tspan font-family="ectt" font-size="0800">Requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(TARGET.JobUniverse</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;9)</tspan>
</div>
<!--l. 232--><p class="nopar" > This set of requirements state that any job is required to be for the <span class="textbf">grid</span> universe.
<!--l. 237--><p class="indent" >   The attributes
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-928">
<tspan font-family="ectt" font-size="0800">Rank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.000000</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">CurrentRank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.000000</tspan>
</div>
<!--l. 242--><p class="nopar" > are both necessary for HTCondor&#8217;s negotiation to proceed, but are not relevant to grid matchmaking. Set both to
the floating point value 0.0.
<!--l. 249--><p class="indent" >   The example machine ClassAd becomes more complex for the case where the grid resource allows matches with
more than one job:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-929">
<tspan font-family="ectt" font-size="0800">#</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;example</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;resource</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;ClassAd</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;for</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;a</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;job</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">MyType</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Machine"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">TargetType</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Job"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Example1_Gatekeeper"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Machine</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"Example1_Gatekeeper"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">resource_name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"gt2</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;grid.example.com/jobmanager-pbs"</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">UpdateSequenceNumber</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(CurMatches</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;10)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(TARGET.JobUniverse</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;9)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Rank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.000000</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">CurrentRank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;0.000000</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">WantAdRevaluate</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;True</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">CurMatches</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1</tspan>
</div>
<!--l. 266--><p class="nopar" >
<!--l. 269--><p class="indent" >   In this example, the two attributes <span class="texttt">WantAdRevaluate</span> and <span class="texttt">CurMatches</span> appear, and the <span class="texttt">Requirements</span> expression
has changed.
<!--l. 273--><p class="indent" >   <span class="texttt">WantAdRevaluate</span> is a boolean value, and may be set to either <span class="texttt">True</span> or <span class="texttt">False</span>. When <span class="texttt">True</span> in the ClassAd and a
match is made (of a job to the grid resource), the machine (grid resource) is not removed from the set of machines
to be considered for further matches. This implements the ability for a single grid resource to be matched to more
than one job at a time. Note that the spelling of this attribute is incorrect, and remains incorrect to maintain
backward compatibility.
<!--l. 284--><p class="indent" >   To limit the number of matches made to the single grid resource, the resource must have the ability to keep track
of the number of HTCondor jobs it has. This integer value is given as the <span class="texttt">CurMatches</span> attribute in the
advertised ClassAd. It is then compared in order to limit the number of jobs matched with the grid
resource.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-930">
<tspan font-family="ectt" font-size="0800">Requirements</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(CurMatches</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;10)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(TARGET.JobUniverse</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;9)</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">CurMatches</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1</tspan>
</div>
<!--l. 295--><p class="nopar" >
<!--l. 298--><p class="indent" >   This example assumes that the grid resource already has one job, and is willing to accept a maximum of 9 jobs.
If <span class="texttt">CurMatches</span> does not appear in the ClassAd, HTCondor uses a default value of 0.
<a 
 id="dx56-489003"></a>
<a 
 id="dx56-489004"></a>
<a 
 id="dx56-489005"></a>
<a 
 id="dx56-489006"></a>
<!--l. 305--><p class="indent" >   For multiple matching of a site ClassAd to work correctly, it is also necessary to add the following to the
configuration file read by the <span class="textit">condor_negotiator</span>:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-931">
<tspan font-family="ectt" font-size="1000">NEGOTIATOR_MATCHLIST_CACHING</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;False</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">NEGOTIATOR_IGNORE_USER_PRIORITIES</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;True</tspan>
</div>
<!--l. 312--><p class="nopar" >
<!--l. 320--><p class="indent" >   This ClassAd (likely in a file) is to be periodically sent to the <span class="textit">condor_collector</span> daemon using <span class="textit">condor_advertise</span>.
A recommended implementation uses a script to create or modify the ClassAd together with <span class="textit">cron</span> to send the
ClassAd every five minutes. The <span class="textit">condor_advertise</span> program must be installed on the machine sending the ClassAd,
but the remainder of HTCondor does not need to be installed. The required argument for the <span class="textit">condor_advertise</span>
command is <span class="textit">UPDATE_STARTD_AD</span>.
<!--l. 333--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x56-4900005.3.11"></a>Advanced usage</h5>
<!--l. 336--><p class="noindent" >What if a job fails to run at a grid site due to an error? It will be returned to the queue, and HTCondor will
attempt to match it and re-run it at another site. HTCondor isn&#8217;t very clever about avoiding sites that may be bad,
but you can give it some assistance. Let&#8217;s say that you want to avoid running at the last grid site you ran at. You
could add this to your job description:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-932">
<tspan font-family="ectt" font-size="0800">match_list_length</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">Rank</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;TARGET.Name</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;!=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;LastMatchName0</tspan>
</div>
<!--l. 347--><p class="nopar" >
<!--l. 350--><p class="indent" >   This will prefer to run at a grid site that was not just tried, but it will allow the job to be run there if there is no
other option.
<!--l. 353--><p class="indent" >   When you specify <span class="textbf">match_list_length</span>, you provide an integer N, and HTCondor will keep track of the last N
matches. The oldest match will be LastMatchName0, and next oldest will be LastMatchName1, and so on. (See the
<span class="textit">condor_submit</span> manual page for more details.) The Rank expression allows you to specify a numerical ranking for
different matches. When combined with <span class="textbf">match_list_length</span>, you can prefer to avoid sites that you have already
run at.
<!--l. 361--><p class="indent" >   In addition, <span class="textit">condor_submit</span> has two options to help control grid universe job resubmissions and rematching. See
the definitions of the submit description file commands <span class="textbf">globus_resubmit</span> and <span class="textbf">globus_rematch</span> at page <a 
href="Condorsubmit.html#x149-108400012">2190<!--tex4ht:ref: condor-submit-globus-rematch --></a> and
page <a 
href="Condorsubmit.html#x149-108400012">2190<!--tex4ht:ref: condor-submit-globus-resubmit --></a>. These options are independent of <span class="textbf">match_list_length</span>.
<!--l. 369--><p class="indent" >   There are some new attributes that will be added to the Job ClassAd, and may be useful to you when you write
your rank, requirements, globus_resubmit or globus_rematch option. Please refer to the Appendix on page&#x00A0;<a 
href="JobClassAdAttributes.html#x170-1234000A.2">2351<!--tex4ht:ref: sec:Job-ClassAd-Attributes --></a> to
see a list containing the following attributes:
     <ul class="itemize1">
     <li class="itemize">NumJobMatches
     </li>
     <li class="itemize">NumGlobusSubmits
     </li>
     <li class="itemize">NumSystemHolds
     </li>
     <li class="itemize">HoldReason
     </li>
     <li class="itemize">ReleaseReason
     </li>
     <li class="itemize">EnteredCurrentStatus
     </li>
     <li class="itemize">LastMatchTime
     </li>
     <li class="itemize">LastRejMatchTime
                                                                                         

                                                                                         
     </li>
     <li class="itemize">LastRejMatchReason</li></ul>
<!--l. 387--><p class="indent" >   The following example of a command within the submit description file releases jobs 5 minutes after being held,
increasing the time between releases by 5 minutes each time. It will continue to retry up to 4 times per Globus
submission, plus 4. The plus 4 is necessary in case the job goes on hold before being submitted to Globus, although
this is unlikely.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-933">
<tspan font-family="ectt" font-size="0800">periodic_release</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;NumSystemHolds</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;((NumGlobusSubmits</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;*</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;+</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;\</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(NumGlobusSubmits</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003C;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;\</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;HoldReason</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;!=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"via</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;condor_hold</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(by</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;user</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;$ENV(USER))"</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&amp;&amp;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;\</tspan>
<tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;((time()</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;EnteredCurrentStatus)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;&#x003E;</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;NumSystemHolds</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;*60*5</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;))</tspan>
</div>
<!--l. 402--><p class="nopar" >
<!--l. 405--><p class="indent" >   The following example forces Globus resubmission after a job has been held 4 times per Globus
submission.
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-934">
<tspan font-family="ectt" font-size="0800">globus_resubmit</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;=</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;NumSystemHolds</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;==</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;(NumGlobusSubmits</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;+</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;1)</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;*</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;4</tspan>
</div>
<!--l. 411--><p class="nopar" >
<!--l. 414--><p class="indent" >   If you are concerned about unknown or malicious grid sites reporting to your <span class="textit">condor_collector</span>, you should use
HTCondor&#8217;s security options, documented in Section&#x00A0;<a 
href="Security.html#x36-2680003.8">3.8<!--tex4ht:ref: sec:Security --></a>.
                                                                                         

                                                                                         
<!--l. 2--><p class="indent" >   <span style="font-size: 200%;"><a 
href="ConnectingHTCondorPoolswithFlocking.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ConnectingHTCondorPoolswithFlocking.html#tailConnectingHTCondorPoolswithFlocking.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="TheGridUniverse.html" >&#x2191;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="GridComputing.html#TheGridUniverse.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="TheHTCondorJobRouter.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><a 
 id="tailTheGridUniverse.html"></a>  
</body></html> 
