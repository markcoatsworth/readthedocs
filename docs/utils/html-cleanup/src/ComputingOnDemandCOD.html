<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Computing On Demand (COD)</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- 3,sec-filename,next,info,NoFonts,fonts,html --> 
<meta name="src" content="ref.tex"> 
<link rel="stylesheet" type="text/css" href="ref.css"> 
</head><body 
>
   <span style="font-size: 200%;"><a 
href="HTCondorsCheckpointMechanism.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="HTCondorsCheckpointMechanism.html#tailHTCondorsCheckpointMechanism.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="#tailComputingOnDemandCOD.html">&#x2193;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="MiscellaneousConcepts.html#ComputingOnDemandCOD.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="Hooks.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><h3 class="sectionHead"><span class="titlemark">4.3   </span> <a 
 id="x50-4200004.3"></a>Computing On Demand (COD)</h3>
   <div class="sectionTOCS">
   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3.1 <a 
href="#x50-4210004.3.1"> Overview of How COD Works</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3.2 <a 
href="#x50-4220004.3.2"> Authorizing Users to Create and Manage COD Claims</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3.3 <a 
href="#x50-4230004.3.3"> Defining a COD Application</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4240004.3.3" id="QQ2-50-447"> COD Application Attributes</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4250004.3.3" id="QQ2-50-448"> Defining Attributes in the HTCondor Configuration Files</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4260004.3.3" id="QQ2-50-449"> Defining Attributes with the <span class="textit">condor_cod</span> Tool</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3.4 <a 
href="#x50-4270004.3.4"> Managing COD Resource Claims</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4280004.3.4" id="QQ2-50-451">Request</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4290004.3.4" id="QQ2-50-452">Activate</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4300004.3.4" id="QQ2-50-453">Suspend</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4310004.3.4" id="QQ2-50-454">Renew</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4320004.3.4" id="QQ2-50-455">Resume</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4330004.3.4" id="QQ2-50-456">Deactivate</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4340004.3.4" id="QQ2-50-457">Release</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" ><a 
href="#x50-4350004.3.4" id="QQ2-50-458">Delegate proxy</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3.5 <a 
href="#x50-4360004.3.5">Limitations of COD Support in HTCondor</a></span>
   </div>
<a 
 id="dx50-420001"></a>
<a 
 id="dx50-420002"></a>
<a 
 id="dx50-420003"></a>
<!--l. 8--><p class="indent" >   Computing On Demand (COD) extends HTCondor&#8217;s high throughput computing abilities to include a method
for running short-term jobs on instantly-available resources.
                                                                                         

                                                                                         
<!--l. 12--><p class="indent" >   The motivation for COD extends HTCondor&#8217;s job management to include interactive, compute-intensive jobs,
giving these jobs immediate access to the compute power they need over a relatively short period of time. COD
provides computing power <span class="emph">on demand</span>, switching predefined resources from working on HTCondor jobs to working
on the COD jobs. These COD jobs (applications) cannot use the batch scheduling functionality of HTCondor, since
the COD jobs require interactive response-time. Many of the applications that are well-suited to HTCondor&#8217;s COD
capabilities involve a cycle: application blocked on user input, computation burst to compute results,
block again on user input, computation burst, etc. When the resources are not being used for the
bursts of computation to service the application, they should continue to execute long-running batch
jobs.
<!--l. 31--><p class="indent" >   Here are examples of applications that may benefit from COD capability:
     <ul class="itemize1">
     <li class="itemize">A giant spreadsheet with a large number of highly complex formulas which take a lot of compute power
     to recalculate. The spreadsheet application (as a COD application) predefines a claim on resources
     within the HTCondor pool. When the user presses a <span class="obeylines-h"><span class="verb">recalculate</span></span> button, the predefined HTCondor
     resources  (nodes)  work  on  the  computation  and  send  the  results  back  to  the  master  application
     providing the user interface and displaying the data. Ideally, while the user is entering new data or
     modifying formulas, these nodes work on non-COD jobs.
     </li>
     <li class="itemize">A graphics rendering application that waits for user input to select an image to render. The rendering
     requires a huge burst of computation to produce the image. Examples are various Computer-Aided
     Design (CAD) tools, fractal rendering programs, and ray-tracing tools.
     </li>
     <li class="itemize">Visualization tools for data mining.
     </li></ul>
<!--l. 59--><p class="indent" >   The way HTCondor helps these kinds of applications is to provide an infrastructure to use HTCondor batch
resources for the types of compute nodes described above. HTCondor does <span class="emph">NOT</span> provide tools to parallelize existing
GUI applications. The COD functionality is an interface to allow these compute nodes to interact with
long-running HTCondor batch jobs. The user provides both the compute node applications and the
interactive master application that controls them. HTCondor only provides a mechanism to allow
these interactive (and often parallelized) applications to seamlessly interact with the HTCondor batch
system.
<!--l. 75--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3.1   </span> <a 
 id="x50-4210004.3.1"></a> Overview of How COD Works</h4>
<a 
 id="dx50-421001"></a>
<!--l. 79--><p class="noindent" >The resources of an HTCondor pool (nodes) run jobs. When a high-priority COD job appears at a node,
                                                                                         

                                                                                         
the lower-priority (currently running) batch job is suspended. The COD job runs immediately, while
the batch job remains suspended. When the COD job completes, the batch job instantly resumes
execution.
<!--l. 87--><p class="indent" >   Administratively, an interactive COD application puts claims on nodes. While the COD application does not
need the nodes to run the COD jobs, the claims are suspended, allowing batch jobs to run.
<!--l. 95--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3.2   </span> <a 
 id="x50-4220004.3.2"></a> Authorizing Users to Create and Manage COD Claims</h4>
<a 
 id="dx50-422001"></a>
<!--l. 99--><p class="noindent" >Claims on nodes are assigned to users. A user with a claim on a resource can then suspend and resume a COD job
at will. This gives the user a great deal of power on the claimed resource, even if it is owned by another user.
Because of this, it is essential that users allowed to claim COD resources can be trusted not to abuse this
power. Users are authorized to have access to the privilege of creating and using a COD claim on a
machine. This privilege is granted when the HTCondor administrator places a given user name in the
<span class="texttt">VALID_COD_USERS</span> <a 
 id="dx50-422002"></a><a 
 id="dx50-422003"></a> list in the HTCondor configuration for the machine (usually in a local configuration
file).
<!--l. 113--><p class="indent" >   In addition, the tools to request and manage COD claims require that the user issuing the commands be
authenticated. Use one of the strong authentication methods described in section&#x00A0;<a 
href="Security.html#x36-2690003.8.1">3.8.1<!--tex4ht:ref: sec:Security-Model --></a> on HTCondor&#8217;s Security
Model. If one of these methods cannot be used, then file system authentication may be used when directly logging in
to that machine (to be claimed) and issuing the command locally.
<!--l. 131--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3.3   </span> <a 
 id="x50-4230004.3.3"></a> Defining a COD Application</h4>
<a 
 id="dx50-423001"></a>
<!--l. 135--><p class="noindent" >To run an application on a claimed COD resource, an authorized user defines characteristics of the application.
Examples of characteristics are the executable or script to use, the directory in which to run the application,
command-line arguments, and files to use for standard input and output. COD users specify a ClassAd that
describes these characteristics for their application. There are two ways for a user to define a COD application&#8217;s
ClassAd:
<!--l. 146--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x50-423003x1">in the HTCondor configuration files of the COD resources
     </li>
     <li 
  class="enumerate" id="x50-423005x2">when they use the <span class="textit">condor_cod</span> command-line tool to launch the application itself</li></ol>
                                                                                         

                                                                                         
<!--l. 152--><p class="indent" >   These two methods for defining the ClassAd can be used together. For example, the user can define some
attributes in the configuration file, and only provide a few dynamically defined attributes with the <span class="textit">condor_cod</span>
tool.
<!--l. 157--><p class="indent" >   Independent of how the COD application&#8217;s ClassAd is defined, the application&#8217;s executable and input data must
be pre-staged at the node. This is a current limitation of HTCondor&#8217;s support. There is no mechanism to transfer
files for a COD application, and all I/O must be handled locally or put onto a network file system that is accessible
by a node.
<!--l. 165--><p class="indent" >   The following three sections detail defining the attributes. The first lists the attributes that can be used to define
a COD application. The second describes how to define these attributes in an HTCondor configuration file. The
third explains how to define these attributes using the <span class="textit">condor_cod</span> tool.
<!--l. 175--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4240004.3.3"></a> COD Application Attributes</h5>
<a 
 id="dx50-424001"></a>
<a 
 id="dx50-424002"></a>
<!--l. 181--><p class="noindent" >Attributes for a COD application are either required or optional. The following attributes are <span class="emph">required</span>:
<a 
 id="dx50-424003"></a>
     <dl class="description"><dt class="description">
<span class="texttt">Cmd</span> </dt><dd 
class="description">This attribute <a 
 id="dx50-424004"></a>defines the full path to the executable program to be run as a COD application. Since
     HTCondor does not currently provide any mechanism to transfer files on behalf of COD applications,
     this path should be a valid path on the machine where the application will be run. It is a string
     attribute, and must therefore be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>). There is no default.
     </dd><dt class="description">
<span class="texttt">Owner</span> </dt><dd 
class="description">If the <span class="textit">condor_startd</span> daemon is executing as root on <a 
 id="dx50-424005"></a>the resource where a COD application will run,
     the user must also define <span class="texttt">Owner</span> to specify what user name the application will run as. On Windows, the
     <span class="textit">condor_startd</span> daemon always runs as an Administrator service, which is equivalent to running as root
     on Unix platforms. If the user specifies any COD application attributes with the <span class="textit">condor_cod</span> <span class="textit">activate</span>
     command-line tool, the <span class="texttt">Owner</span> attribute will be defined as the user name that ran <span class="textit">condor_cod</span> <span class="textit">activate</span>.
     However, if the user defines all attributes of their COD application in the HTCondor configuration
     files, and does not define any attributes with the <span class="textit">condor_cod</span> <span class="textit">activate</span> command-line tool, there is no
     default, and <span class="texttt">Owner</span> must be specified in the configuration file. <span class="texttt">Owner</span> must contain a valid user name
     on the given COD resource. It is a string attribute, and must therefore be enclosed in quotation marks
     (<span class="obeylines-h"><span class="verb">"</span></span>).
     </dd><dt class="description">
<span class="texttt">RequestCpus</span> </dt><dd 
class="description">Required  when  running  on  a  <span class="textit">condor_startd</span> <a 
 id="dx50-424006"></a>that  uses  partitionable  slots.  It  specifies  the
     number of CPU cores from the partitionable slot allocated for this job.
                                                                                         

                                                                                         
     </dd><dt class="description">
<span class="texttt">RequestDisk</span> </dt><dd 
class="description">Required when running on a <span class="textit">condor_startd</span> <a 
 id="dx50-424007"></a>that uses partitionable slots. It specifies the disk
     space, in Megabytes, from the partitionable slot allocated for this job.
     </dd><dt class="description">
<span class="texttt">RequestMemory</span> </dt><dd 
class="description">Required when running on a <span class="textit">condor_startd</span> <a 
 id="dx50-424008"></a>that uses partitionable slots. It specifies the
     memory, in Megabytes, from the partitionable slot allocated for this job.
     </dd></dl>
<a 
 id="dx50-424009"></a>
<a 
 id="dx50-424010"></a>
<!--l. 244--><p class="indent" >   The following list of attributes are <span class="emph">optional</span>:
     <dl class="description"><dt class="description">
<span class="texttt">JobUniverse</span> </dt><dd 
class="description">This attribute defines what HTCondor job <a 
 id="dx50-424011"></a>universe to use for the given COD application. The
     only tested universes are vanilla and java. This attribute must be an integer, with vanilla using the
     value 5, and java using the value 10.
     </dd><dt class="description">
<span class="texttt">IWD</span> </dt><dd 
class="description">IWD is an acronym for Initial Working Directory. <a 
 id="dx50-424012"></a>It defines the full path to the directory where a
     given COD application are to be run. Unless the application changes its current working directory, any
     relative path names used by the application will be relative to the IWD. If any other attributes that
     define file names (for example, <span class="texttt">In</span>, <span class="texttt">Out</span>, and so on) do not contain a full path, the <span class="texttt">IWD</span> will automatically
     be pre-pended to those file names. It is a string attribute, and must therefore be enclosed in quotation
     marks (<span class="obeylines-h"><span class="verb">"</span></span>). If the <span class="texttt">IWD</span> is not specified, the temporary execution sandbox created by the <span class="textit">condor_starter</span>
     will be used as the initial working directory.
     </dd><dt class="description">
<span class="texttt">In</span> </dt><dd 
class="description">This string defines the path to the file on the <a 
 id="dx50-424013"></a>COD resource that should be used as standard input
     (<span class="texttt">stdin</span>) for the COD application. This file (and all parent directories) must be readable by whatever
     user the COD application will run as. If not specified, the default is <span class="texttt">/dev/null</span>. It is a string attribute,
     and must therefore be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
     </dd><dt class="description">
<span class="texttt">Out</span> </dt><dd 
class="description">This string defines the path to the file on the <a 
 id="dx50-424014"></a>COD resource that should be used as standard output
     (<span class="texttt">stdout</span>) for the COD application. This file must be writable (and all parent directories readable) by
     whatever user the COD application will run as. If not specified, the default is <span class="texttt">/dev/null</span>. It is a string
     attribute, and must therefore be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
     </dd><dt class="description">
<span class="texttt">Err</span> </dt><dd 
class="description">This string defines the path to the file on the <a 
 id="dx50-424015"></a>COD resource that should be used as standard error
     (<span class="texttt">stderr</span>) for the COD application. This file must be writable (and all parent directories readable) by
     whatever user the COD application will run as. If not specified, the default is <span class="texttt">/dev/null</span>. It is a string
     attribute, and must therefore be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
                                                                                         

                                                                                         
     </dd><dt class="description">
<span class="texttt">Env</span> </dt><dd 
class="description">This  string  defines  environment  variables  to  <a 
 id="dx50-424016"></a>set  for  a  given  COD  application.  Each  environment
     variable has the form <span class="obeylines-h"><span class="verb">NAME=value</span></span>. Multiple variables are delimited with a semicolon. An example:
     <span class="obeylines-h"><span class="verb">Env&#x00A0;=&#x00A0;"PATH=/usr/local/bin:/usr/bin;TERM=vt100"</span></span> It is a string attribute, and must therefore be
     enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
     </dd><dt class="description">
<span class="texttt">Args</span> </dt><dd 
class="description">This string attribute defines the list of <a 
 id="dx50-424017"></a>arguments to be supplied to the program on the command-line.
     The arguments are delimited (separated) by space characters. There is no default. If the <span class="texttt">JobUniverse</span>
     corresponds to the Java universe, the first argument must be the name of the class containing <span class="texttt">main</span>. It
     is a string attribute, and must therefore be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
     </dd><dt class="description">
<span class="texttt">JarFiles</span> </dt><dd 
class="description">This string attribute is only used if <a 
 id="dx50-424018"></a><span class="texttt">JobUniverse</span> is 10 (the Java universe). If a given COD
     application is a Java program, specify the JAR files that the program requires with this attribute.
     There is no default. It is a string attribute, and must therefore be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
     Multiple file names may be delimited with either commas or white space characters, and therefore, file
     names can not contain spaces.
     </dd><dt class="description">
<span class="texttt">KillSig</span> </dt><dd 
class="description">This  attribute  specifies  what  signal  should  be  <a 
 id="dx50-424019"></a>sent  whenever  the  HTCondor  system  needs  to
     gracefully shutdown the COD application. It can either be specified as a string containing the signal
     name (for example <span class="obeylines-h"><span class="verb">KillSig&#x00A0;=&#x00A0;"SIGQUIT"</span></span>), or as an integer (<span class="obeylines-h"><span class="verb">KillSig&#x00A0;=&#x00A0;3</span></span>) The default is to use
     SIGTERM.
     </dd><dt class="description">
<span class="texttt">StarterUserLog</span> </dt><dd 
class="description">This string specifies a file name for a <a 
 id="dx50-424020"></a>log file that the <span class="textit">condor_starter</span> daemon can write
     with entries for relevant events in the life of a given COD application. It is similar to the job event log
     file specified for regular HTCondor jobs with the <span class="textbf">Log</span><a 
 id="dx50-424021"></a> command in a submit description file. However,
     certain attributes that are placed in a job event log do not make sense in the COD environment, and
     are therefore omitted. The default is not to write this log file. It is a string attribute, and must therefore
     be enclosed in quotation marks (<span class="obeylines-h"><span class="verb">"</span></span>).
     </dd><dt class="description">
<span class="texttt">StarterUserLogUseXML</span> </dt><dd 
class="description">If the <span class="texttt">StarterUserLog</span> <a 
 id="dx50-424022"></a>attribute is defined, the default format is a human-readable
     format. However, HTCondor can write out this log in an XML representation, instead. To enable the
     XML format for this job event log, the <span class="texttt">StarterUserLogUseXML</span> boolean is set to <span class="obeylines-h"><span class="verb">TRUE</span></span>. The default if
     not specified is <span class="obeylines-h"><span class="verb">FALSE</span></span>.
     </dd></dl>
<!--l. 369--><p class="indent" >   If any attribute that specifies a path (<span class="texttt">Cmd</span>, <span class="texttt">In</span>, <span class="texttt">Out</span>,<span class="texttt">Err</span>, <span class="texttt">StarterUserLog</span>) is not a full path name, HTCondor
automatically prepends the value of <span class="texttt">IWD</span>.
<a 
 id="dx50-424023"></a>
<a 
 id="dx50-424024"></a>
<!--l. 377--><p class="indent" >   The final set of attributes define an identification for a COD application. The job ID is made up of both the
<span class="texttt">ClusterId</span> and <span class="texttt">ProcId</span> attributes. This job ID is similar to the job ID that is created whenever a
regular HTCondor batch job is submitted. For regular HTCondor batch jobs, the job ID is assigned
                                                                                         

                                                                                         
automatically by the <span class="textit">condor_schedd</span> whenever a new job is submitted into the persistent job queue.
However, since there is no persistent job queue for COD, the usual mechanism to identify jobs does not
exist. Moreover, commands that require the job ID for batch jobs such as <span class="textit">condor_q</span> and <span class="textit">condor_rm</span>
do not exist for COD. Instead, the claim ID is the unique identifier for COD jobs and COD-related
commands.
<!--l. 392--><p class="indent" >   When using COD, the job ID is only used to identify the job in various log messages and in the COD-specific
output of <span class="textit">condor_status</span>. The COD job ID is part of the information included in all events written to the
<span class="texttt">StarterUserLog</span> regarding a given job. The COD job ID is also used in the HTCondor debugging logs
described in section&#x00A0;<a 
href="ConfigurationMacros.html#x33-1890003.5.2">3.5.2<!--tex4ht:ref: sec:Daemon-Logging-Config-File-Entries --></a> on page&#x00A0;<a 
href="ConfigurationMacros.html#x33-1890003.5.2">608<!--tex4ht:ref: sec:Daemon-Logging-Config-File-Entries --></a>. For example, in the <span class="textit">condor_starter</span> daemon&#8217;s log file for COD jobs
(called <span class="texttt">StarterLog.cod</span> by default) or in the <span class="textit">condor_startd</span> daemon&#8217;s log file (called <span class="texttt">StartLog</span> by
default).
<!--l. 405--><p class="indent" >   These COD job IDs are optional. The job ID is useful to define where it helps a user with the accounting or
debugging of their own application. In this case, it is the user&#8217;s responsibility to ensure uniqueness, if so
desired.
     <dl class="description"><dt class="description">
<span class="texttt">ClusterId</span> </dt><dd 
class="description">This integer defines the <a 
 id="dx50-424025"></a>cluster identifier for a COD job. The default value is 1. The <span class="texttt">ClusterId</span>
     can also be defined with the <a 
 id="dx50-424026"></a><span class="textit">condor_cod</span> <span class="textit">activate</span> command-line tool using the <span class="textbf">-cluster</span> option.
     </dd><dt class="description">
<span class="texttt">ProcId</span> </dt><dd 
class="description">This integer defines the <a 
 id="dx50-424027"></a>process identifier (within a cluster) for a COD job. The default value is 0.
     The <span class="texttt">ProcId</span> can also be defined with the <span class="textit">condor_cod</span> <span class="textit">activate</span> command-line tool using the <span class="textbf">-cluster</span>
     option.
     </dd></dl>
<!--l. 431--><p class="indent" >   Note that the <span class="texttt">ClusterId</span> and <span class="texttt">ProcId</span> identifiers can also be specified as command-line arguments to the
<span class="textit">condor_cod</span> <span class="textit">activate</span> when spawning a given COD application. See section&#x00A0;<a 
href="#x50-4290004.3.4">4.3.4<!--tex4ht:ref: sec:cod-claim-activate --></a> below for details on using
<span class="textit">condor_cod</span> <span class="textit">activate</span>.
<!--l. 441--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4250004.3.3"></a> Defining Attributes in the HTCondor Configuration Files</h5>
<a 
 id="dx50-425001"></a>
<!--l. 446--><p class="noindent" >To define COD attributes in the HTCondor configuration file for a given application, the user selects a keyword to
uniquely name ClassAd attributes of the application. This case-insensitive keyword is used as a prefix for the various
configuration file variable names. When a user wishes to spawn a given application, the keyword is given as an
argument to the <span class="textit">condor_cod</span> tool, and the keyword is used at the remote COD resource to find attributes which
define the application.
<!--l. 456--><p class="indent" >   Any of the ClassAd attributes described in the previous section can be specified in the configuration file with the
                                                                                         

                                                                                         
keyword prefix followed by an underscore character (<span class="obeylines-h"><span class="verb">"_"</span></span>).
<!--l. 460--><p class="indent" >   For example, if the user&#8217;s keyword for a given fractal generation application is <span class="texttt">FractGen</span>, the resulting entries in
the HTCondor configuration file may appear as:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-821">
<tspan font-family="ectt" font-size="1000">FractGen_Cmd</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"/usr/local/bin/fractgen"</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">FractGen_Iwd</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"/tmp/cod-fractgen"</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">FractGen_Out</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"/tmp/cod-fractgen/output"</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">FractGen_Err</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"/tmp/cod-fractgen/error"</tspan>
<tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><br /><tspan font-family="ectt" font-size="1000">FractGen_Args</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;=</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"mandelbrot</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-0.65865,-0.56254</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-0.45865,-0.71254"</tspan>
</div>
<!--l. 470--><p class="nopar" >
<!--l. 472--><p class="indent" >   In this example, the executable may create other files. The <span class="texttt">Out</span> and <span class="texttt">Err</span> attributes specified in the configuration
file are only for standard output and standard error redirection.
<!--l. 477--><p class="indent" >   When the user wishes to spawn an instance of this application, the command line <span class="obeylines-h"><span class="verb">condor_cod&#x00A0;&#x00A0;activate</span></span>
appears with the <span class="obeylines-h"><span class="verb">-keyword&#x00A0;FractGen</span></span> option.
<!--l. 484--><p class="indent" >   <span class="underline">NOTE</span>: If a user is defining all attributes of their COD application in the HTCondor configuration files, and the
<span class="textit">condor_startd</span> daemon on the COD resource they are using is running as root, the user must also define <span class="texttt">Owner</span> to be
the user that the COD application should run as.
<!--l. 492--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4260004.3.3"></a> Defining Attributes with the <span class="textit">condor_cod</span> Tool</h5>
<a 
 id="dx50-426001"></a>
<!--l. 496--><p class="noindent" >COD users may define attributes dynamically (at the time they spawn a COD application). In this case, the user
writes the ClassAd attributes into a file, and the file name is passed to the <span class="textit">condor_cod</span> <span class="textit">activate</span> command using the
<span class="textbf">-jobad</span> option. These attributes are read by the <span class="textit">condor_cod</span> tool and passed through the system to the
<span class="textit">condor_starter</span> daemon, which spawns the COD application. If the file name given is <span class="texttt">-</span>, the <span class="textit">condor_cod</span> tool will
read from standard input (<span class="texttt">stdin</span>).
<!--l. 506--><p class="indent" >   Users should not add a keyword prefix when defining attributes with <span class="textit">condor_cod</span> <span class="textit">activate</span>. The attribute names
can be used in the file directly.
<!--l. 510--><p class="indent" >   <span class="underline">WARNING</span>: The current syntax for this file is not the same as the syntax in the file used with
<span class="textit">condor_submit</span>.
<!--l. 513--><p class="indent" >   <span class="underline">NOTE</span>: Users should not define the <span class="texttt">Owner</span> attribute when using <span class="textit">condor_cod</span> <span class="textit">activate</span> on the command line, since
HTCondor will automatically insert the correct value based on what user runs the <span class="textit">condor_cod</span> command
and how that user authenticates to the COD resource. If a user defines an attribute that does not
match the authenticated identity, HTCondor treats this case as an error, and it will fail to launch the
application.
                                                                                         

                                                                                         
<!--l. 525--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3.4   </span> <a 
 id="x50-4270004.3.4"></a> Managing COD Resource Claims</h4>
<a 
 id="dx50-427001"></a>
<!--l. 529--><p class="noindent" >Separate commands are provided by HTCondor to manage COD claims on batch resources. Once created, each
COD claim has a unique identifying string, called the claim ID. Most commands require a claim ID to specify which
claim you wish to act on. These commands are the means by which COD applications interact with the rest of the
HTCondor system. They should be issued by the controller application to manage its compute nodes. Here is a list
of the commands:
     <dl class="description"><dt class="description">
Request </dt><dd 
class="description">Create a new COD claim on a given resource.
     </dd><dt class="description">
Activate </dt><dd 
class="description">Spawn a specific application on a specific COD claim.
     </dd><dt class="description">
Suspend </dt><dd 
class="description">Suspend a running application within a specific COD claim.
     </dd><dt class="description">
Renew </dt><dd 
class="description">Renew the lease to a COD claim.
     </dd><dt class="description">
Resume </dt><dd 
class="description">Resume a suspended application on a specific COD claim.
     </dd><dt class="description">
Deactivate </dt><dd 
class="description">Shut down an application, but hold onto the COD claim for future use.
     </dd><dt class="description">
Release </dt><dd 
class="description">Destroy a specific COD claim, and shut down any job that is currently running on it.
     </dd><dt class="description">
Delegate proxy </dt><dd 
class="description">Send an x509 proxy credential to the specific COD claim (optional, only required in rare
     cases like using glexec to spawn the <span class="textit">condor_starter</span> at the execute machine where the COD job is
     running).
     </dd></dl>
<!--l. 566--><p class="indent" >   To issue these commands, a user or application invokes the <span class="textit">condor_cod</span> tool. A command may be specified as the
first argument to this tool, as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-822">
<tspan font-family="ectt" font-size="1000">condor_cod</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;c02.cs.wisc.edu</tspan>
</div>
<!--l. 574--><p class="nopar" > or the <span class="textit">condor_cod</span> tool can be installed in such a way that the same binary is used for a set of names,
as
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-823">
<tspan font-family="ectt" font-size="1000">condor_cod_request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;c02.cs.wisc.edu</tspan>
</div>
<!--l. 580--><p class="nopar" >
<!--l. 582--><p class="indent" >   Other than the command name itself (which must be included in full) additional options supported by each tool
can be abbreviated to the shortest unambiguous value. For example, <span class="textbf">-name</span> can also be specified as <span class="textbf">-n</span>. However, for
a command like <span class="textit">condor_cod_activate</span> that supports both <span class="textbf">-classad</span> and <span class="textbf">-cluster</span>, the user must use at least
<span class="textbf">-cla</span> or <span class="textbf">-clu</span>. If the user specifies an ambiguous option, the <span class="textit">condor_cod</span> tool will exit with an error
message.
<!--l. 592--><p class="indent" >   In addition, there is a <span class="textbf">-cod</span> option to <span class="textit">condor_status</span>.
<!--l. 594--><p class="indent" >   The following sections describe each option in greater detail.
<!--l. 597--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4280004.3.4"></a>Request</h5>
<a 
 id="dx50-428001"></a>
<!--l. 601--><p class="noindent" >A user must be granted authorization to create COD claims on a specific machine. In addition, when
the user uses these COD claims, the application binary or script they wish to run (and any input
data) must be pre-staged on the machine. Therefore, a user cannot simply request a COD claim at
random.
<!--l. 617--><p class="indent" >   The user specifies the resource on which to make a COD claim. This is accomplished by specifying the name of
the <span class="textit">condor_startd</span> daemon desired by invoking <span class="textit">condor_cod_request</span> with the <span class="textbf">-name</span> option and the resource name
(usually the host name). For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-824">
<tspan font-family="ectt" font-size="1000">condor_cod_request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;c02.cs.wisc.edu</tspan>
</div>
<!--l. 625--><p class="nopar" >
<!--l. 627--><p class="indent" >   If the <span class="textit">condor_startd</span> daemon desired belongs to a different HTCondor pool than the one where executing the
COD commands, use the <span class="textbf">-pool</span> option to provide the name of the central manager machine of the other pool. For
example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-825">
<tspan font-family="ectt" font-size="1000">condor_cod_request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;c02.cs.wisc.edu</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-pool</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;condor.cs.wisc.edu</tspan>
</div>
<!--l. 633--><p class="nopar" >
<!--l. 635--><p class="indent" >   An alternative is to provide the IP address and port number where the <span class="textit">condor_startd</span> daemon
is listening with the <span class="textbf">-addr</span> option. This information can be found in the <span class="textit">condor_startd</span> ClassAd as
the attribute <span class="texttt">StartdIpAddr</span> or by reading the log file when the <span class="textit">condor_startd</span> first starts up. For
example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-826">
<tspan font-family="ectt" font-size="1000">condor_cod_request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-addr</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;128.105.146.102:40967&#x003E;"</tspan>
</div>
<!--l. 644--><p class="nopar" >
<!--l. 646--><p class="indent" >   If neither <span class="textbf">-name</span> or <span class="textbf">-addr</span> are specified, <span class="textit">condor_cod_request</span> attempts to connect to the <span class="textit">condor_startd</span> daemon
running on the local machine (where the request command was issued).
<!--l. 651--><p class="indent" >   If the <span class="textit">condor_startd</span> daemon to be used for the COD claim is an SMP machine and has multiple slots, specify
which resource on the machine to use for COD by providing the full name of the resource, not just the host name.
For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-827">
<tspan font-family="ectt" font-size="1000">condor_cod_request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;slot2@c02.cs.wisc.edu</tspan>
</div>
<!--l. 658--><p class="nopar" >
<!--l. 660--><p class="indent" >   A constraint on what slot is desired may be provided, instead of specifying it by name. For example, to run on
machine c02.cs.wisc.edu, not caring which slot is used, so long as it the machine is not currently running a job, use
something like:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-828">
<tspan font-family="ectt" font-size="1000">condor_cod_request</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-name</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;c02.cs.wisc.edu</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-requirements</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;</tspan><tspan font-family="tctt" font-size="1000">'</tspan><tspan font-family="ectt" font-size="1000">State!="Claimed"</tspan><tspan font-family="tctt" font-size="1000">'</tspan>
</div>
<!--l. 668--><p class="nopar" >
<!--l. 670--><p class="indent" >   In general, be careful with shell quoting issues, so that your shell is not confused by the ClassAd expression
syntax (in particular if the expression includes a string). The safest method is to enclose any requirement expression
within single quote marks (as shown above).
<!--l. 676--><p class="indent" >   Once a given <span class="textit">condor_startd</span> daemon has been contacted to request a new COD claim, the <span class="textit">condor_startd</span>
daemon checks for proper authorization of the user issuing the command. If the user has the authority, and the
<span class="textit">condor_startd</span> daemon finds a resource that matches any given requirements, the <span class="textit">condor_startd</span> daemon creates a
new COD claim and gives it a unique identifier, the claim ID. This ID is used to identify COD claims when using
other commands. If <span class="textit">condor_cod_request</span> succeeds, the claim ID for the new claim is printed out to the screen.
All other commands to manage this claim require the claim ID to be provided as a command-line
option.
<!--l. 692--><p class="indent" >   When the <span class="textit">condor_startd</span> daemon assigns a COD claim, the ClassAd describing the resource is returned to the
user that requested the claim. This ClassAd is a snap-shot of the output of <span class="obeylines-h"><span class="verb">condor_status&#x00A0;-long</span></span> for the given
machine. If <span class="textit">condor_cod_request</span> is invoked with the <span class="textbf">-classad</span> option (which takes a file name as an argument), this
ClassAd will be written out to the given file. Otherwise, the ClassAd is printed to the screen. The only essential
piece of information in this ClassAd is the Claim ID, so that is printed to the screen, even if the whole ClassAd is
also being written to a file.
<!--l. 705--><p class="indent" >   The claim ID as given after listing the machine ClassAd appears as this example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-829">
<tspan font-family="ectt" font-size="0800">ID</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;of</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;new</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;claim</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;is:</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"&#x003C;128.105.121.21:49973&#x003E;#1073352104#4"</tspan>
</div>
<!--l. 710--><p class="nopar" > When using this claim ID in further commands, include the quote marks as well as all the characters in between the
quote marks.
<!--l. 715--><p class="indent" >   <span class="underline">NOTE</span>: Once a COD claim is created, there is no persistent record of it kept by the <span class="textit">condor_startd</span>
daemon. So, if the <span class="textit">condor_startd</span> daemon is restarted for any reason, all existing COD claims will be
destroyed and the new <span class="textit">condor_startd</span> daemon will not recognize any attempts to use the previous
claims.
<!--l. 721--><p class="indent" >   Also note that it is your responsibility to ensure that the claim is eventually removed (see section&#x00A0;<a 
href="#x50-4340004.3.4">4.3.4<!--tex4ht:ref: sec:cod-claim-release --></a>). Failure
to remove the COD claim will result in the <span class="textit">condor_startd</span> continuing to hold a record of the claim for as long
as <span class="textit">condor_startd</span> continues running. If a very large number of such claims are accumulated by the
<span class="textit">condor_startd</span>, this can impact its performance. Even worse: if a COD claim is unintentionally left in an
activated state, this results in the suspension of any batch job running on the same resource for as
long as the claim remains activated. For this reason, an optional <span class="textbf">-lease</span> argument is supported by
<span class="textit">condor_cod_request</span>. This tells the <span class="textit">condor_startd</span> to automatically release the COD claim after the specified
number of seconds unless the lease is renewed with <span class="textit">condor_cod_renew</span>. The default lease is infinitely
long.
<!--l. 737--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4290004.3.4"></a>Activate</h5>
<a 
 id="dx50-429001"></a>
<!--l. 741--><p class="noindent" >Once a user has created a valid COD claim and has the claim ID, the next step is to spawn a COD job using the
claim. The way to do this is to activate the claim, using the <span class="textit">condor_cod_activate</span> command. Once a COD
application is active on a COD claim, the COD claim will move into the <span class="obeylines-h"><span class="verb">Running</span></span> state, and any batch
HTCondor job on the same resource will be suspended. Whenever the COD application is inactive
(either suspended, removed from the machine, or if it exits on its own), the state of the COD claim
changes. The new state depends on why the application became inactive. The batch HTCondor job then
resumes.
<!--l. 754--><p class="indent" >   To activate a COD claim, first define attributes about the job to be run in either the local configuration of the
COD resource, or in a separate file as described in this manual section. Invoke the <span class="textit">condor_cod_activate</span>
command to launch a specific instance of the job on a given COD claim ID. The options given to
<span class="textit">condor_cod_activate</span> vary depending on if the job attributes are defined in the configuration file or are
passed via a file to the <span class="textit">condor_cod_activate</span> tool itself. However, the <span class="textbf">-id</span> option is always required by
<span class="textit">condor_cod_activate</span>, and this option should be followed by a COD claim ID that the user acquired via
<span class="textit">condor_cod_request</span>.
<!--l. 769--><p class="indent" >   If the application is defined in the configuration files for the COD resource, the user provides the keyword
                                                                                         

                                                                                         
(described in section&#x00A0;<a 
href="#x50-4250004.3.3">4.3.3<!--tex4ht:ref: sec:cod-config-attrs --></a>) that uniquely identifies the application&#8217;s configuration attributes. To continue the
example from that section, the user would spawn their job by specifying <span class="obeylines-h"><span class="verb">-keyword&#x00A0;FractGen</span></span>, for
example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-830">
<tspan font-family="ectt" font-size="1000">condor_cod_activate</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-keyword</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;FractGen</tspan>
</div>
<!--l. 777--><p class="nopar" > Substitute the <span class="obeylines-h"><span class="verb">&#x003C;claim_id&#x003E;</span></span> with the valid Cod Claim Id. Using the same example as given above, this example
would be:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-831">
<tspan font-family="ectt" font-size="0800">condor_cod_activate</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;"&#x003C;128.105.121.21:49973&#x003E;#1073352104#4"</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;-keyword</tspan><tspan font-family="ectt" font-size="0800">&#x00A0;FractGen</tspan>
</div>
<!--l. 783--><p class="nopar" >
<!--l. 786--><p class="indent" >   If the job attributes are placed into a file to be passed to the <span class="textit">condor_cod_activate</span> tool, the user must provide
the name of the file using the <span class="textbf">-jobad</span> option. For example, if the job attributes were defined in a file named
<span class="texttt">cod-fractgen.txt</span>, the user spawns the job using the command:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-832">
<tspan font-family="ectt" font-size="1000">condor_cod_activate</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-jobad</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;cod-fractgen.txt</tspan>
</div>
<!--l. 795--><p class="nopar" > Alternatively, if the filename specified with <span class="textbf">-jobad</span> is <span class="texttt">-</span>, the <span class="textit">condor_cod_activate</span> tool reads the job ClassAd from
standard input (<span class="texttt">stdin</span>).
<!--l. 800--><p class="indent" >   Regardless of how the job attributes are defined, there are other options that <span class="textit">condor_cod_activate</span> accepts.
These options specify the job ID for the application to be run. The job ID can either be specified in the job&#8217;s
ClassAd, or it can be specified on the command line to <span class="textit">condor_cod_activate</span>. These options are <span class="textbf">-cluster</span> and
<span class="textbf">-proc</span>. For example, to launch a COD job with keyword <span class="obeylines-h"><span class="verb">foo</span></span> as cluster 23, proc 5, or 23.5, the user
invokes:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-833">
<tspan font-family="ectt" font-size="1000">condor_cod_activate</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-key</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;foo</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-cluster</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;23</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-proc</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;5</tspan>
</div>
<!--l. 812--><p class="nopar" > The <span class="textbf">-cluster</span> and <span class="textbf">-proc</span> arguments are optional, since the job ID is not required for COD. If not specified, the job
ID defaults to <span class="obeylines-h"><span class="verb">1.0</span></span>.
<!--l. 819--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4300004.3.4"></a>Suspend</h5>
<a 
 id="dx50-430001"></a>
<!--l. 823--><p class="noindent" >Once a COD application has been activated with <span class="textit">condor_cod_activate</span> and is running on a COD resource,
it may be temporarily suspended using <span class="textit">condor_cod_suspend</span>. In this case, the claim state becomes
<span class="obeylines-h"><span class="verb">Suspended</span></span>. Once a given COD job is suspended, if there are no other running COD jobs on the resource,
an HTCondor batch job can use the resource. By suspending the COD application, the batch job
is allowed to run. If a resource is idle when a COD application is first spawned, suspension of the
COD job makes the batch resource available for use in the HTCondor system. Therefore, whenever a
COD application has no work to perform, it should be suspended to prevent the resource from being
wasted.
<!--l. 836--><p class="indent" >   The interface of <span class="textit">condor_cod_suspend</span> supports the single option <span class="textbf">-id</span>, to specify the COD claim ID to be
suspended. For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-834">
<tspan font-family="ectt" font-size="1000">condor_cod_suspend</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan>
</div>
<!--l. 842--><p class="nopar" >
<!--l. 844--><p class="indent" >   If the user attempts to suspend a COD job that is not running, <span class="textit">condor_cod_suspend</span> exits with an error
message. The COD job may not be running because it is already suspended or because the job was never spawned
on the given COD claim in the first place.
<!--l. 852--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4310004.3.4"></a>Renew</h5>
<a 
 id="dx50-431001"></a>
<!--l. 856--><p class="noindent" >This command tells the <span class="textit">condor_startd</span> to renew the lease on the COD claim for the amount of lease time specified
when the claim was created. See section&#x00A0;<a 
href="#x50-4280004.3.4">4.3.4<!--tex4ht:ref: sec:cod-claim-request --></a> for more information on using leases.
<!--l. 861--><p class="indent" >   The <span class="textit">condor_cod_renew</span> tool supports only the <span class="textbf">-id</span> option to specify the COD claim ID the user wishes to renew.
For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-835">
<tspan font-family="ectt" font-size="1000">condor_cod_renew</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan>
</div>
<!--l. 866--><p class="nopar" >
<!--l. 868--><p class="indent" >   If the user attempts to renew a COD job that no longer exists, <span class="textit">condor_cod_renew</span> exits with an error
message.
<!--l. 872--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4320004.3.4"></a>Resume</h5>
<a 
 id="dx50-432001"></a>
<!--l. 876--><p class="noindent" >Once a COD application has been suspended with <span class="textit">condor_cod_suspend</span>, it can be resumed using
<span class="textit">condor_cod_resume</span>. In this case, the claim state returns to <span class="obeylines-h"><span class="verb">Running</span></span>. If there is a regular batch job running on the
same resource, it will automatically be suspended if a COD application is resumed.
<!--l. 882--><p class="indent" >   The <span class="textit">condor_cod_resume</span> tool supports only the <span class="textbf">-id</span> option to specify the COD claim ID the user wishes to
resume. For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-836">
<tspan font-family="ectt" font-size="1000">condor_cod_resume</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan>
</div>
<!--l. 887--><p class="nopar" >
<!--l. 889--><p class="indent" >   If the user attempts to resume a COD job that is not suspended, <span class="textit">condor_cod_resume</span> exits with an error
message.
<!--l. 894--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4330004.3.4"></a>Deactivate</h5>
<a 
 id="dx50-433001"></a>
<!--l. 898--><p class="noindent" >If a given COD application does not exit on its own and needs to be removed manually, invoke the
<span class="textit">condor_cod_deactivate</span> command to kill the job, but leave the COD claim ID valid for future COD jobs. The user
must specify the claim ID they wish to deactivate using the <span class="textbf">-id</span> option. For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-837">
<tspan font-family="ectt" font-size="1000">condor_cod_deactivate</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan>
</div>
<!--l. 907--><p class="nopar" >
<!--l. 909--><p class="indent" >   By default, <span class="textit">condor_cod_deactivate</span> attempts to gracefully cleanup the COD application and give it time to exit.
In this case the COD claim goes into the <span class="obeylines-h"><span class="verb">Vacating</span></span> state and the <span class="textit">condor_starter</span> process controlling the job will
send it the <span class="texttt">KillSig</span> defined for the job (SIGTERM by default). This allows the COD job to catch the signal and do
whatever final work is required to exit cleanly.
<!--l. 917--><p class="indent" >   However, if the program is stuck or if the user does not want to give the application time to clean itself up, the
user may use the <span class="textbf">-fast</span> option to tell the <span class="textit">condor_starter</span> to quickly kill the job and all its descendants using
SIGKILL. In this case the COD claim goes into the <span class="obeylines-h"><span class="verb">Killing</span></span> state. For example:
                                                                                         

                                                                                         
   <div class="verbatim" id="verbatim-838">
<tspan font-family="ectt" font-size="1000">condor_cod_deactivate</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-id</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;"&#x003C;claim_id&#x003E;"</tspan><tspan font-family="ectt" font-size="1000">&#x00A0;-fast</tspan>
</div>
<!--l. 925--><p class="nopar" >
<!--l. 927--><p class="indent" >   In either case, once the COD job has finally exited, the COD claim will go into the <span class="obeylines-h"><span class="verb">Idle</span></span> state and will be
available for future COD applications. If there are no other active COD jobs on the same resource, the resource
would become available for batch HTCondor jobs. Whenever the user wishes to spawn another COD application,
they can reuse this idle COD claim by using the same claim ID, without having to go through the process of running
<span class="textit">condor_cod_request</span>.
<!--l. 936--><p class="indent" >   If the user attempts a <span class="textit">condor_cod_deactivate</span> request on a COD claim that is neither <span class="obeylines-h"><span class="verb">Running</span></span> nor <span class="obeylines-h"><span class="verb">Suspended</span></span>,
the <span class="textit">condor_cod</span> tool exits with an error message.
<!--l. 942--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4340004.3.4"></a>Release</h5>
<a 
 id="dx50-434001"></a>
<!--l. 946--><p class="noindent" >If users no longer wish to use a given COD claim, they can release the claim with the <span class="textit">condor_cod_release</span>
command. If there is a COD job running on the claim, the job will first be shut down (as if <span class="textit">condor_cod_deactivate</span>
was used), and then the claim itself is removed from the resource and the claim ID is destroyed. Further attempts to
use the claim ID for any COD commands will fail.
<!--l. 955--><p class="indent" >   The <span class="textit">condor_cod_release</span> command always prints out the state the COD claim was in when the request was
received. This way, users can know what state a given COD application was in when the claim was
destroyed.
<!--l. 960--><p class="indent" >   Like most COD commands, <span class="textit">condor_cod_release</span> requires the claim ID to be specified using <span class="textbf">-id</span>. In addition,
<span class="textit">condor_cod_release</span> supports the <span class="textbf">-fast</span> option (described above in the section about <span class="textit">condor_cod_deactivate</span>). If
there is a job running or suspended on the claim when it is released with <span class="obeylines-h"><span class="verb">condor_cod_release&#x00A0;-fast</span></span>,
the job will be immediately killed. If <span class="textbf">-fast</span> is not specified, the default behavior is to use a graceful
shutdown, sending whatever signal is specified in the <span class="texttt">KillSig</span> attribute for the job (SIGTERM by
default).
<!--l. 974--><p class="noindent" >
   <h5 class="subsubsectionHead"><a 
 id="x50-4350004.3.4"></a>Delegate proxy</h5>
<a 
 id="dx50-435001"></a>
                                                                                         

                                                                                         
<!--l. 978--><p class="noindent" >In some cases, a user will want to delegate a copy of their user credentials (in the form of an x509 proxy) to the
machine where one of their COD jobs will run. For example, sites wishing to spawn the <span class="textit">condor_starter</span> using glexec
will need a copy of this credential before the claim can be activated. Therefore, beginning with HTCondor
version 6.9.2, COD users have access to a the command <span class="obeylines-h"><span class="verb">delegate_proxy</span></span>. If users do not specifically
require this proxy delegation, this command should not be used and the rest of this section can be
skipped.
<!--l. 988--><p class="indent" >   The <span class="obeylines-h"><span class="verb">delegate_proxy</span></span> command optionally takes a <span class="textbf">-x509proxy</span> argument to specify the path to the proxy file to
use. Otherwise, it uses the same discovery logic that <span class="textit">condor_submit</span> uses to find the user&#8217;s currently active
proxy.
<!--l. 993--><p class="indent" >   Just like every other COD command (except <span class="obeylines-h"><span class="verb">request</span></span>), this command requires a valid COD claim id (specified
with <span class="textbf">-id</span>) to indicate what COD claim you wish to delegate the credentials to.
<!--l. 997--><p class="indent" >   This command can only be sent to idle COD claims, so it should be done before <span class="obeylines-h"><span class="verb">activate</span></span> is run
for the first time. However, once a proxy has been delegated, it can be reused by successive claim
activations, so normally this step only has to happen once, not before every activate. If a proxy is going to
expire, and a new one should be sent, this should only happen after the existing COD claim has been
deactivated.
<!--l. 1007--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3.5   </span> <a 
 id="x50-4360004.3.5"></a>Limitations of COD Support in HTCondor</h4>
<a 
 id="dx50-436001"></a>
<!--l. 1011--><p class="noindent" >HTCondor&#8217;s support for COD has a few limitations:
     <ul class="itemize1">
     <li class="itemize">Applications and data must be pre-staged at a given machine.
     </li>
     <li class="itemize">There is no way to define limits for how long a given COD claim can be active and how often it is run.
     </li>
     <li class="itemize">There is no accounting done for applications run under COD claims. Therefore, use of a lot of COD
     resources in a given HTCondor pool does not adversely affect user priority.
     </li>
     <li class="itemize">COD claims are not persistent on a given <span class="textit">condor_startd</span> daemon.
     </li>
     <li class="itemize">HTCondor does not provide a mechanism to parallelize a graphic application to take advantage of COD.
     The HTCondor Team is not in the business of developing applications, we only provide mechanisms to
     execute them.
     </li></ul>
                                                                                         

                                                                                         
<a 
 id="dx50-436002"></a>
                                                                                         

                                                                                         
<!--l. 2--><p class="indent" >   <span style="font-size: 200%;"><a 
href="HTCondorsCheckpointMechanism.html" >&#x21D0;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="HTCondorsCheckpointMechanism.html#tailHTCondorsCheckpointMechanism.html" >&#x2199;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="ComputingOnDemandCOD.html" >&#x2191;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="MiscellaneousConcepts.html#ComputingOnDemandCOD.html" >&#x21D1;</a></span>&nbsp;<span style="font-size: 200%;"><a 
href="Hooks.html" >&#x21D2;</a></span>&nbsp;<a href="contentsname.html">Contents</a>&nbsp;<a href="indexname.html">Index</a><a 
 id="tailComputingOnDemandCOD.html"></a>  
</body></html> 
